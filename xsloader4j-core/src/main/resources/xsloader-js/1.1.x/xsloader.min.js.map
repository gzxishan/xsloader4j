{"version":3,"file":"xsloader.min.js","sources":["../xsloader-src/util/global.js","../xsloader-src/core/loader.js","../xsloader-src/util/urls.js","../xsloader-src/util/base.js","../xsloader-src/util/loading.js","../xsloader-src/util/base64.js","../xsloader-src/util/index.js","../xsloader-src/public/global-deprecated.js","../xsloader-src/polyfill/json.js","../xsloader-src/polyfill/proxy.js","../xsloader-src/polyfill/index.js","../xsloader-src/public/global-base.js","../xsloader-src/public/is.js","../xsloader-src/public/funs.js","../xsloader-src/public/browser.js","../xsloader-src/public/index.js","../xsloader-src/core/module-def.js","../xsloader-src/core/module.js","../xsloader-src/core/script.js","../xsloader-src/core/index.js","../xsloader-src/define.js","../xsloader-src/core/lib/xshttp.js","../xsloader-src/core/lib/request.js","../xsloader-src/core/lib/xsmsg.js","../xsloader-src/core/lib/xsloader4j-server-bridge.js","../xsloader-src/core/lib/ifmsg.js","../xsloader-src/core/plugins/inner-dep.js","../xsloader-src/core/plugins/ready.js","../xsloader-src/core/plugins/try.js","../xsloader-src/core/plugins/nodeps.js","../xsloader-src/core/plugins/exists.js","../xsloader-src/core/plugins/name.js","../xsloader-src/core/plugins/css.js","../xsloader-src/core/plugins/text.js","../xsloader-src/core/plugins/window.js","../xsloader-src/core/plugins/withdeps.js","../xsloader-src/core/plugins/json.js","../xsloader-src/core/plugins/image.js","../xsloader-src/core/plugins/default.js","../xsloader-src/service.js","../xsloader-src/main.js"],"sourcesContent":["let G;\r\nif(typeof window !== undefined) {\r\n\tG = window;\r\n} else if(typeof self !== undefined) {\r\n\tG = self;\r\n} else if(typeof global !== undefined) {\r\n\tG = global;\r\n} else {\r\n\tthrow new Error(\"not found global var!\");\r\n}\r\n\r\nexport default G;","import global from '../util/global.js';\r\nlet loaderFun;\r\nlet xsloader = global.xsloader = function() {\r\n\treturn loaderFun.apply(this, arguments);\r\n};\r\n\r\nexport default {\r\n\tloaderFun: (fun) => {\r\n\t\tloaderFun = fun;\r\n\t}\r\n};","const ABSOLUTE_PROTOCOL_REG = /^(([a-zA-Z0-9_]*:\\/\\/)|(\\/)|(\\/\\/))/;\r\nconst ABSOLUTE_PROTOCOL_REG2 = /^([a-zA-Z0-9_]+:)\\/\\/([^/\\s]+)/;\r\nconst defaultJsExts = [\".js\", \".js+\", \".js++\", \".es\", \"es6\", \".jsx\", \".vue\",\".*\",\".htmv_vue\"];\r\n\r\nimport global from './global.js';\r\nconst L = global.xsloader;\r\n\r\nfunction isJsFile(path) {\r\n\tif(!L.isString(path) || path.indexOf(\".\") == -1) {\r\n\t\treturn false;\r\n\t}\r\n\tlet pluginIndex = path.indexOf(\"!\");\r\n\tif(pluginIndex > 0) {\r\n\t\tpath = path.substring(0, pluginIndex);\r\n\t}\r\n\tlet index = path.indexOf(\"?\");\r\n\tif(index > 0) {\r\n\t\tpath = path.substring(0, index);\r\n\t}\r\n\tindex = path.indexOf(\"#\");\r\n\tif(index > 0) {\r\n\t\tpath = path.substring(0, index);\r\n\t}\r\n\tlet theConfig = L.config();\r\n\r\n\tlet jsExts = theConfig && theConfig.jsExts || defaultJsExts;\r\n\tfor(let i = 0; i < jsExts.length; i++) {\r\n\t\tif(L.endsWith(path, jsExts[i])) {\r\n\t\t\treturn {\r\n\t\t\t\text: jsExts[i],\r\n\t\t\t\tpath: path\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n\treturn false;\r\n}\r\n\r\nfunction dealPathMayAbsolute(path, currentUrl) {\r\n\tcurrentUrl = currentUrl || path;\r\n\tlet rs = ABSOLUTE_PROTOCOL_REG.exec(path);\r\n\r\n\tlet finalPath;\r\n\tlet absolute;\r\n\tif(rs) {\r\n\t\tlet protocol = rs[1];\r\n\t\tabsolute = true;\r\n\r\n\t\trs = ABSOLUTE_PROTOCOL_REG2.exec(currentUrl);\r\n\t\tlet _protocol = rs && rs[1] || location.protocol;\r\n\t\tlet _host = rs && rs[2] || location.host;\r\n\r\n\t\tif(protocol == \"//\") {\r\n\t\t\tfinalPath = _protocol + \"//\" + path;\r\n\t\t} else if(protocol == \"/\") {\r\n\t\t\tfinalPath = _protocol + \"//\" + _host + path;\r\n\t\t} else {\r\n\t\t\tfinalPath = path;\r\n\t\t}\r\n\r\n\t} else {\r\n\t\tabsolute = false;\r\n\t\tfinalPath = path;\r\n\t}\r\n\treturn {\r\n\t\tabsolute: absolute,\r\n\t\tpath: finalPath\r\n\t};\r\n}\r\n\r\nfunction getPathWithRelative(path, relative, isPathDir) {\r\n\r\n\tlet relativeQuery = \"\";\r\n\tlet qIndex = path.lastIndexOf(\"?\");\r\n\tif(qIndex >= 0) {\r\n\t\tpath = path.substring(0, qIndex);\r\n\t} else {\r\n\t\tqIndex = path.lastIndexOf(\"#\");\r\n\t\tif(qIndex >= 0) {\r\n\t\t\tpath = path.substring(0, qIndex);\r\n\t\t}\r\n\t}\r\n\r\n\tqIndex = relative.lastIndexOf(\"?\");\r\n\tif(qIndex >= 0) {\r\n\t\trelativeQuery = relative.substring(qIndex);\r\n\t\trelative = relative.substring(0, qIndex);\r\n\t} else {\r\n\t\tqIndex = relative.lastIndexOf(\"#\");\r\n\t\tif(qIndex >= 0) {\r\n\t\t\trelativeQuery = relative.substring(qIndex);\r\n\t\t\trelative = relative.substring(0, qIndex);\r\n\t\t}\r\n\t}\r\n\r\n\tlet absolute = dealPathMayAbsolute(relative,path);\r\n\tif(absolute.absolute) {\r\n\t\treturn absolute.path + relativeQuery;\r\n\t}\r\n\r\n\tif(isPathDir === undefined) {\r\n\t\tlet index = path.lastIndexOf(\"/\");\r\n\t\tif(index == path.length - 1) {\r\n\t\t\tisPathDir = true;\r\n\t\t} else {\r\n\t\t\tif(index == -1) {\r\n\t\t\t\tindex = 0;\r\n\t\t\t} else {\r\n\t\t\t\tindex++;\r\n\t\t\t}\r\n\t\t\tisPathDir = path.indexOf(\".\", index) == -1;\r\n\t\t}\r\n\t}\r\n\r\n\tif(L.endsWith(path, \"/\")) {\r\n\t\tpath = path.substring(0, path.length - 1);\r\n\t}\r\n\r\n\tlet isRelativeDir = false;\r\n\tif(relative == \".\" || L.endsWith(relative, \"/\")) {\r\n\t\trelative = relative.substring(0, relative.length - 1);\r\n\t\tisRelativeDir = true;\r\n\t} else if(relative == \".\" || relative == \"..\" || L.endsWith(\"/.\") || L.endsWith(\"/..\")) {\r\n\t\tisRelativeDir = true;\r\n\t}\r\n\r\n\tlet prefix = \"\";\r\n\tlet index = -1;\r\n\tlet absolute2 = dealPathMayAbsolute(path);\r\n\tif(absolute2.absolute) {\r\n\t\tpath = absolute2.path;\r\n\t\tlet index2 = path.indexOf(\"//\");\r\n\t\tindex = path.indexOf(\"/\", index2 + 2);\r\n\t\tif(index == -1) {\r\n\t\t\tindex = path.length;\r\n\t\t}\r\n\t}\r\n\r\n\tprefix = path.substring(0, index + 1);\r\n\tpath = path.substring(index + 1);\r\n\r\n\tlet stack = path.split(\"/\");\r\n\tif(!isPathDir && stack.length > 0) {\r\n\t\tstack.pop();\r\n\t}\r\n\tlet relatives = relative.split(\"/\");\r\n\tfor(let i = 0; i < relatives.length; i++) {\r\n\t\tlet str = relatives[i];\r\n\t\tif(\"..\" == str) {\r\n\t\t\tif(stack.length == 0) {\r\n\t\t\t\t\r\n\t\t\t\tthrow new Error(\"no more upper path:path=\"+arguments[0]+\",relative=\"+arguments[1]);\r\n\t\t\t}\r\n\t\t\tstack.pop();\r\n\t\t} else if(\".\" != str) {\r\n\t\t\tstack.push(str);\r\n\t\t}\r\n\t}\r\n//\tif(stack.length == 0) {\r\n//\t\treturn \"\";\r\n//\t}\r\n\tlet result = prefix + stack.join(\"/\");\r\n\tif(isRelativeDir && !L.endsWith(result, \"/\")) {\r\n\t\tresult += \"/\";\r\n\t}\r\n\tresult = L.appendArgs2Url(result, relativeQuery);\r\n\treturn result;\r\n}\r\n\r\nfunction getNodeAbsolutePath(node) {\r\n\tlet src = node.src || node.getAttribute(\"src\");\r\n\treturn getPathWithRelative(location.href, src);\r\n}\r\n\r\n//去掉url的query参数和#参数\r\nfunction removeQueryHash(url) {\r\n\tif(url) {\r\n\t\tlet index = url.indexOf(\"?\");\r\n\t\tif(index >= 0) {\r\n\t\t\turl = url.substring(0, index);\r\n\t\t}\r\n\r\n\t\tindex = url.indexOf(\"#\");\r\n\t\tif(index >= 0) {\r\n\t\t\turl = url.substring(0, index);\r\n\t\t}\r\n\t}\r\n\treturn url;\r\n}\r\n\r\nconst REPLACE_STRING_PROPERTIES_EXP = new RegExp(\"\\\\$\\\\{([^\\\\{]+)\\\\}\");\r\nconst ALL_TYPE_PROPERTIES_EXP = new RegExp(\"^\\\\$\\\\[([^\\\\[\\\\]]+)\\\\]$\");\r\n\r\nfunction propertiesDeal(configObject, properties) {\r\n\tif(!properties) {\r\n\t\treturn configObject;\r\n\t}\r\n\r\n\tfunction replaceStringProperties(string, properties, property) {\r\n\t\tlet rs;\r\n\t\tlet str = string;\r\n\t\trs = ALL_TYPE_PROPERTIES_EXP.exec(str);\r\n\t\tif(rs) {\r\n\t\t\tlet propKey = rs[1];\r\n\t\t\tlet propValue = L.getObjectAttr(properties, propKey);\r\n\t\t\tif(propValue === undefined) {\r\n\t\t\t\treturn str;\r\n\t\t\t} else {\r\n\t\t\t\treturn propValue;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tlet result = \"\";\r\n\t\twhile(true) {\r\n\t\t\trs = REPLACE_STRING_PROPERTIES_EXP.exec(str);\r\n\t\t\tif(!rs) {\r\n\t\t\t\tresult += str;\r\n\t\t\t\tbreak;\r\n\t\t\t} else {\r\n\t\t\t\tlet propKey = rs[1];\r\n\t\t\t\tif(property !== undefined && property.propertyKey == propKey) {\r\n\t\t\t\t\tthrow new Error(\"replace property error:propertyKey=\" + propKey);\r\n\t\t\t\t} else if(property) {\r\n\t\t\t\t\tproperty.has = true;\r\n\t\t\t\t}\r\n\t\t\t\tresult += str.substring(0, rs.index);\r\n\t\t\t\tresult += L.getObjectAttr(properties, propKey);\r\n\t\t\t\tstr = str.substring(rs.index + rs[0].length);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\r\n\t//处理属性引用\r\n\tfunction replaceProperties(obj, property, enableKeyAttr) {\r\n\t\tif(!obj) {\r\n\t\t\treturn obj;\r\n\t\t}\r\n\t\tif(L.isFunction(obj)) {\r\n\t\t\treturn obj;\r\n\t\t} else if(L.isArray(obj)) {\r\n\t\t\tfor(let i = 0; i < obj.length; i++) {\r\n\t\t\t\tobj[i] = replaceProperties(obj[i], property, enableKeyAttr);\r\n\t\t\t}\r\n\t\t} else if(L.isString(obj)) {\r\n\t\t\tobj = replaceStringProperties(obj, properties, property);\r\n\t\t} else if(L.isObject(obj)) {\r\n\t\t\tif(property) {\r\n\t\t\t\tproperty.has = false;\r\n\t\t\t}\r\n\t\t\tlet replaceKeyMap = {};\r\n\t\t\tfor(let x in obj) {\r\n\t\t\t\tif(property) {\r\n\t\t\t\t\tproperty.propertyKey = x;\r\n\t\t\t\t}\r\n\t\t\t\tobj[x] = replaceProperties(obj[x], property, enableKeyAttr);\r\n\t\t\t\tif(enableKeyAttr) {\r\n\t\t\t\t\tlet _x = replaceStringProperties(x, properties, property);\r\n\t\t\t\t\tif(_x !== x) {\r\n\t\t\t\t\t\treplaceKeyMap[x] = _x;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfor(let x in replaceKeyMap) {\r\n\t\t\t\tlet objx = obj[x];\r\n\t\t\t\tdelete obj[x];\r\n\t\t\t\tobj[replaceKeyMap[x]] = objx;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn obj;\r\n\r\n\t}\r\n\r\n\tif(!properties.__dealt__) {\r\n\t\tlet property = {\r\n\t\t\thas: false\r\n\t\t};\r\n\r\n\t\tfor(let x in properties) {\r\n\t\t\tlet fun = properties[x];\r\n\t\t\tif(L.isFunction(fun)) {\r\n\t\t\t\tproperties[x] = fun.call(properties);\r\n\t\t\t}\r\n\t\t}\r\n\t\tdo {\r\n\t\t\treplaceProperties(properties, property);\r\n\t\t} while (property.has);\r\n\t\tproperties.__dealt__ = true;\r\n\t}\r\n\r\n\treturn replaceProperties(configObject, undefined, true);\r\n}\r\n\r\nfunction replaceModulePrefix(config, deps) {\r\n\r\n\tif(!deps||deps.length==0) {\r\n\t\treturn;\r\n\t}\r\n\r\n\tfor(let i = 0; i < deps.length; i++) {\r\n\t\tlet m = deps[i];\r\n\t\tif(typeof m == \"string\") {\r\n\t\t\tlet index = m.indexOf(\"!\");\r\n\t\t\tlet pluginParam = index > 0 ? m.substring(index) : \"\";\r\n\t\t\tm = index > 0 ? m.substring(0, index) : m;\r\n\r\n\t\t\tindex = m.indexOf(\"?\");\r\n\t\t\tlet query = index > 0 ? m.substring(index) : \"\";\r\n\t\t\tm = index > 0 ? m.substring(0, index) : m;\r\n\r\n\t\t\tlet is = isJsFile(m);\r\n\t\t\tif(config.autoExt&&/\\/[^\\/\\.]+$/.test(m)){//自动后缀，需要后台支持\r\n\t\t\t\tdeps[i] = m + config.autoExtSuffix + query + pluginParam;\r\n\t\t\t}\r\n\t\t\telse if(!is && !/\\.[^\\/\\s]*$/.test(m) && (L.startsWith(m, \".\") || dealPathMayAbsolute(m).absolute)) {\r\n\t\t\t\tdeps[i] = m + \".js\" + query + pluginParam;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tif(config.modulePrefixCount) {\r\n\t\t//模块地址的前缀替换\r\n\t\tfor(let prefix in config.modulePrefix) {\r\n\t\t\tlet replaceStr = config.modulePrefix[prefix].replace;\r\n\t\t\tlet len = prefix.length;\r\n\t\t\tfor(let i = 0; i < deps.length; i++) {\r\n\t\t\t\tlet m = deps[i];\r\n\t\t\t\tif(typeof m == \"string\") {\r\n\t\t\t\t\tlet pluginIndex = m.indexOf(\"!\");\r\n\t\t\t\t\tlet pluginName = null;\r\n\t\t\t\t\tif(pluginIndex >= 0) {\r\n\t\t\t\t\t\tpluginName = m.substring(0, pluginIndex + 1);\r\n\t\t\t\t\t\tm = m.substring(pluginIndex + 1);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(L.startsWith(m, prefix)) {\r\n\t\t\t\t\t\tlet dep = replaceStr + m.substring(len);\r\n\t\t\t\t\t\tdeps[i] = pluginName ? pluginName + dep : dep;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction getScriptBySubname(subname) {\r\n\tlet ss = document.getElementsByTagName('script');\r\n\tif(subname) {\r\n\t\tfor(let i = 0; i < ss.length; i++) {\r\n\t\t\tlet script = ss[i];\r\n\t\t\tlet src = script.src;\r\n\t\t\tsrc = src.substring(src.lastIndexOf(\"/\"));\r\n\t\t\tif(src.indexOf(subname) >= 0) {\r\n\t\t\t\treturn script;\r\n\t\t\t}\r\n\t\t}\r\n\t} else {\r\n\t\treturn ss;\r\n\t}\r\n}\r\n\r\nconst thePageUrl = (function() {\r\n\tlet url = location.href;\r\n\turl = removeQueryHash(url);\r\n\treturn url;\r\n})();\r\n\r\nexport default {\r\n\tgetPathWithRelative,\r\n\tgetNodeAbsolutePath,\r\n\tdealPathMayAbsolute,\r\n\tremoveQueryHash,\r\n\tpropertiesDeal,\r\n\treplaceModulePrefix,\r\n\tisJsFile,\r\n\tgetScriptBySubname,\r\n\tthePageUrl,\r\n};","import G from './global.js';\r\nconst L = G.xsloader;\r\nconst COMMENT_REGEXP = /\\/\\*[\\s\\S]*?\\*\\/|([^:\"'=]|^)\\/\\/.*$/mg;\r\nconst REPLACE_REQUIRE_GET_REGEXP = /(^|[\\s\\(\\),;.\\?:]+)require\\s*\\.\\s*get\\s*\\(\\s*[\"']([^'\"\\r\\n]+)[\"']\\s*\\)/g;\r\nconst REPLACE_REQUIRE_REGEXP = /(^|[\\s\\(\\),;.\\?:]+)require\\s*\\(\\s*[\"']([^'\"\\r\\n]+)[\"']\\s*\\)/g;\r\nconst NOT_REQUIRE_REGEXP = /\\.\\s*$/;\r\n\r\n/**\r\n * 用于包装变量，防止JSON.stringify等时输出指定变量。\r\n * @param {Object} val\r\n */\r\nfunction InVar(val) {\r\n\tthis.get = function() {\r\n\t\treturn val;\r\n\t};\r\n\r\n\tthis.set = function(newVal) {\r\n\t\tlet old = val;\r\n\t\tval = newVal;\r\n\t\treturn old;\r\n\t};\r\n}\r\nL.InVar = G.InVar = InVar;\r\n\r\n//基于有向图进行循环依赖检测\r\nfunction GraphPath() {\r\n\tlet pathEdges = {};\r\n\tlet vertexMap = {};\r\n\tlet depMap = {};\r\n\tthis.addEdge = function(begin, end) {\r\n\t\tdepMap[begin + \"|\" + end] = true;\r\n\t\tif (!pathEdges[begin]) {\r\n\t\t\tpathEdges[begin] = [];\r\n\t\t}\r\n\t\tif (!vertexMap[begin]) {\r\n\t\t\tvertexMap[begin] = true;\r\n\t\t}\r\n\t\tif (!vertexMap[end]) {\r\n\t\t\tvertexMap[end] = true;\r\n\t\t}\r\n\t\tpathEdges[begin].push({\r\n\t\t\tbegin: begin,\r\n\t\t\tend: end\r\n\t\t});\r\n\t};\r\n\r\n\tthis.hasDep = function(name, dep) {\r\n\t\treturn depMap[name + \"|\" + dep];\r\n\t};\r\n\r\n\tthis.tryAddEdge = function(begin, end) {\r\n\t\tthis.addEdge(begin, end);\r\n\t\tlet paths = this.hasLoop();\r\n\t\tif (paths.length > 0) {\r\n\t\t\tpathEdges[begin].pop();\r\n\t\t}\r\n\t\treturn paths;\r\n\t};\r\n\r\n\tthis.hasLoop = function() {\r\n\t\tlet visited = {};\r\n\t\tlet recursionStack = {};\r\n\r\n\t\tfor (let x in vertexMap) {\r\n\t\t\tvisited[x] = false;\r\n\t\t\trecursionStack[x] = false;\r\n\t\t}\r\n\r\n\t\tlet has = false;\r\n\t\tlet paths = [];\r\n\t\tfor (let name in vertexMap) {\r\n\t\t\tpaths = [];\r\n\t\t\tif (checkLoop(name, visited, recursionStack, paths)) {\r\n\t\t\t\thas = true;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn has ? paths : [];\r\n\t};\r\n\r\n\tfunction checkLoop(v, visited, recursionStack, paths) {\r\n\t\tif (!visited[v]) {\r\n\t\t\tvisited[v] = true;\r\n\t\t\trecursionStack[v] = true;\r\n\t\t\tpaths.push(v);\r\n\r\n\t\t\tif (pathEdges[v]) {\r\n\t\t\t\tlet edges = pathEdges[v];\r\n\t\t\t\tfor (let i = 0; i < edges.length; i++) {\r\n\t\t\t\t\tlet edge = edges[i];\r\n\t\t\t\t\tif (!visited[edge.end] && checkLoop(edge.end, visited, recursionStack, paths)) {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t} else if (recursionStack[edge.end]) {\r\n\t\t\t\t\t\tpaths.push(edge.end);\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\trecursionStack[v] = false;\r\n\t\treturn false;\r\n\t}\r\n}\r\n\r\n//使得内部的字符串变成数组\r\nfunction strValue2Arr(obj) {\r\n\tif (!obj || L.isArray(obj)) {\r\n\t\treturn;\r\n\t}\r\n\tfor (let x in obj) {\r\n\t\tif (L.isString(obj[x])) {\r\n\t\t\tobj[x] = [obj[x]];\r\n\t\t}\r\n\t}\r\n}\r\n\r\n/**\r\n * 同步模式下，返回false表示终止循环。\r\n * @param {Object} ary\r\n * @param {Object} func(item,index,array)\r\n * @param {Object} isSync\r\n * @param {Object} fromEnd\r\n */\r\nfunction each(ary, func, isSync, fromEnd) {\r\n\tif (ary) {\r\n\t\tif (isSync) {\r\n\t\t\tfunction fun(index) {\r\n\t\t\t\tif (fromEnd ? index < 0 : index >= ary.length) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tlet handle = function(rs) {\r\n\t\t\t\t\tif (rs) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfun(fromEnd ? index - 1 : index + 1);\r\n\t\t\t\t};\r\n\t\t\t\tfunc(ary[index], index, ary, handle);\r\n\t\t\t}\r\n\t\t\tfun(fromEnd ? ary.length - 1 : 0);\r\n\t\t} else {\r\n\t\t\tif (fromEnd) {\r\n\t\t\t\tfor (let i = ary.length - 1; i >= 0; i--) {\r\n\t\t\t\t\tif (func(ary[i], i, ary) === false) {\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tfor (let i = 0; i < ary.length; i++) {\r\n\t\t\t\t\tif (func(ary[i], i, ary) === false) {\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n}\r\n\r\nfunction __commentReplace(match, singlePrefix) {\r\n\treturn singlePrefix || '';\r\n}\r\n\r\nfunction __appendInnerDeps(deps, callbackString, reg, depIndex, notIndex) {\r\n\tcallbackString.replace(reg, function() {\r\n\t\tlet dep = arguments[depIndex];\r\n\t\tif ((!notIndex || !NOT_REQUIRE_REGEXP.test(arguments[notIndex])) && L.indexInArray(deps, dep) == -1) {\r\n\t\t\tdeps.push(dep);\r\n\t\t}\r\n\t});\r\n}\r\n\r\n//添加内部直接require.get('...')或require('...')的模块\r\n//调用的地方：\r\n//1)script.js:prerequire\r\n//2)script.js:DefineObject.constructor\r\nfunction appendInnerDeps(deps, callback) {\r\n\tif (L.isFunction(callback)) {\r\n\t\tlet theConfig = L.config();\r\n\t\tlet innerDepType = !theConfig ? \"disable\" : theConfig.props.innerDepType;\r\n\t\tif (innerDepType != \"disable\") {\r\n\r\n\t\t\tconst callbackString = callback\r\n\t\t\t\t.toString()\r\n\t\t\t\t.replace(COMMENT_REGEXP, __commentReplace);\r\n\r\n\t\t\tif (innerDepType == \"auto\") {\r\n\t\t\t\tif (callbackString.indexOf(\"__webpack_require__\") >= 0) {\r\n\t\t\t\t\tinnerDepType = \"disable\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (innerDepType == \"auto\") {\r\n\t\t\t\t__appendInnerDeps(deps, callbackString, REPLACE_REQUIRE_REGEXP, 2, 1);\r\n\t\t\t\t__appendInnerDeps(deps, callbackString, REPLACE_REQUIRE_GET_REGEXP, 2, 1);\r\n\t\t\t} else if (innerDepType == \"require\") {\r\n\t\t\t\t__appendInnerDeps(deps, callbackString, REPLACE_REQUIRE_REGEXP, 2, 1);\r\n\t\t\t} else if (innerDepType == \"require.get\") {\r\n\t\t\t\t__appendInnerDeps(deps, callbackString, REPLACE_REQUIRE_GET_REGEXP, 2, 1);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n}\r\n\r\nlet idCount = 2019;\r\n\r\nfunction getAndIncIdCount() {\r\n\treturn idCount++;\r\n}\r\n\r\nclass PluginError {\r\n\tconstructor(err, invoker, extra) {\r\n\t\tthis.err = err;\r\n\t\tthis.invoker = invoker;\r\n\t\tthis.extra = extra;\r\n\t}\r\n}\r\n\r\nfunction unwrapError(err) {\r\n\tif (err) {\r\n\t\tlet n = 0;\r\n\t\twhile (err instanceof PluginError && n++ < 100) {\r\n\t\t\terr = err.err;\r\n\t\t}\r\n\t}\r\n\treturn err;\r\n}\r\n\r\nlet isXsLoaderEnd = false;\r\nconst IE_VERSION = (function getIEVersion() {\r\n\tlet userAgent = navigator.userAgent; //取得浏览器的userAgent字符串  \r\n\tlet isIE = userAgent.indexOf(\"compatible\") > -1 && userAgent.indexOf(\"MSIE\") > -1; //判断是否IE<11浏览器  \r\n\tlet isEdge = userAgent.indexOf(\"Edge\") > -1 && !isIE; //判断是否IE的Edge浏览器  \r\n\tlet isIE11 = userAgent.indexOf('Trident') > -1 && userAgent.indexOf(\"rv:11.0\") > -1;\r\n\tif (isIE) {\r\n\t\tlet reIE = new RegExp(\"MSIE[\\\\s]+([0-9.]+);\").exec(userAgent);\r\n\t\tlet fIEVersion = parseInt(reIE && reIE[1] || -1);\r\n\t\treturn fIEVersion == -1 ? -1 : fIEVersion;\r\n\t} else if (isEdge) {\r\n\t\treturn 'edge'; //edge\r\n\t} else if (isIE11) {\r\n\t\treturn 11; //IE11  \r\n\t} else {\r\n\t\treturn -1; //不是ie浏览器\r\n\t}\r\n})();\r\n\r\nfunction isEmptyObject(obj) {\r\n\tif (obj === null || obj === undefined) {\r\n\t\treturn true;\r\n\t} else if (!L.isObject(obj)) {\r\n\t\tthrow new Error(\"expected object:\" + obj);\r\n\t} else {\r\n\t\tfor (let k in obj) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n}\r\n\r\nexport default {\r\n\tgraphPath: new GraphPath(),\r\n\tstrValue2Arr,\r\n\teach,\r\n\tappendInnerDeps,\r\n\tgetAndIncIdCount,\r\n\tPluginError,\r\n\tunwrapError,\r\n\tloaderEnd() {\r\n\t\tisXsLoaderEnd = true;\r\n\t},\r\n\tisLoaderEnd() {\r\n\t\treturn isXsLoaderEnd;\r\n\t},\r\n\tIE_VERSION,\r\n\tisEmptyObject,\r\n};\r\n","//顶部加载条功能\r\n/*\r\n ** ToProgress v0.1.1\r\n ** http://github.com/djyde/ToProgress\r\n */\r\n\r\n// Animation Detection\r\nfunction whichTransitionEvent() {\r\n\tlet t,\r\n\t\tel = document.createElement(\"fakeelement\");\r\n\r\n\tlet transitions = {\r\n\t\t\"transition\": \"transitionend\",\r\n\t\t\"OTransition\": \"oTransitionEnd\",\r\n\t\t\"MozTransition\": \"transitionend\",\r\n\t\t\"WebkitTransition\": \"webkitTransitionEnd\"\r\n\t};\r\n\r\n\tfor(t in transitions) {\r\n\t\tif(el.style[t] !== undefined) {\r\n\t\t\treturn transitions[t];\r\n\t\t}\r\n\t}\r\n}\r\n\r\nlet transitionEvent = whichTransitionEvent();\r\n\r\nconst ToProgress = function(opt) {\r\n\t// Attributes\r\n\tthis.progress = 0;\r\n\tthis.options = {\r\n\t\tid: 'xsloader-top-progress-bar',\r\n\t\tcolor: '#F44336',\r\n\t\tbgColor:undefined,\r\n\t\theight: 2,\r\n\t\tduration: 0.2\r\n\t};\r\n\tif(opt && typeof opt === 'object') {\r\n\t\tfor(let key in opt) {\r\n\t\t\tthis.options[key] = opt[key];\r\n\t\t}\r\n\t}\r\n\tthis.options.opacityDuration = 0; //this.options.duration * 3;\r\n\tthis.progressBar = document.createElement('div');\r\n\tthis.container = document.createElement('div');\r\n\tthis.container.setCSS = function(style) {\r\n\t\tfor(let property in style) {\r\n\t\t\tthis.style[property] = style[property];\r\n\t\t}\r\n\t};\r\n\tthis.container.id = this.options.id;\r\n\r\n\tthis.progressBar.setCSS = function(style) {\r\n\t\tfor(let property in style) {\r\n\t\t\tthis.style[property] = style[property];\r\n\t\t}\r\n\t};\r\n\r\n\tthis.container.setCSS({\r\n\t\t\"position\": \"fixed\",\r\n\t\t\"padding\": \"0\",\r\n\t\t\"margin\": \"0\",\r\n\t\t\"top\": \"0\",\r\n\t\t\"left\": \"0\",\r\n\t\t\"right\": \"0\",\r\n\t\t\"height\": (this.options.height + 1) + \"px\",\r\n\t\t\"width\": \"100%\",\r\n\t\t\"opacity\": \"1\",\r\n\t\t'z-index': '9999999999',\r\n\t\t'background-color': this.options.bgColor,\r\n\t});\r\n\r\n\tthis.progressBar.setCSS({\r\n\t\t\"position\": \"absolute\",\r\n\t\t\"padding\": \"0\",\r\n\t\t\"margin\": \"0\",\r\n\t\t\"top\": \"0\",\r\n\t\t\"left\": \"0\",\r\n\t\t\"right\": \"0\",\r\n\t\t\"background-color\": this.options.color,\r\n\t\t\"height\": this.options.height + \"px\",\r\n\t\t\"width\": \"0%\",\r\n\t\t\"transition\": \"width \" + this.options.duration + \"s\" + \", opacity \" + this.options.opacityDuration + \"s\",\r\n\t\t\"-moz-transition\": \"width \" + this.options.duration + \"s\" + \", opacity \" + this.options.opacityDuration + \"s\",\r\n\t\t\"-webkit-transition\": \"width \" + this.options.duration + \"s\" + \", opacity \" + this.options.opacityDuration + \"s\"\r\n\t});\r\n\tthis.container.appendChild(this.progressBar);\r\n\tdocument.body.appendChild(this.container);\r\n};\r\n\r\n////////////////////////////////////\r\nToProgress.prototype.setColor = function(color) {\r\n\tthis.progressBar.style.backgroundColor = color;\r\n};\r\n\r\nToProgress.prototype._isAuto = false;\r\nToProgress.prototype._timer = null;\r\n\r\nToProgress.prototype.stopAuto = function() {\r\n\tthis._isAuto = false;\r\n\tif(this._timer) {\r\n\t\tclearInterval(this._timer);\r\n\t\tthis._timer = null;\r\n\t}\r\n};\r\n\r\nToProgress.prototype.autoIncrement = function(time = 100) {\r\n\tthis.stopAuto();\r\n\tthis._isAuto = true;\r\n\tlet dt = time < 100 ? 100 : time;\r\n\r\n\tlet k = 100; //\r\n\tlet step = 0.05;\r\n\tlet x = 1 - step / 2;\r\n\tthis._timer = setInterval(() => {\r\n\t\tx += step;\r\n\t\tthis.setProgress(100 - k / x);\r\n\t}, dt);\r\n};\r\n\r\nToProgress.prototype.toError = function(errColor) {\r\n\tthis.setProgress(this.progress < 60 ? 60 : this.progress);\r\n\tthis.setColor(errColor);\r\n\tthis.stopAuto();\r\n};\r\n\r\n///////////////////////////////////\r\n\r\nToProgress.prototype.transit = function() {\r\n\tthis.progressBar.style.width = this.progress + '%';\r\n};\r\n\r\nToProgress.prototype.getProgress = function() {\r\n\treturn this.progress;\r\n};\r\n\r\nToProgress.prototype.setProgress = function(progress, callback) {\r\n\tthis.show();\r\n\tif(progress > 100) {\r\n\t\tthis.progress = 100;\r\n\t} else if(progress < 0) {\r\n\t\tthis.progress = 0;\r\n\t} else {\r\n\t\tthis.progress = progress;\r\n\t}\r\n\tthis.transit();\r\n\tcallback && callback();\r\n};\r\n\r\nToProgress.prototype.increase = function(toBeIncreasedProgress, callback) {\r\n\tthis.show();\r\n\tthis.setProgress(this.progress + toBeIncreasedProgress, callback);\r\n};\r\n\r\nToProgress.prototype.decrease = function(toBeDecreasedProgress, callback) {\r\n\tthis.show();\r\n\tthis.setProgress(this.progress - toBeDecreasedProgress, callback);\r\n};\r\n\r\nToProgress.prototype.finish = function(callback) {\r\n\tthis.setProgress(100, callback);\r\n\tsetTimeout(() => {\r\n\t\tthis.hide();\r\n//\t\tlet fun;\r\n//\t\tfun = (e) => {\r\n//\t\t\tthis.reset();\r\n//\t\t\tthis.progressBar.removeEventListener(e.type, fun);\r\n//\t\t\tthis.container.parentNode.removeChild(this.container);\r\n//\t\t};\r\n//\t\ttransitionEvent && this.progressBar.addEventListener(transitionEvent, fun);\r\n//\t\tif(!transitionEvent) {\r\n//\t\t\tthis.container.parentNode.removeChild(this.container);\r\n//\t\t}\r\n\t\tthis.container.parentNode.removeChild(this.container);\r\n\t}, 500);\r\n};\r\n\r\nToProgress.prototype.reset = function(callback) {\r\n\tthis.progress = 0;\r\n\tthis.transit();\r\n\tcallback && callback();\r\n};\r\n\r\nToProgress.prototype.hide = function() {\r\n\tthis.progressBar.style.opacity = '0';\r\n\tthis.container.style.display = 'none';\r\n};\r\n\r\nToProgress.prototype.show = function() {\r\n\tthis.progressBar.style.opacity = '1';\r\n\tthis.container.style.display = 'block';\r\n};\r\n\r\nexport default {\r\n\tToProgress\r\n};","function Base64() {\r\n\r\n\t// private property\r\n\tlet _keyStr = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\r\n\r\n\t// public method for encoding\r\n\tthis.encode = function(input) {\r\n\t\tlet output = \"\";\r\n\t\tlet chr1, chr2, chr3, enc1, enc2, enc3, enc4;\r\n\t\tlet i = 0;\r\n\t\tinput = _utf8_encode(input);\r\n\t\twhile(i < input.length) {\r\n\t\t\tchr1 = input.charCodeAt(i++);\r\n\t\t\tchr2 = input.charCodeAt(i++);\r\n\t\t\tchr3 = input.charCodeAt(i++);\r\n\t\t\tenc1 = chr1 >> 2;\r\n\t\t\tenc2 = ((chr1 & 3) << 4) | (chr2 >> 4);\r\n\t\t\tenc3 = ((chr2 & 15) << 2) | (chr3 >> 6);\r\n\t\t\tenc4 = chr3 & 63;\r\n\t\t\tif(isNaN(chr2)) {\r\n\t\t\t\tenc3 = enc4 = 64;\r\n\t\t\t} else if(isNaN(chr3)) {\r\n\t\t\t\tenc4 = 64;\r\n\t\t\t}\r\n\t\t\toutput = output +\r\n\t\t\t\t_keyStr.charAt(enc1) + _keyStr.charAt(enc2) +\r\n\t\t\t\t_keyStr.charAt(enc3) + _keyStr.charAt(enc4);\r\n\t\t}\r\n\t\treturn output;\r\n\t};\r\n\r\n\t// public method for decoding\r\n\tthis.decode = function(input) {\r\n\t\tlet output = \"\";\r\n\t\tlet chr1, chr2, chr3;\r\n\t\tlet enc1, enc2, enc3, enc4;\r\n\t\tlet i = 0;\r\n\t\tinput = input.replace(/[^A-Za-z0-9\\+\\/\\=]/g, \"\");\r\n\t\twhile(i < input.length) {\r\n\t\t\tenc1 = _keyStr.indexOf(input.charAt(i++));\r\n\t\t\tenc2 = _keyStr.indexOf(input.charAt(i++));\r\n\t\t\tenc3 = _keyStr.indexOf(input.charAt(i++));\r\n\t\t\tenc4 = _keyStr.indexOf(input.charAt(i++));\r\n\t\t\tchr1 = (enc1 << 2) | (enc2 >> 4);\r\n\t\t\tchr2 = ((enc2 & 15) << 4) | (enc3 >> 2);\r\n\t\t\tchr3 = ((enc3 & 3) << 6) | enc4;\r\n\t\t\toutput = output + String.fromCharCode(chr1);\r\n\t\t\tif(enc3 != 64) {\r\n\t\t\t\toutput = output + String.fromCharCode(chr2);\r\n\t\t\t}\r\n\t\t\tif(enc4 != 64) {\r\n\t\t\t\toutput = output + String.fromCharCode(chr3);\r\n\t\t\t}\r\n\t\t}\r\n\t\toutput = _utf8_decode(output);\r\n\t\treturn output;\r\n\t};\r\n\r\n\t// private method for UTF-8 encoding\r\n\tlet _utf8_encode = function(string) {\r\n\t\tstring = string.replace(/\\r\\n/g, \"\\n\");\r\n\t\tlet utftext = \"\";\r\n\t\tfor(let n = 0; n < string.length; n++) {\r\n\t\t\tlet c = string.charCodeAt(n);\r\n\t\t\tif(c < 128) {\r\n\t\t\t\tutftext += String.fromCharCode(c);\r\n\t\t\t} else if((c > 127) && (c < 2048)) {\r\n\t\t\t\tutftext += String.fromCharCode((c >> 6) | 192);\r\n\t\t\t\tutftext += String.fromCharCode((c & 63) | 128);\r\n\t\t\t} else {\r\n\t\t\t\tutftext += String.fromCharCode((c >> 12) | 224);\r\n\t\t\t\tutftext += String.fromCharCode(((c >> 6) & 63) | 128);\r\n\t\t\t\tutftext += String.fromCharCode((c & 63) | 128);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\treturn utftext;\r\n\t};\r\n\r\n\t// private method for UTF-8 decoding\r\n\tlet _utf8_decode = function(utftext) {\r\n\t\tlet string = \"\";\r\n\t\tlet i = 0;\r\n\t\tlet c=0, c2=0, c3=0;\r\n\t\t\r\n\t\twhile(i < utftext.length) {\r\n\t\t\tc = utftext.charCodeAt(i);\r\n\t\t\tif(c < 128) {\r\n\t\t\t\tstring += String.fromCharCode(c);\r\n\t\t\t\ti++;\r\n\t\t\t} else if((c > 191) && (c < 224)) {\r\n\t\t\t\tc2 = utftext.charCodeAt(i + 1);\r\n\t\t\t\tstring += String.fromCharCode(((c & 31) << 6) | (c2 & 63));\r\n\t\t\t\ti += 2;\r\n\t\t\t} else {\r\n\t\t\t\tc2 = utftext.charCodeAt(i + 1);\r\n\t\t\t\tc3 = utftext.charCodeAt(i + 2);\r\n\t\t\t\tstring += String.fromCharCode(((c & 15) << 12) | ((c2 & 63) << 6) | (c3 & 63));\r\n\t\t\t\ti += 3;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn string;\r\n\t};\r\n}\r\n\r\nexport default Base64;","import urls from './urls.js';\r\nimport global from './global.js';\r\nimport base from './base.js';\r\nimport loading from './loading.js';\r\nimport base64 from './base64.js';\r\n\r\nexport default {\r\n\t...urls,\r\n\tglobal,\r\n\t...base,\r\n\t...loading,\r\n\tbase64,\r\n};","import U from \"../util/index.js\";\r\n\r\nconst G = U.global;\r\nconst L = G.xsloader;\r\n\r\n//ie9\r\ntry {\r\n\tif(Function.prototype.bind && console && (typeof console['log'] == \"object\")) {\r\n\t\tU.each([\"log\", \"info\", \"warn\", \"error\", \"assert\", \"dir\", \"clear\", \"profile\", \"profileEnd\"], (method) => {\r\n\t\t\tlet thiz = Function.prototype.bind;\r\n\t\t\tconsole[method] = thiz.call(console[method], console);\r\n\t\t});\r\n\t}\r\n} catch(e) {\r\n\tG.console = {\r\n\t\tlog: function() {},\r\n\t\terror: function() {},\r\n\t\twarn: function() {}\r\n\t};\r\n}\r\n\r\ntry {\r\n\r\n\tif(!Array.prototype.indexOf) {\r\n\t\tArray.prototype.indexOf = function(elem, offset) {\r\n\t\t\tfor(let i = offset === undefined ? 0 : offset; i < this.length; i++) {\r\n\t\t\t\tif(this[i] == elem) {\r\n\t\t\t\t\treturn i;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn -1;\r\n\t\t};\r\n\t}\r\n\r\n\tif(!Array.pushAll) {\r\n\t\tArray.pushAll = function(thiz, arr) {\r\n\t\t\tif(!L.isArray(arr)) {\r\n\t\t\t\tthrow new Error(\"not array:\" + arr);\r\n\t\t\t}\r\n\t\t\tfor(let i = 0; i < arr.length; i++) {\r\n\t\t\t\tthiz.push(arr[i]);\r\n\t\t\t}\r\n\t\t\treturn thiz;\r\n\t\t};\r\n\t}\r\n} catch(e) {\r\n\tconsole.error(e);\r\n}\r\n\r\nfunction startsWith(str, starts) {\r\n\tif(!(typeof str == \"string\")) {\r\n\t\treturn false;\r\n\t}\r\n\treturn str.indexOf(starts) == 0;\r\n}\r\n\r\nfunction endsWith(str, ends) {\r\n\tif(!(typeof str == \"string\")) {\r\n\t\treturn false;\r\n\t}\r\n\tlet index = str.lastIndexOf(ends);\r\n\tif(index >= 0 && (str.length - ends.length == index)) {\r\n\t\treturn true;\r\n\t} else {\r\n\t\treturn false;\r\n\t}\r\n}\r\n\r\nfunction _indexInArray(array, ele, offset = 0, compare) {\r\n\tlet index = -1;\r\n\tif(array) {\r\n\t\tfor(let i = offset || 0; i < array.length; i++) {\r\n\t\t\tif(compare) {\r\n\t\t\t\tif(compare(array[i], ele, i, array)) {\r\n\t\t\t\t\tindex = i;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif(array[i] == ele) {\r\n\t\t\t\t\tindex = i;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t}\r\n\treturn index;\r\n}\r\n\r\nfunction indexInArray(array, ele, compare) {\r\n\treturn _indexInArray(array, ele, 0, compare);\r\n}\r\n\r\nfunction indexInArrayFrom(array, ele, offset, compare) {\r\n\treturn _indexInArray(array, ele, offset, compare);\r\n}\r\n\r\nexport default {\r\n\tstartsWith,\r\n\tendsWith,\r\n\tindexInArray,\r\n\tindexInArrayFrom\r\n};","//https://github.com/douglascrockford/JSON-js\r\n//  json2.js\r\n//  2017-06-12\r\n//  Public Domain.\r\n//  NO WARRANTY EXPRESSED OR IMPLIED. USE AT YOUR OWN RISK.\r\n\r\n//  USE YOUR OWN COPY. IT IS EXTREMELY UNWISE TO LOAD CODE FROM SERVERS YOU DO\r\n//  NOT CONTROL.\r\nconst JSON = {};\r\n\r\nexport default JSON;\r\n\r\nlet rx_one = /^[\\],:{}\\s]*$/;\r\nlet rx_two = /\\\\(?:[\"\\\\\\/bfnrt]|u[0-9a-fA-F]{4})/g;\r\nlet rx_three = /\"[^\"\\\\\\n\\r]*\"|true|false|null|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?/g;\r\nlet rx_four = /(?:^|:|,)(?:\\s*\\[)+/g;\r\nlet rx_escapable = /[\\\\\"\\u0000-\\u001f\\u007f-\\u009f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g;\r\nlet rx_dangerous = /[\\u0000\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g;\r\n\r\nfunction f(n) {\r\n\t// Format integers to have at least two digits.\r\n\treturn(n < 10) ?\r\n\t\t\"0\" + n :\r\n\t\tn;\r\n}\r\n\r\nfunction this_value() {\r\n\treturn this.valueOf();\r\n}\r\n\r\nif(typeof Date.prototype.toJSON !== \"function\") {\r\n\r\n\tDate.prototype.toJSON = function() {\r\n\t\treturn isFinite(this.valueOf()) ?\r\n\t\t\t(\r\n\t\t\t\tthis.getUTCFullYear() +\r\n\t\t\t\t\"-\" +\r\n\t\t\t\tf(this.getUTCMonth() + 1) +\r\n\t\t\t\t\"-\" +\r\n\t\t\t\tf(this.getUTCDate()) +\r\n\t\t\t\t\"T\" +\r\n\t\t\t\tf(this.getUTCHours()) +\r\n\t\t\t\t\":\" +\r\n\t\t\t\tf(this.getUTCMinutes()) +\r\n\t\t\t\t\":\" +\r\n\t\t\t\tf(this.getUTCSeconds()) +\r\n\t\t\t\t\"Z\"\r\n\t\t\t) :\r\n\t\t\tnull;\r\n\t};\r\n\r\n\tBoolean.prototype.toJSON = this_value;\r\n\tNumber.prototype.toJSON = this_value;\r\n\tString.prototype.toJSON = this_value;\r\n}\r\n\r\nlet gap;\r\nlet indent;\r\nlet meta;\r\nlet rep;\r\n\r\nfunction quote(string) {\r\n\r\n\t// If the string contains no control characters, no quote characters, and no\r\n\t// backslash characters, then we can safely slap some quotes around it.\r\n\t// Otherwise we must also replace the offending characters with safe escape\r\n\t// sequences.\r\n\r\n\trx_escapable.lastIndex = 0;\r\n\treturn rx_escapable.test(string) ?\r\n\t\t\"\\\"\" + string.replace(rx_escapable, function(a) {\r\n\t\t\tlet c = meta[a];\r\n\t\t\treturn typeof c === \"string\" ?\r\n\t\t\t\tc :\r\n\t\t\t\t\"\\\\u\" + (\"0000\" + a.charCodeAt(0).toString(16)).slice(-4);\r\n\t\t}) + \"\\\"\" :\r\n\t\t\"\\\"\" + string + \"\\\"\";\r\n}\r\n\r\nfunction str(key, holder) {\r\n\t// Produce a string from holder[key].\r\n\tlet i; // The loop counter.\r\n\tlet k; // The member key.\r\n\tlet v; // The member value.\r\n\tlet length;\r\n\tlet mind = gap;\r\n\tlet partial;\r\n\tlet value = holder[key];\r\n\r\n\t// If the value has a toJSON method, call it to obtain a replacement value.\r\n\tif(\r\n\t\tvalue &&\r\n\t\ttypeof value === \"object\" &&\r\n\t\ttypeof value.toJSON === \"function\"\r\n\t) {\r\n\t\tvalue = value.toJSON(key);\r\n\t}\r\n\r\n\t// If we were called with a replacer function, then call the replacer to\r\n\t// obtain a replacement value.\r\n\r\n\tif(typeof rep === \"function\") {\r\n\t\tvalue = rep.call(holder, key, value);\r\n\t}\r\n\r\n\t// What happens next depends on the value's type.\r\n\r\n\tswitch(typeof value) {\r\n\t\tcase \"string\":\r\n\t\t\treturn quote(value);\r\n\t\tcase \"number\":\r\n\t\t\t// JSON numbers must be finite. Encode non-finite numbers as null.\r\n\t\t\treturn(isFinite(value)) ?\r\n\t\t\t\tString(value) :\r\n\t\t\t\t\"null\";\r\n\r\n\t\tcase \"boolean\":\r\n\t\tcase \"null\":\r\n\t\t\t// If the value is a boolean or null, convert it to a string. Note:\r\n\t\t\t// typeof null does not produce \"null\". The case is included here in\r\n\t\t\t// the remote chance that this gets fixed someday.\r\n\t\t\treturn String(value);\r\n\r\n\t\t\t// If the type is \"object\", we might be dealing with an object or an array or\r\n\t\t\t// null.\r\n\t\tcase \"object\":\r\n\t\t\t// Due to a specification blunder in ECMAScript, typeof null is \"object\",\r\n\t\t\t// so watch out for that case.\r\n\t\t\tif(!value) {\r\n\t\t\t\treturn \"null\";\r\n\t\t\t}\r\n\r\n\t\t\t// Make an array to hold the partial results of stringifying this object value.\r\n\r\n\t\t\tgap += indent;\r\n\t\t\tpartial = [];\r\n\t\t\t// Is the value an array?\r\n\t\t\tif(Object.prototype.toString.apply(value) === \"[object Array]\") {\r\n\r\n\t\t\t\t// The value is an array. Stringify every element. Use null as a placeholder\r\n\t\t\t\t// for non-JSON values.\r\n\t\t\t\tlength = value.length;\r\n\t\t\t\tfor(i = 0; i < length; i += 1) {\r\n\t\t\t\t\tpartial[i] = str(i, value) || \"null\";\r\n\t\t\t\t}\r\n\t\t\t\t// Join all of the elements together, separated with commas, and wrap them in\r\n\t\t\t\t// brackets.\r\n\r\n\t\t\t\tv = partial.length === 0 ?\r\n\t\t\t\t\t\"[]\" :\r\n\t\t\t\t\tgap ?\r\n\t\t\t\t\t(\r\n\t\t\t\t\t\t\"[\\n\" +\r\n\t\t\t\t\t\tgap +\r\n\t\t\t\t\t\tpartial.join(\",\\n\" + gap) +\r\n\t\t\t\t\t\t\"\\n\" +\r\n\t\t\t\t\t\tmind +\r\n\t\t\t\t\t\t\"]\"\r\n\t\t\t\t\t) :\r\n\t\t\t\t\t\"[\" + partial.join(\",\") + \"]\";\r\n\t\t\t\tgap = mind;\r\n\t\t\t\treturn v;\r\n\t\t\t}\r\n\r\n\t\t\t// If the replacer is an array, use it to select the members to be stringified.\r\n\t\t\tif(rep && typeof rep === \"object\") {\r\n\t\t\t\tlength = rep.length;\r\n\t\t\t\tfor(i = 0; i < length; i += 1) {\r\n\t\t\t\t\tif(typeof rep[i] === \"string\") {\r\n\t\t\t\t\t\tk = rep[i];\r\n\t\t\t\t\t\tv = str(k, value);\r\n\t\t\t\t\t\tif(v) {\r\n\t\t\t\t\t\t\tpartial.push(quote(k) + (\r\n\t\t\t\t\t\t\t\t(gap) ?\r\n\t\t\t\t\t\t\t\t\": \" : \":\"\r\n\t\t\t\t\t\t\t) + v);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\t// Otherwise, iterate through all of the keys in the object.\r\n\t\t\t\tfor(k in value) {\r\n\t\t\t\t\tif(Object.prototype.hasOwnProperty.call(value, k)) {\r\n\t\t\t\t\t\tv = str(k, value);\r\n\t\t\t\t\t\tif(v) {\r\n\t\t\t\t\t\t\tpartial.push(quote(k) + (\r\n\t\t\t\t\t\t\t\t(gap) ?\r\n\t\t\t\t\t\t\t\t\": \" :\r\n\t\t\t\t\t\t\t\t\":\"\r\n\t\t\t\t\t\t\t) + v);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Join all of the member texts together, separated with commas,\r\n\t\t\t// and wrap them in braces.\r\n\r\n\t\t\tv = partial.length === 0 ?\r\n\t\t\t\t\"{}\" : gap ?\r\n\t\t\t\t\"{\\n\" + gap + partial.join(\",\\n\" + gap) + \"\\n\" + mind + \"}\" :\r\n\t\t\t\t\"{\" + partial.join(\",\") + \"}\";\r\n\t\t\tgap = mind;\r\n\t\t\treturn v;\r\n\t}\r\n}\r\n\r\n// If the JSON object does not yet have a stringify method, give it one.\r\nif(typeof JSON.stringify !== \"function\") {\r\n\tmeta = { // table of character substitutions\r\n\t\t\"\\b\": \"\\\\b\",\r\n\t\t\"\\t\": \"\\\\t\",\r\n\t\t\"\\n\": \"\\\\n\",\r\n\t\t\"\\f\": \"\\\\f\",\r\n\t\t\"\\r\": \"\\\\r\",\r\n\t\t\"\\\"\": \"\\\\\\\"\",\r\n\t\t\"\\\\\": \"\\\\\\\\\"\r\n\t};\r\n\tJSON.stringify = function(value, replacer, space) {\r\n\r\n\t\t// The stringify method takes a value and an optional replacer, and an optional\r\n\t\t// space parameter, and returns a JSON text. The replacer can be a function\r\n\t\t// that can replace values, or an array of strings that will select the keys.\r\n\t\t// A default replacer method can be provided. Use of the space parameter can\r\n\t\t// produce text that is more easily readable.\r\n\r\n\t\tlet i;\r\n\t\tgap = \"\";\r\n\t\tindent = \"\";\r\n\t\t// If the space parameter is a number, make an indent string containing that\r\n\t\t// many spaces.\r\n\t\tif(typeof space === \"number\") {\r\n\t\t\tfor(i = 0; i < space; i += 1) {\r\n\t\t\t\tindent += \" \";\r\n\t\t\t}\r\n\r\n\t\t\t// If the space parameter is a string, it will be used as the indent string.\r\n\r\n\t\t} else if(typeof space === \"string\") {\r\n\t\t\tindent = space;\r\n\t\t}\r\n\r\n\t\t// If there is a replacer, it must be a function or an array.\r\n\t\t// Otherwise, throw an error.\r\n\r\n\t\trep = replacer;\r\n\t\tif(replacer && typeof replacer !== \"function\" && (\r\n\t\t\t\ttypeof replacer !== \"object\" ||\r\n\t\t\t\ttypeof replacer.length !== \"number\"\r\n\t\t\t)) {\r\n\t\t\tthrow new Error(\"JSON.stringify\");\r\n\t\t}\r\n\r\n\t\t// Make a fake root object containing our value under the key of \"\".\r\n\t\t// Return the result of stringifying the value.\r\n\r\n\t\treturn str(\"\", {\r\n\t\t\t\"\": value\r\n\t\t});\r\n\t};\r\n}\r\n\r\n// If the JSON object does not yet have a parse method, give it one.\r\n\r\nif(typeof JSON.parse !== \"function\") {\r\n\tJSON.parse = function(text, reviver) {\r\n\t\t// The parse method takes a text and an optional reviver function, and returns\r\n\t\t// a JavaScript value if the text is a valid JSON text.\r\n\t\tlet j;\r\n\r\n\t\tfunction walk(holder, key) {\r\n\t\t\t// The walk method is used to recursively walk the resulting structure so\r\n\t\t\t// that modifications can be made.\r\n\t\t\tlet k;\r\n\t\t\tlet v;\r\n\t\t\tlet value = holder[key];\r\n\t\t\tif(value && typeof value === \"object\") {\r\n\t\t\t\tfor(k in value) {\r\n\t\t\t\t\tif(Object.prototype.hasOwnProperty.call(value, k)) {\r\n\t\t\t\t\t\tv = walk(value, k);\r\n\t\t\t\t\t\tif(v !== undefined) {\r\n\t\t\t\t\t\t\tvalue[k] = v;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tdelete value[k];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn reviver.call(holder, key, value);\r\n\t\t}\r\n\r\n\t\t// Parsing happens in four stages. In the first stage, we replace certain\r\n\t\t// Unicode characters with escape sequences. JavaScript handles many characters\r\n\t\t// incorrectly, either silently deleting them, or treating them as line endings.\r\n\t\ttext = String(text);\r\n\t\trx_dangerous.lastIndex = 0;\r\n\t\tif(rx_dangerous.test(text)) {\r\n\t\t\ttext = text.replace(rx_dangerous, function(a) {\r\n\t\t\t\treturn(\r\n\t\t\t\t\t\"\\\\u\" +\r\n\t\t\t\t\t(\"0000\" + a.charCodeAt(0).toString(16)).slice(-4)\r\n\t\t\t\t);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t// In the second stage, we run the text against regular expressions that look\r\n\t\t// for non-JSON patterns. We are especially concerned with \"()\" and \"new\"\r\n\t\t// because they can cause invocation, and \"=\" because it can cause mutation.\r\n\t\t// But just to be safe, we want to reject all unexpected forms.\r\n\r\n\t\t// We split the second stage into 4 regexp operations in order to work around\r\n\t\t// crippling inefficiencies in IE's and Safari's regexp engines. First we\r\n\t\t// replace the JSON backslash pairs with \"@\" (a non-JSON character). Second, we\r\n\t\t// replace all simple value tokens with \"]\" characters. Third, we delete all\r\n\t\t// open brackets that follow a colon or comma or that begin the text. Finally,\r\n\t\t// we look to see that the remaining characters are only whitespace or \"]\" or\r\n\t\t// \",\" or \":\" or \"{\" or \"}\". If that is so, then the text is safe for eval.\r\n\r\n\t\tif(\r\n\t\t\trx_one.test(\r\n\t\t\t\ttext\r\n\t\t\t\t.replace(rx_two, \"@\")\r\n\t\t\t\t.replace(rx_three, \"]\")\r\n\t\t\t\t.replace(rx_four, \"\")\r\n\t\t\t)\r\n\t\t) {\r\n\r\n\t\t\t// In the third stage we use the eval function to compile the text into a\r\n\t\t\t// JavaScript structure. The \"{\" operator is subject to a syntactic ambiguity\r\n\t\t\t// in JavaScript: it can begin a block or an object literal. We wrap the text\r\n\t\t\t// in parens to eliminate the ambiguity.\r\n\t\t\tj = eval(\"(\" + text + \")\");\r\n\t\t\t// In the optional fourth stage, we recursively walk the new structure, passing\r\n\t\t\t// each name/value pair to a reviver function for possible transformation.\r\n\r\n\t\t\treturn(typeof reviver === \"function\") ?\r\n\t\t\t\twalk({\r\n\t\t\t\t\t\"\": j\r\n\t\t\t\t}, \"\") : j;\r\n\t\t}\r\n\t\t// If the text is not JSON parseable, then a SyntaxError is thrown.\r\n\t\tthrow new SyntaxError(\"JSON.parse\");\r\n\t};\r\n}","/*\r\n * Copyright 2016 Google Inc. All rights reserved.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\r\n * use this file except in compliance with the License. You may obtain a copy of\r\n * the License at\r\n *\r\n *     http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\r\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\r\n * License for the specific language governing permissions and limitations under\r\n * the License.\r\n */\r\n//https://github.com/GoogleChrome/proxy-polyfill\r\nexport default function proxyPolyfill() {\r\n\tlet lastRevokeFn = null;\r\n\tlet ProxyPolyfill;\r\n\r\n\t/**\r\n\t * @param {*} o\r\n\t * @return {boolean} whether this is probably a (non-null) Object\r\n\t */\r\n\tfunction isObject(o) {\r\n\t\treturn o ? (typeof o === 'object' || typeof o === 'function') : false;\r\n\t}\r\n\r\n\t/**\r\n\t * @constructor\r\n\t * @param {!Object} target\r\n\t * @param {{apply, construct, get, set}} handler\r\n\t */\r\n\tProxyPolyfill = function(target, handler) {\r\n\t\tif(!isObject(target) || !isObject(handler)) {\r\n\t\t\tthrow new TypeError('Cannot create proxy with a non-object as target or handler');\r\n\t\t}\r\n\r\n\t\t// Construct revoke function, and set lastRevokeFn so that Proxy.revocable can steal it.\r\n\t\t// The caller might get the wrong revoke function if a user replaces or wraps scope.Proxy\r\n\t\t// to call itself, but that seems unlikely especially when using the polyfill.\r\n\t\tlet throwRevoked = function() {};\r\n\t\tlastRevokeFn = function() {\r\n\t\t\tthrowRevoked = function(trap) {\r\n\t\t\t\tthrow new TypeError(`Cannot perform '${trap}' on a proxy that has been revoked`);\r\n\t\t\t};\r\n\t\t};\r\n\r\n\t\t// Fail on unsupported traps: Chrome doesn't do this, but ensure that users of the polyfill\r\n\t\t// are a bit more careful. Copy the internal parts of handler to prevent user changes.\r\n\t\tconst unsafeHandler = handler;\r\n\t\thandler = {\r\n\t\t\t'get': null,\r\n\t\t\t'set': null,\r\n\t\t\t'apply': null,\r\n\t\t\t'construct': null\r\n\t\t};\r\n\t\tfor(let k in unsafeHandler) {\r\n\t\t\tif(!(k in handler)) {\r\n\t\t\t\tthrow new TypeError(`Proxy polyfill does not support trap '${k}'`);\r\n\t\t\t}\r\n\t\t\thandler[k] = unsafeHandler[k];\r\n\t\t}\r\n\t\tif(typeof unsafeHandler === 'function') {\r\n\t\t\t// Allow handler to be a function (which has an 'apply' method). This matches what is\r\n\t\t\t// probably a bug in native versions. It treats the apply call as a trap to be configured.\r\n\t\t\thandler.apply = unsafeHandler.apply.bind(unsafeHandler);\r\n\t\t}\r\n\r\n\t\t// Define proxy as this, or a Function (if either it's callable, or apply is set).\r\n\t\t// TODO(samthor): Closure compiler doesn't know about 'construct', attempts to rename it.\r\n\t\tlet proxy = this;\r\n\t\tlet isMethod = false;\r\n\t\tlet isArray = false;\r\n\t\tif(typeof target === 'function') {\r\n\t\t\tproxy = function ProxyPolyfill() {\r\n\t\t\t\tconst usingNew = (this && this.constructor === proxy);\r\n\t\t\t\tconst args = Array.prototype.slice.call(arguments);\r\n\t\t\t\tthrowRevoked(usingNew ? 'construct' : 'apply');\r\n\r\n\t\t\t\tif(usingNew && handler['construct']) {\r\n\t\t\t\t\treturn handler['construct'].call(this, target, args);\r\n\t\t\t\t} else if(!usingNew && handler.apply) {\r\n\t\t\t\t\treturn handler.apply(target, this, args);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// since the target was a function, fallback to calling it directly.\r\n\t\t\t\tif(usingNew) {\r\n\t\t\t\t\t// inspired by answers to https://stackoverflow.com/q/1606797\r\n\t\t\t\t\targs.unshift(target); // pass class as first arg to constructor, although irrelevant\r\n\t\t\t\t\t// nb. cast to convince Closure compiler that this is a constructor\r\n\t\t\t\t\tconst f = /** @type {!Function} */ (target.bind.apply(target, args));\r\n\t\t\t\t\treturn new f();\r\n\t\t\t\t}\r\n\t\t\t\treturn target.apply(this, args);\r\n\t\t\t};\r\n\t\t\tisMethod = true;\r\n\t\t} else if(target instanceof Array) {\r\n\t\t\tproxy = [];\r\n\t\t\tisArray = true;\r\n\t\t}\r\n\r\n\t\t// Create default getters/setters. Create different code paths as handler.get/handler.set can't\r\n\t\t// change after creation.\r\n\t\tconst getter = handler.get ? function(prop) {\r\n\t\t\tthrowRevoked('get');\r\n\t\t\treturn handler.get(this, prop, proxy);\r\n\t\t} : function(prop) {\r\n\t\t\tthrowRevoked('get');\r\n\t\t\treturn this[prop];\r\n\t\t};\r\n\t\tconst setter = handler.set ? function(prop, value) {\r\n\t\t\tthrowRevoked('set');\r\n\t\t\tconst status = handler.set(this, prop, value, proxy);\r\n\t\t\t// TODO(samthor): If the calling code is in strict mode, throw TypeError.\r\n\t\t\t// if (!status) {\r\n\t\t\t// It's (sometimes) possible to work this out, if this code isn't strict- try to load the\r\n\t\t\t// callee, and if it's available, that code is non-strict. However, this isn't exhaustive.\r\n\t\t\t// }\r\n\t\t} : function(prop, value) {\r\n\t\t\tthrowRevoked('set');\r\n\t\t\tthis[prop] = value;\r\n\t\t};\r\n\r\n\t\t// Clone direct properties (i.e., not part of a prototype).\r\n\t\tlet propertyNames = Object.getOwnPropertyNames(target);\r\n\r\n\t\t/////////用于代理Promise:then方法等\r\n\t\tif(target instanceof Promise && target.__proto__) {\r\n\t\t\tlet props = Object.getOwnPropertyNames(target.__proto__);\r\n\t\t\tlet obj = {};\r\n\t\t\tpropertyNames.forEach((prop) => {\r\n\t\t\t\tobj[prop] = true;\r\n\t\t\t});\r\n\t\t\tprops.forEach((prop) => {\r\n\t\t\t\tobj[prop] = true;\r\n\t\t\t});\r\n\t\t\tpropertyNames = [];\r\n\t\t\tfor(let prop in obj) {\r\n\t\t\t\tpropertyNames.push(prop);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconst propertyMap = {};\r\n\t\tpropertyNames.forEach(function(prop) {\r\n\t\t\tif((isMethod || isArray) && prop in proxy) {\r\n\t\t\t\treturn; // ignore properties already here, e.g. 'bind', 'prototype' etc\r\n\t\t\t}\r\n\t\t\tconst real = Object.getOwnPropertyDescriptor(target, prop);\r\n\t\t\tconst desc = {\r\n\t\t\t\tenumerable: !!(real && real.enumerable),\r\n\t\t\t\tget: getter.bind(target, prop),\r\n\t\t\t\tset: setter.bind(target, prop),\r\n\t\t\t};\r\n\t\t\tObject.defineProperty(proxy, prop, desc);\r\n\t\t\tpropertyMap[prop] = true;\r\n\t\t});\r\n\r\n\t\t// Set the prototype, or clone all prototype methods (always required if a getter is provided).\r\n\t\t// TODO(samthor): We don't allow prototype methods to be set. It's (even more) awkward.\r\n\t\t// An alternative here would be to _just_ clone methods to keep behavior consistent.\r\n\t\tlet prototypeOk = true;\r\n\t\tif(Object.setPrototypeOf) {\r\n\t\t\tObject.setPrototypeOf(proxy, Object.getPrototypeOf(target));\r\n\t\t} else if(proxy.__proto__) {\r\n\t\t\tproxy.__proto__ = target.__proto__;\r\n\t\t} else {\r\n\t\t\tprototypeOk = false;\r\n\t\t}\r\n\t\tif(handler.get || !prototypeOk) {\r\n\t\t\tfor(let k in target) {\r\n\t\t\t\tif(propertyMap[k]) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tObject.defineProperty(proxy, k, {\r\n\t\t\t\t\tget: getter.bind(target, k)\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// The Proxy polyfill cannot handle adding new properties. Seal the target and proxy.\r\n\t\tObject.seal(target);\r\n\t\tObject.seal(proxy);\r\n\r\n\t\treturn proxy; // nb. if isMethod is true, proxy != this\r\n\t};\r\n\r\n\tProxyPolyfill.revocable = function(target, handler) {\r\n\t\tconst p = new ProxyPolyfill(target, handler);\r\n\t\treturn {\r\n\t\t\t'proxy': p,\r\n\t\t\t'revoke': lastRevokeFn\r\n\t\t};\r\n\t};\r\n\r\n\treturn ProxyPolyfill;\r\n}","import JSON from './json.js';\r\nimport \"./ie.js\";\r\nimport ProxyUtil from './proxy.js';\r\n\r\nfunction polyfillInit(G, L) {\r\n\tlet proxy = ProxyUtil();\r\n\tif(!G['Proxy']) {\r\n\t\tG.Proxy = proxy;\r\n\t}\r\n\tL.Proxy = proxy;\r\n}\r\n\r\nexport {\r\n\tJSON,\r\n\tpolyfillInit\r\n};","import {\r\n\tJSON as xsJSON,\r\n\tpolyfillInit\r\n} from \"../polyfill/index.js\";\r\nimport U from \"../util/index.js\";\r\n\r\nconst G = U.global;\r\nconst L = G.xsloader;\r\nconst IE_VERSION = U.IE_VERSION;\r\n\r\npolyfillInit(G, L);\r\n\r\nif (!String.prototype.trim) {\r\n\tString.prototype.trim = function() {\r\n\t\treturn this.replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, '');\r\n\t};\r\n}\r\n\r\n//生成一个随机的id，只保证在本页面是唯一的\r\nfunction randId(suffix) {\r\n\tlet id = \"r\" + parseInt(new Date().getTime() / 50).toString(16) + parseInt(Math.random() * 1000).toString(16) +\r\n\t\tU.getAndIncIdCount().toString(16);\r\n\tif (suffix !== undefined) {\r\n\t\tid += suffix;\r\n\t}\r\n\treturn id;\r\n}\r\n\r\nfunction xsEval(scriptString) {\r\n\tlet rs = IE_VERSION > 0 && IE_VERSION < 9 ? eval(\"[\" + scriptString + \"][0]\") : eval(\"(\" + scriptString + \")\");\r\n\treturn rs;\r\n}\r\n\r\n/**\r\n * 注意key需要用引号包裹\r\n * @param {Object} str\r\n * @param {Object} option\r\n */\r\nfunction xsParseJson(str, option) {\r\n\ttry {\r\n\t\tif (str === \"\" || str === null || str === undefined || !L.isString(str)) {\r\n\t\t\treturn str;\r\n\t\t}\r\n\r\n\t\toption = L.extend({\r\n\t\t\tfnStart: \"\", //\"/*{f}*/\",\r\n\t\t\tfnEnd: \"\", //\"/*{f}*/\",\r\n\t\t\trcomment: \"\\\\/\\\\/#\\\\/\\\\/\"\r\n\t\t}, option);\r\n\r\n\t\tlet fnMap = {};\r\n\t\tlet fnOffset = 0;\r\n\t\tlet replacer = undefined;\r\n\t\tif (option.fnStart && option.fnEnd) {\r\n\t\t\twhile (true) {\r\n\t\t\t\tlet indexStart = str.indexOf(option.fnStart, fnOffset);\r\n\t\t\t\tlet indexEnd = str.indexOf(option.fnEnd, indexStart == -1 ? fnOffset : indexStart + option.fnStart.length);\r\n\t\t\t\tif (indexStart == -1 && indexEnd == -1) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t} else if (indexStart == -1) {\r\n\t\t\t\t\tconsole.warn(\"found end:\" + option.fnEnd + \",may lack start:\" + option.fnStart);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t} else if (indexEnd == -1) {\r\n\t\t\t\t\tconsole.warn(\"found start:\" + option.fnStart + \",may lack end:\" + option.fnEnd);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tlet fnId = \"_[_\" + randId() + \"_]_\";\r\n\t\t\t\tlet fnStr = str.substring(indexStart + option.fnStart.length, indexEnd).trim();\r\n\t\t\t\tif (!L.startsWith(fnStr, \"function(\")) {\r\n\t\t\t\t\tthrow \"not a function:\" + fnStr;\r\n\t\t\t\t}\r\n\t\t\t\ttry {\r\n\t\t\t\t\tstr = str.substring(0, indexStart) + '\"' + fnId + '\"' + str.substring(indexEnd + option.fnEnd.length);\r\n\t\t\t\t\tlet fn = L.xsEval(fnStr);\r\n\t\t\t\t\tfnMap[fnId] = fn;\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tconsole.error(fnStr);\r\n\t\t\t\t\tthrow e;\r\n\t\t\t\t}\r\n\t\t\t\tfnOffset = indexStart + fnId.length;\r\n\t\t\t}\r\n\t\t\treplacer = function(key, val) {\r\n\t\t\t\tif (L.isString(val) && fnMap[val]) {\r\n\t\t\t\t\treturn fnMap[val];\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn val;\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tif (option.rcomment) {\r\n\t\t\tstr = str.replace(/(\\r\\n)|\\r/g, \"\\n\"); //统一换行符号\r\n\t\t\tstr = str.replace(new RegExp(option.rcomment + \"[^\\\\n]*(\\\\n|$)\", \"g\"), \"\"); //去除行注释\r\n\t\t}\r\n\r\n\t\tlet jsonObj = xsJSON;\r\n\t\treturn jsonObj.parse(str, replacer);\r\n\t} catch (e) {\r\n\t\ttry {\r\n\t\t\tlet reg = new RegExp('position[\\\\s]*([0-9]+)[\\\\s]*$');\r\n\t\t\tif (e.message && reg.test(e.message)) {\r\n\t\t\t\tlet posStr = e.message.substring(e.message.lastIndexOf(\"position\") + 8);\r\n\t\t\t\tlet pos = parseInt(posStr.trim());\r\n\t\t\t\tlet _str = str.substring(pos);\r\n\t\t\t\tconsole.error(e.message + \":\" + _str.substring(0, _str.length > 100 ? 100 : _str.length));\r\n\t\t\t}\r\n\t\t} catch (e2) {\r\n\t\t\tconsole.warn(e2);\r\n\t\t}\r\n\t\tthrow e;\r\n\t}\r\n}\r\n\r\nfunction xsJson2String(obj) {\r\n\tlet jsonObj = xsJSON;\r\n\treturn jsonObj.stringify(obj);\r\n}\r\n\r\nconst getPathWithRelative = U.getPathWithRelative;\r\n\r\nfunction _toParamsMap(argsStr, decode = true) {\r\n\tif (L.isObject(argsStr)) {\r\n\t\treturn argsStr;\r\n\t}\r\n\tif (!argsStr) {\r\n\t\targsStr = location.search;\r\n\t}\r\n\r\n\tlet index = argsStr.indexOf(\"?\");\r\n\tif (index >= 0) {\r\n\t\targsStr = argsStr.substring(index + 1);\r\n\t} else {\r\n\t\tif (U.dealPathMayAbsolute(argsStr).absolute) {\r\n\t\t\treturn {};\r\n\t\t}\r\n\t}\r\n\tindex = argsStr.lastIndexOf(\"#\");\r\n\tif (index >= 0) {\r\n\t\targsStr = argsStr.substring(0, index);\r\n\t}\r\n\r\n\tlet ret = {},\r\n\t\tseg = argsStr.split('&'),\r\n\t\ts;\r\n\tfor (let i = 0; i < seg.length; i++) {\r\n\t\tif (!seg[i]) {\r\n\t\t\tcontinue;\r\n\t\t}\r\n\t\ts = seg[i].split('=');\r\n\t\tlet name = decode ? decodeURIComponent(s[0]) : s[0];\r\n\t\tret[name] = decode ? decodeURIComponent(s[1]) : s[1];\r\n\t}\r\n\treturn ret;\r\n}\r\n\r\n/**\r\n * \r\n * @param {Object} url\r\n * @param {Object} urlArgs \"a=b&b=c#hash\",\"#hash\",Object\r\n */\r\nfunction appendArgs2Url(url, urlArgs) {\r\n\tif (url === undefined || url === null || !urlArgs) {\r\n\t\treturn url;\r\n\t}\r\n\r\n\tlet index = url.lastIndexOf(\"?\");\r\n\tlet hashIndex = url.lastIndexOf(\"#\");\r\n\tif (hashIndex < 0) {\r\n\t\thashIndex = url.length;\r\n\t}\r\n\tlet oldParams = index < 0 ? {} : _toParamsMap(url.substring(index + 1, hashIndex), false);\r\n\tlet newParams = _toParamsMap(urlArgs, false);\r\n\tlet has = false;\r\n\tfor (let k in newParams) {\r\n\t\tif (oldParams[k] != newParams[k]) {\r\n\t\t\toldParams[k] = newParams[k];\r\n\t\t\thas = true;\r\n\t\t}\r\n\t}\r\n\t//\tif(!has) {\r\n\t//\t\treturn url; //参数没有变化直接返回\r\n\t//\t}\r\n\r\n\tlet paramKeys = [];\r\n\tfor (let k in oldParams) {\r\n\t\tparamKeys.push(k);\r\n\t}\r\n\tparamKeys.sort();\r\n\r\n\tlet path = index < 0 ? url.substring(0, hashIndex) : url.substring(0, index);\r\n\tlet params = [];\r\n\r\n\tfor (let i = 0; i < paramKeys.length; i++) { //保证参数按照顺序\r\n\t\tlet k = paramKeys[i];\r\n\t\tparams.push(k + \"=\" + oldParams[k]);\r\n\t}\r\n\tparams = params.join(\"&\");\r\n\tlet hash = \"\";\r\n\tif ((typeof urlArgs == \"string\") && urlArgs.lastIndexOf(\"#\") >= 0) {\r\n\t\thash = urlArgs.substring(urlArgs.lastIndexOf(\"#\"));\r\n\t} else if (hashIndex >= 0 && hashIndex < url.length) {\r\n\t\thash = url.substring(hashIndex);\r\n\t}\r\n\treturn path + (params ? \"?\" + params : \"\") + (hash ? hash : \"\");\r\n\r\n}\r\n\r\nfunction domAttr(dom, name) {\r\n\tlet attr;\r\n\tif (dom && (attr = dom.getAttribute(name)) !== null && attr !== undefined) {\r\n\t\treturn attr;\r\n\t} else {\r\n\t\treturn undefined;\r\n\t}\r\n}\r\n\r\nfunction queryString2ParamsMap(argsStr, decode) {\r\n\treturn _toParamsMap(argsStr, decode);\r\n}\r\n\r\nexport default {\r\n\tdomAttr,\r\n\trandId,\r\n\txsEval,\r\n\txsParseJson,\r\n\txsJson2String,\r\n\tgetPathWithRelative,\r\n\tappendArgs2Url,\r\n\tqueryString2ParamsMap,\r\n\tIE_VERSION\r\n};\r\n","const ostring = Object.prototype.toString;\r\n\r\nfunction isArray(it) {\r\n\treturn it && (it instanceof Array) || ostring.call(it) === '[object Array]';\r\n}\r\n\r\nfunction isFunction(it) {\r\n\treturn it && (typeof it == \"function\") || ostring.call(it) === '[object Function]';\r\n}\r\n\r\nfunction isObject(it) {\r\n\tif(it === null || it === undefined) {\r\n\t\treturn false;\r\n\t}\r\n\treturn(typeof it == \"object\") || ostring.call(it) === '[object Object]';\r\n}\r\n\r\nfunction isString(it) {\r\n\treturn it && (typeof it == \"string\") || ostring.call(it) === '[object String]';\r\n}\r\n\r\nfunction isDate(it) {\r\n\treturn it && (it instanceof Date) || ostring.call(it) === '[object Date]';\r\n}\r\n\r\nfunction isRegExp(it) {\r\n\treturn it && (it instanceof RegExp) || ostring.call(it) === '[object RegExp]';\r\n}\r\n\r\nfunction isEmpty(it) {\r\n\treturn it === null || it === undefined || it === \"\";\r\n}\r\n\r\nexport default {\r\n\tisArray,\r\n\tisFunction,\r\n\tisObject,\r\n\tisString,\r\n\tisDate,\r\n\tisRegExp,\r\n\tisEmpty,\r\n};","import U from \"../util/index.js\";\r\n\r\nconst G = U.global;\r\nconst L = G.xsloader;\r\n\r\nfunction queryParam(name, otherValue, optionUrl) {\r\n\tlet search;\r\n\tif(optionUrl) {\r\n\t\tlet index = optionUrl.indexOf('?');\r\n\t\tif(index < 0) {\r\n\t\t\tindex = 0;\r\n\t\t} else {\r\n\t\t\tindex += 1;\r\n\t\t}\r\n\t\tsearch = optionUrl.substr(index);\r\n\t} else {\r\n\t\tsearch = window.location.search.substr(1);\r\n\t}\r\n\r\n\tlet reg = new RegExp(\"(^|&)\" + name + \"=([^&]*)(&|$)\");\r\n\tlet r = search.match(reg);\r\n\tif(r != null) return decodeURIComponent(r[2]);\r\n\treturn otherValue !== undefined ? otherValue : null;\r\n}\r\n\r\nfunction getUrl(relativeUrl, appendArgs = true, optionalAbsUrl) {\r\n\tif(optionalAbsUrl && !U.dealPathMayAbsolute(optionalAbsUrl).absolute) {\r\n\t\tthrow new Error(\"expected absolute url:\" + optionalAbsUrl);\r\n\t}\r\n\t//\tif(appendArgs === undefined) {\r\n\t//\t\tappendArgs = true;\r\n\t//\t}\r\n\tlet theConfig = L.config();\r\n\tlet thePageUrl = U.thePageUrl;\r\n\tlet url;\r\n\tif(relativeUrl === undefined) {\r\n\t\turl = thePageUrl;\r\n\t} else if(L.startsWith(relativeUrl, \".\") || U.dealPathMayAbsolute(relativeUrl).absolute) {\r\n\t\turl = U.getPathWithRelative(optionalAbsUrl || thePageUrl, relativeUrl);\r\n\t} else {\r\n\t\turl = theConfig.baseUrl + relativeUrl;\r\n\t}\r\n\tif(appendArgs) {\r\n\t\tif(url == thePageUrl) {\r\n\t\t\turl += location.search + location.hash;\r\n\t\t}\r\n\t\treturn theConfig.dealUrl({}, url);\r\n\t} else {\r\n\t\treturn url;\r\n\t}\r\n}\r\n\r\nfunction getUrl2(relativeUrl, appendArgs = true, optionalAbsUrl) {\r\n\tlet url = getUrl(relativeUrl, false, optionalAbsUrl);\r\n\tif(appendArgs) {\r\n\t\treturn L.config().dealUrl({}, url);\r\n\t} else {\r\n\t\treturn url;\r\n\t}\r\n}\r\n\r\nfunction tryCall(fun, defaultReturn, thiz, exCallback) {\r\n\tlet rs;\r\n\ttry {\r\n\t\tthiz = thiz === undefined ? this : thiz;\r\n\t\trs = fun.call(thiz);\r\n\t} catch(e) {\r\n\t\tif(L.isFunction(exCallback)) {\r\n\t\t\texCallback(e);\r\n\t\t} else {\r\n\t\t\tconsole.warn(e);\r\n\t\t}\r\n\t}\r\n\tif(rs === undefined || rs === null) {\r\n\t\trs = defaultReturn;\r\n\t}\r\n\treturn rs;\r\n}\r\n\r\nfunction dealProperties(obj, properties) {\r\n\treturn U.propertiesDeal(obj, properties);\r\n}\r\n\r\nfunction extend(target) {\r\n\tfor(let i = 1; i < arguments.length; i++) {\r\n\t\tlet obj = arguments[i];\r\n\t\tif(!obj) {\r\n\t\t\tcontinue;\r\n\t\t}\r\n\t\tfor(let x in obj) {\r\n\t\t\tlet value = obj[x];\r\n\t\t\tif(value === undefined) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\ttarget[x] = obj[x];\r\n\t\t}\r\n\t}\r\n\treturn target;\r\n}\r\n\r\nfunction extendDeep(target) {\r\n\tif(!target) {\r\n\t\treturn target;\r\n\t}\r\n\tfor(let i = 1; i < arguments.length; i++) {\r\n\t\tlet obj = arguments[i];\r\n\t\tif(!obj) {\r\n\t\t\tcontinue;\r\n\t\t}\r\n\r\n\t\tfor(let x in obj) {\r\n\t\t\tlet value = obj[x];\r\n\t\t\tif(value === undefined) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tif(L.isObject(value) && L.isObject(target[x])) {\r\n\t\t\t\ttarget[x] = L.extendDeep(target[x], value);\r\n\t\t\t} else {\r\n\t\t\t\ttarget[x] = obj[x];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn target;\r\n}\r\n\r\nfunction _AsyncCall(useTimer) {\r\n\tlet thiz = this;\r\n\tlet count = 0;\r\n\tlet ctrlCallbackMap = {};\r\n\r\n\tfunction initCtrlCallback(callbackObj) {\r\n\t\tlet mineCount = count + \"\";\r\n\t\tif(!ctrlCallbackMap[mineCount]) {\r\n\t\t\tlet ctrlCallback = function() {\r\n\t\t\t\tcount++;\r\n\t\t\t\tlet asyncCallQueue = ctrlCallbackMap[mineCount];\r\n\t\t\t\tdelete ctrlCallbackMap[mineCount];\r\n\t\t\t\twhile(asyncCallQueue.length) {\r\n\t\t\t\t\tlet callbackObj = asyncCallQueue.shift();\r\n\t\t\t\t\tlet lastReturn = undefined;\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tif(callbackObj.callback) {\r\n\t\t\t\t\t\t\tlastReturn = callbackObj.callback.call(callbackObj.handle, callbackObj.obj, mineCount);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} catch(e) {\r\n\t\t\t\t\t\tconsole.error(e);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlet handle;\r\n\t\t\t\t\twhile(callbackObj.nextCallback.length) {\r\n\t\t\t\t\t\tlet nextObj = callbackObj.nextCallback.shift();\r\n\t\t\t\t\t\tif(!handle) {\r\n\t\t\t\t\t\t\thandle = thiz.pushTask(nextObj.callback, lastReturn);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\thandle.next(nextObj.callback);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tctrlCallbackMap[mineCount] = [];\r\n\t\t\tif(!useTimer && G.Promise && G.Promise.resolve) {\r\n\t\t\t\tG.Promise.resolve().then(ctrlCallback);\r\n\t\t\t} else {\r\n\t\t\t\tsetTimeout(ctrlCallback, 0);\r\n\t\t\t}\r\n\t\t}\r\n\t\tlet queue = ctrlCallbackMap[mineCount];\r\n\t\tqueue.push(callbackObj);\r\n\t}\r\n\r\n\tthis.pushTask = function(callback, obj) {\r\n\t\tlet callbackObj;\r\n\t\tlet handle = {\r\n\t\t\tnext: function(nextCallback, lastReturn) {\r\n\t\t\t\tcallbackObj.nextCallback.push({\r\n\t\t\t\t\tcallback: nextCallback,\r\n\t\t\t\t\tlastReturn: lastReturn\r\n\t\t\t\t});\r\n\t\t\t\treturn this;\r\n\t\t\t}\r\n\t\t};\r\n\t\tcallbackObj = {\r\n\t\t\tcallback: callback,\r\n\t\t\tobj: obj,\r\n\t\t\tnextCallback: [],\r\n\t\t\thandle: handle\r\n\t\t};\r\n\r\n\t\tinitCtrlCallback(callbackObj);\r\n\r\n\t\treturn handle;\r\n\t};\r\n}\r\n\r\nconst theAsyncCall = new _AsyncCall();\r\nconst theAsyncCallOfTimer = new _AsyncCall(true);\r\n\r\nlet asyncCall = function(callback, useTimer) {\r\n\tif(useTimer) {\r\n\t\treturn theAsyncCallOfTimer.pushTask(callback);\r\n\t} else {\r\n\t\treturn theAsyncCall.pushTask(callback);\r\n\t}\r\n};\r\n\r\n/**\r\n * 得到属性\r\n * @param {Object} obj\r\n * @param {Object} attrNames \"rs\"、\"rs.total\"等\r\n */\r\nfunction getObjectAttr(obj, attrNames, defaultValue) {\r\n\tif(!obj || !attrNames) {\r\n\t\treturn undefined;\r\n\t}\r\n\tlet attrs = attrNames.split(\".\");\r\n\tlet rs = defaultValue;\r\n\tlet i = 0;\r\n\tfor(; i < attrs.length && obj; i++) {\r\n\t\tlet k = attrs[i];\r\n\t\tobj = obj[k];\r\n\t}\r\n\tif(i == attrs.length) {\r\n\t\trs = obj;\r\n\t}\r\n\r\n\treturn rs;\r\n}\r\n\r\n/**\r\n * 设置属性\r\n * @param {Object} obj\r\n * @param {Object} attrNames \"rs\"、\"rs.total\"等\r\n */\r\nfunction setObjectAttr(obj, attrNames, value) {\r\n\tlet _obj = obj;\r\n\tlet attrs = attrNames.split(\".\");\r\n\r\n\tfor(let i = 0; i < attrs.length; i++) {\r\n\t\tlet k = attrs[i];\r\n\r\n\t\tif(i == attrs.length - 1) {\r\n\t\t\tobj[k] = value;\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tlet o = obj[k];\r\n\t\tif(!o) {\r\n\t\t\to = {};\r\n\t\t\tobj[k] = o;\r\n\t\t}\r\n\t\tobj = o;\r\n\t}\r\n\treturn _obj;\r\n}\r\n\r\nfunction clone(obj, isDeep = false) {\r\n\t// Handle the 3 simple types, and null or undefined or function\r\n\tif(!obj || L.isFunction(obj) || L.isString(obj)) return obj;\r\n\r\n\tif(L.isRegExp(obj)) {\r\n\t\treturn new RegExp(obj.source, obj.flags);\r\n\t}\r\n\r\n\t// Handle Date\r\n\tif(L.isDate(obj)) {\r\n\t\tlet copy = new Date();\r\n\t\tcopy.setTime(obj.getTime());\r\n\t\treturn copy;\r\n\t}\r\n\t// Handle Array or Object\r\n\tif(L.isArray(obj) || L.isObject(obj)) {\r\n\t\tlet copy = L.isArray(obj) ? [] : {};\r\n\t\tfor(let attr in obj) {\r\n\t\t\tlet v = obj[attr];\r\n\t\t\tcopy[attr] = isDeep ? clone(v) : v;\r\n\t\t}\r\n\t\treturn copy;\r\n\t}\r\n\treturn obj;\r\n}\r\n\r\nfunction sortObject(obj) {\r\n\tif(!obj || !L.isObject(obj)) {\r\n\t\treturn obj;\r\n\t} else {\r\n\t\tlet keys = [];\r\n\t\tfor(let k in obj) {\r\n\t\t\tkeys.push(k);\r\n\t\t}\r\n\t\tkeys.sort();\r\n\t\tlet newObj = {};\r\n\t\tfor(let i = 0; i < keys.length; i++) {\r\n\t\t\tnewObj[keys[i]] = obj[keys[i]];\r\n\t\t}\r\n\t\treturn newObj;\r\n\t}\r\n}\r\n\r\nexport default {\r\n\tqueryParam,\r\n\tgetUrl,\r\n\tgetUrl2,\r\n\ttryCall,\r\n\tdealProperties,\r\n\textend,\r\n\textendDeep,\r\n\tasyncCall,\r\n\tgetObjectAttr,\r\n\tsetObjectAttr,\r\n\tclone,\r\n\tsortObject,\r\n};","import U from \"../util/index.js\";\r\n\r\nconst G = U.global;\r\nconst L = G.xsloader;\r\n\r\nlet isDOM = (typeof HTMLElement === 'object') ?\r\n\tfunction(obj) {\r\n\t\treturn obj && (obj instanceof HTMLElement);\r\n\t} :\r\n\tfunction(obj) {\r\n\t\treturn obj && typeof obj === 'object' && obj.nodeType === 1 && typeof obj.nodeName === 'string';\r\n\t};\r\n\r\nlet onReadyFun = (function() {\r\n\tlet isGlobalReady = false;\r\n\tlet bindReadyQueue = [];\r\n\r\n\tfunction BindReady(callback) {\r\n\t\tif(isGlobalReady) {\r\n\t\t\tcallback();\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tlet isReady = false;\r\n\t\tlet removeListener;\r\n\r\n\t\tfunction ready() {\r\n\t\t\tif(isReady) return;\r\n\t\t\tisReady = true;\r\n\t\t\tisGlobalReady = true;\r\n\t\t\tif(removeListener) {\r\n\t\t\t\tremoveListener();\r\n\t\t\t\tremoveListener = null;\r\n\t\t\t}\r\n\t\t\tcallback();\r\n\t\t}\r\n\t\t// Mozilla, Opera and webkit nightlies currently support this event\r\n\t\tif(document.addEventListener) {\r\n\t\t\tlet fun;\r\n\t\t\tfun = function() {\r\n\t\t\t\tready();\r\n\t\t\t};\r\n\t\t\tremoveListener = function() {\r\n\t\t\t\tdocument.removeEventListener(\"DOMContentLoaded\", fun);\r\n\t\t\t};\r\n\t\t\tdocument.addEventListener(\"DOMContentLoaded\", fun);\r\n\r\n\t\t} else if(document.attachEvent) {\r\n\t\t\t// ensure firing before onload,\r\n\t\t\t// maybe late but safe also for iframes\r\n\t\t\tlet fun;\r\n\t\t\tfun = function() {\r\n\t\t\t\tif(document.readyState === \"complete\") {\r\n\t\t\t\t\tready();\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tremoveListener = function() {\r\n\t\t\t\tdocument.detachEvent(\"onreadystatechange\", fun);\r\n\t\t\t};\r\n\t\t\tdocument.attachEvent(\"onreadystatechange\", fun);\r\n\t\t\t// If IE and not an iframe\r\n\t\t\t// continually check to see if the document is ready\r\n\r\n\t\t\tlet fun2;\r\n\t\t\tfun2 = function() {\r\n\t\t\t\tif(isReady) return;\r\n\t\t\t\ttry {\r\n\t\t\t\t\t// If IE is used, use the trick by Diego Perini\r\n\t\t\t\t\t// http://javascript.nwbox.com/IEContentLoaded/\r\n\t\t\t\t\tdocument.documentElement.doScroll(\"left\");\r\n\t\t\t\t} catch(error) {\r\n\t\t\t\t\tsetTimeout(fun2, 0);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t// and execute any waiting functions\r\n\t\t\t\tready();\r\n\t\t\t};\r\n\r\n\t\t\tif(document.documentElement.doScroll && typeof G.frameElement === \"undefined\")(fun2)();\r\n\t\t} else {\r\n\t\t\tL.asyncCall(null, true).next(function() {\r\n\t\t\t\tready();\r\n\t\t\t});\r\n\t\t}\r\n\t\tthis.readyCall = ready;\r\n\t}\r\n\tlet onReady = function(callback) {\r\n\t\tif(document.readyState === \"complete\") {\r\n\t\t\tisGlobalReady = true;\r\n\t\t}\r\n\r\n\t\tif(isGlobalReady) {\r\n\t\t\tcallback();\r\n\t\t} else {\r\n\t\t\tlet br = new BindReady(callback);\r\n\t\t\tbindReadyQueue.push(br);\r\n\t\t}\r\n\t};\r\n\r\n\tlet addEventHandle;\r\n\tonReady(function() {\r\n\t\tisGlobalReady = true;\r\n\t\tif(addEventHandle && addEventHandle.remove) {\r\n\t\t\taddEventHandle.remove();\r\n\t\t\taddEventHandle = null;\r\n\t\t}\r\n\t});\r\n\r\n\tif(document.readyState === \"complete\") {\r\n\t\tisGlobalReady = true;\r\n\t} else {\r\n\t\tif(G.addEventListener) {\r\n\t\t\taddEventHandle = function(type, callback) {\r\n\t\t\t\tlet fun = function() {\r\n\t\t\t\t\taddEventHandle.remove();\r\n\t\t\t\t\tcallback();\r\n\t\t\t\t};\r\n\t\t\t\tG.addEventListener(type, fun, false);\r\n\t\t\t\taddEventHandle.remove = function() {\r\n\t\t\t\t\tif(fun) {\r\n\t\t\t\t\t\tG.removeEventListener(type, fun);\r\n\t\t\t\t\t\tfun = null;\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t};\r\n\t\t} else if(G.attachEvent) {\r\n\t\t\taddEventHandle = function(type, callback) {\r\n\t\t\t\tlet fun = function() {\r\n\t\t\t\t\taddEventHandle.remove();\r\n\t\t\t\t\tcallback();\r\n\t\t\t\t};\r\n\t\t\t\tG.attachEvent(\"on\" + type, fun);\r\n\t\t\t\taddEventHandle.remove = function() {\r\n\t\t\t\t\tif(fun) {\r\n\t\t\t\t\t\tG.detachEvent(\"on\" + type, fun);\r\n\t\t\t\t\t\tfun = null;\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\taddEventHandle = function(type, callback) {\r\n\t\t\t\tL.asyncCall(null, true).next(function() {\r\n\t\t\t\t\tcallback();\r\n\t\t\t\t});\r\n\t\t\t};\r\n\t\t}\r\n\t\taddEventHandle(\"load\", function() {\r\n\t\t\tisGlobalReady = true;\r\n\t\t\twhile(bindReadyQueue.length) {\r\n\t\t\t\tbindReadyQueue.shift().readyCall();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\treturn onReady;\r\n})();\r\n\r\nexport default {\r\n\tisDOM,\r\n\tonReady: onReadyFun\r\n};","import U from \"../util/index.js\";\r\n////////////////////\r\n\r\nimport deprecated from './global-deprecated.js';\r\nimport base from './global-base.js';\r\n//////////////////\r\nimport is from './is.js';\r\nimport funs from './funs.js';\r\nimport browser from './browser.js';\r\n\r\nconst G = U.global;\r\nconst L = G.xsloader;\r\n\r\nconst env = {\r\n\tversion: ENV_XSLOADER_VERSION\r\n};\r\n\r\nlet toGlobal = {\r\n\t...deprecated,\r\n\t...base\r\n};\r\nfor(let k in toGlobal) {\r\n\tL[k] = toGlobal[k];\r\n\tG[k] = toGlobal[k];\r\n}\r\n\r\nlet justLoader = {\r\n\t...is,\r\n\t...funs,\r\n\t...browser,\r\n\tignoreAspect_: {\r\n\r\n\t},\r\n\teach: U.each,\r\n\tBase64: U.base64,\r\n\tenv,\r\n};\r\nfor(let k in justLoader) {\r\n\tL[k] = justLoader[k];\r\n}","import U from \"../util/index.js\";\r\nconst L = U.global.xsloader;\r\nconst theDefinedMap = {};\r\nconst lastDefinObjectMap = {};\r\n\r\nL.__showModules = () => {\r\n\tconsole.log(theDefinedMap);\r\n};\r\n\r\nclass ModuleDef {\r\n\tsrc;\r\n\tdefaultModule; //默认模块（ define时未指定selfname的） 只能有一个\r\n\tmodules; //define的其他模块（含有selfname）\r\n\tisPreDependOn; //用于提前依赖\r\n\t_preModule;\r\n\t_preIndex;\r\n\ttargetDef; //用于提前依赖\r\n\tconstructor(src, isPreDependOn = false) {\r\n\t\tthis.src = src;\r\n\t\tthis.isPreDependOn = isPreDependOn;\r\n\t\tthis.modules = {};\r\n\t\tthis.defaultModule = null;\r\n\t\tthis.targetDef = null;\r\n\t\tif (isPreDependOn) {\r\n\t\t\tthis._preModule = {\r\n\t\t\t\tpreDependModule: true,\r\n\t\t\t\trelyQueue: [],\r\n\t\t\t\tget() {\r\n\t\t\t\t\treturn this;\r\n\t\t\t\t},\r\n\t\t\t\trelyIt() {\r\n\t\t\t\t\tlet args = [];\r\n\t\t\t\t\tfor (let i = 0; i < arguments.length; i++) {\r\n\t\t\t\t\t\targs.push(arguments[i]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.relyQueue.push(args);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n\t//用于提前依赖\r\n\tgiveRelys(module) {\r\n\t\tlet queue = this._preModule.relyQueue;\r\n\t\tmodule.index = module.index || this._preIndex || 0;\r\n\t\tthis._preModule = null;\r\n\t\twhile (queue.length) {\r\n\t\t\tlet args = queue.shift();\r\n\t\t\tmodule.relyIt.apply(module, args);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction _isSrc(nameOrUrl) {\r\n\tlet isSrc = /^[a-zA-Z0-9]+:\\/\\//.test(nameOrUrl);\r\n\treturn isSrc;\r\n}\r\n\r\nfunction setLastDefineObject(src, defineObject) {\r\n\tsrc = U.removeQueryHash(src);\r\n\tlastDefinObjectMap[src] = defineObject;\r\n}\r\n\r\nfunction getLastDefineObject(src) {\r\n\tsrc = U.removeQueryHash(src);\r\n\treturn lastDefinObjectMap[src];\r\n}\r\n\r\n/**\r\n * 获取指定脚本、加载中模块的依赖，并添加到defineObject.deps末尾。(配置里的依赖、不一定被添加到实际模块中，模块别名的缘故)\r\n * @param {Object} src\r\n */\r\nfunction appendLoadingModuleDeps(defineObject) {\r\n\tlet src = defineObject.src;\r\n\tlet deps = defineObject.deps;\r\n\tlet moduleDef = theDefinedMap[src];\r\n\tif (moduleDef) {\r\n\t\tlet mod = moduleDef.defaultModule && moduleDef.defaultModule.state == \"loading\" && moduleDef.defaultModule;\r\n\t\tlet _deps = mod && mod.deps;\r\n\t\tU.each(_deps, (dep) => {\r\n\t\t\tif (L.indexInArray(deps, dep) == -1) {\r\n\t\t\t\tdeps.push(dep);\r\n\t\t\t}\r\n\t\t});\r\n\t\tif (mod) {\r\n\t\t\tdefineObject.pushName(mod.selfname);\r\n\t\t}\r\n\t\tfor (let k in moduleDef.modules) {\r\n\t\t\tmod = moduleDef.modules[k].state == \"loading\" && moduleDef.modules[k];\r\n\t\t\t_deps = mod && mod.deps;\r\n\r\n\t\t\tif (mod) {\r\n\t\t\t\tdefineObject.pushName(mod.selfname);\r\n\t\t\t}\r\n\r\n\t\t\tU.each(_deps, (dep) => {\r\n\t\t\t\tif (L.indexInArray(deps, dep) == -1) {\r\n\t\t\t\t\tdeps.push(dep);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n}\r\n\r\n/**\r\n * \r\n * @param {Object} nameOrUrl\r\n * @param {Object} selfname\r\n * @param ifoneThenGet 如果没有找到(排除此模块)，且只有唯一的一个、且状态为loaded或defined、则返回该模块对象。获取的模块不等于此模块。\r\n */\r\nfunction getModule(nameOrUrl, selfname = null, ifoneThenGet = null) {\r\n\tnameOrUrl = U.removeQueryHash(nameOrUrl);\r\n\tlet isSrc = _isSrc(nameOrUrl);\r\n\tlet config = L.config();\r\n\tif (config && config.autoExt && /\\/[^\\/.]+$/.test(nameOrUrl)) { //自动后缀\r\n\t\tnameOrUrl += config.autoExtSuffix;\r\n\t}\r\n\r\n\tlet moduleDef = theDefinedMap[nameOrUrl];\r\n\tif (moduleDef) {\r\n\t\tlet module;\r\n\t\tif (isSrc) { //如果提供地址、则获取默认模块\r\n\t\t\tif (selfname) {\r\n\t\t\t\tmodule = moduleDef.modules[selfname];\r\n\t\t\t} else {\r\n\t\t\t\tmodule = moduleDef.defaultModule;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (moduleDef.isPreDependOn) {\r\n\t\t\t\tmodule = moduleDef._preModule;\r\n\t\t\t} else {\r\n\t\t\t\tmodule = moduleDef.modules[nameOrUrl];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (module == ifoneThenGet) {\r\n\t\t\tmodule = null;\r\n\t\t}\r\n\r\n\t\tif (!module && ifoneThenGet) {\r\n\t\t\tlet count = 0;\r\n\t\t\tlet mod = moduleDef.defaultModule;\r\n\t\t\tmod && mod != ifoneThenGet && count++;\r\n\t\t\tfor (let k in moduleDef.modules) {\r\n\t\t\t\tmod = moduleDef.modules[k];\r\n\t\t\t\tmod != ifoneThenGet && count++;\r\n\t\t\t}\r\n\t\t\tif (count == 1 && (mod.state == \"loaded\" || mod.state == \"defined\")) {\r\n\t\t\t\tmodule = mod;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn module ? module.get() : null;\r\n\t} else {\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\n//提前依赖不存在的模块\r\nfunction preDependOn(name, index) {\r\n\tlet isSrc = _isSrc(name);\r\n\tif (isSrc) {\r\n\t\tthrow new Error(\"expected name,but src:\" + name);\r\n\t} else if (theDefinedMap[name]) {\r\n\t\tthrow new Error(\"already defined:\" + name);\r\n\t} else {\r\n\t\tlet def = new ModuleDef(null, true);\r\n\t\tdef._preIndex = index;\r\n\t\ttheDefinedMap[name] = def;\r\n\t}\r\n}\r\n\r\n/**\r\n * 替换模块的src，用于加载含有多个地址模块的情况（提供多个地址、直到加载成功）\r\n * @param {Object} oldSrc\r\n * @param {Object} module\r\n */\r\nfunction replaceModuleSrc(oldSrc, module) {\r\n\tlet moduleDef = theDefinedMap[oldSrc];\r\n\tif (!moduleDef) {\r\n\t\tthrow new Error(\"not found module:src=\" + oldSrc);\r\n\t} else if (theDefinedMap[module.src]) {\r\n\t\tthrow new Error(\"already exists module:src=\" + module.src);\r\n\t} else {\r\n\t\tmoduleDef.src = module.src;\r\n\t\tdelete theDefinedMap[oldSrc];\r\n\t\ttheDefinedMap[module.src] = moduleDef;\r\n\t}\r\n}\r\n\r\nfunction clearEmptyModuleBySrc(src) {\r\n\tlet moduleDef = theDefinedMap[src];\r\n\tif (moduleDef && !moduleDef.defaultModule) {\r\n\t\tif (moduleDef.defaultModule) {\r\n\t\t\tthrow new Error(\"not empty module:src=\" + src);\r\n\t\t} else {\r\n\t\t\tfor (let x in moduleDef.modules) {\r\n\t\t\t\tthrow new Error(\"not empty module:src=\" + src);\r\n\t\t\t}\r\n\t\t}\r\n\t\tdelete theDefinedMap[src];\r\n\t}\r\n}\r\n\r\n/**\r\n * 同一个模块可重复设置。\r\n * @param {Object} name 模块名字，若为空则表示模块模块。多个不同的名字可能指向同一个模块。\r\n * @param {Object} module 模块，必须含有src\r\n */\r\nfunction setModule(name, module) {\r\n\tlet src = module.src;\r\n\tif (!src) {\r\n\t\tthrow new Error(\"expected module src!\");\r\n\t}\r\n\tlet moduleDef = theDefinedMap[src];\r\n\tif (moduleDef) {\r\n\t\tif (name) {\r\n\t\t\tlet lasfDef = theDefinedMap[name];\r\n\t\t\tif (theDefinedMap[name] && lasfDef != moduleDef && !lasfDef.isPreDependOn &&\r\n\t\t\t\t!(lasfDef.modules[name] && lasfDef.modules[name].id == module.id)) {\r\n\t\t\t\tthrow new Error(\"already define module:\\n\\tname=\" + name + \",current.src=\" + src + \",\\n\\tthat.src=\" + theDefinedMap[\r\n\t\t\t\t\tname].src);\r\n\t\t\t} else {\r\n\t\t\t\tmoduleDef.modules[name] = module;\r\n\t\t\t\ttheDefinedMap[name] = moduleDef;\r\n\t\t\t\tif (lasfDef && lasfDef.isPreDependOn) {\r\n\t\t\t\t\tlasfDef.giveRelys(module);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\t//默认模块\r\n\t\t\tif (moduleDef.defaultModule && moduleDef.defaultModule != module) {\r\n\t\t\t\tthrow new Error(\"already define default module:src=\" + src);\r\n\t\t\t} else {\r\n\t\t\t\tmoduleDef.defaultModule = module;\r\n\t\t\t}\r\n\t\t}\r\n\t} else {\r\n\t\tmoduleDef = new ModuleDef(src);\r\n\t\ttheDefinedMap[src] = moduleDef;\r\n\t\tif (name) {\r\n\t\t\tmoduleDef.modules[name] = module;\r\n\t\t\tlet lasfDef = theDefinedMap[name];\r\n\t\t\tif (lasfDef && !lasfDef.isPreDependOn) {\r\n\t\t\t\tthrow new Error(\"already define module:\\n\\tname=\" + name + \",current.src=\" + src + \",\\n\\tthat.src=\" + theDefinedMap[\r\n\t\t\t\t\tname].src);\r\n\t\t\t} else {\r\n\t\t\t\ttheDefinedMap[name] = moduleDef;\r\n\t\t\t\tif (lasfDef && lasfDef.isPreDependOn) {\r\n\t\t\t\t\tlasfDef.giveRelys(module);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\t//默认模块\r\n\t\t\tmoduleDef.defaultModule = module;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default {\r\n\tgetModule,\r\n\tsetModule,\r\n\treplaceModuleSrc,\r\n\tclearEmptyModuleBySrc,\r\n\tpreDependOn,\r\n\tsetLastDefineObject,\r\n\tgetLastDefineObject,\r\n\tappendLoadingModuleDeps\r\n};\r\n","import U from \"../util/index.js\";\r\nimport script from \"./script.js\";\r\nimport moduleDef from \"./module-def\";\r\nconst L = U.global.xsloader;\r\n\r\n//新建模块实例\r\n//relyCallback(depModuleThis)\r\nfunction newModuleInstance(module, thatInvoker, relyCallback, index = 0) {\r\n\r\n\tlet instanceModule = {\r\n\t\tindex,\r\n\t\trelyCallback: relyCallback,\r\n\t\t_invoker: thatInvoker,\r\n\t\t_module_: null,\r\n\t\tinitInvoker: function() {\r\n\t\t\t//确保正确的invoker\r\n\t\t\tif (module.ignoreAspect) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tlet obj = this._object;\r\n\t\t\tlet invoker = this._invoker;\r\n\r\n\t\t\tlet addTheAttrs = (theObj) => {\r\n\t\t\t\ttheObj._invoker_ = invoker;\r\n\t\t\t\tif (theObj._module_) {\r\n\t\t\t\t\ttheObj._modules_ = theObj._modules_ || [];\r\n\t\t\t\t\ttheObj._modules_.push(theObj._module_);\r\n\t\t\t\t}\r\n\t\t\t\ttheObj._module_ = this._module_;\r\n\t\t\t\treturn theObj;\r\n\t\t\t};\r\n\r\n\t\t\tlet isSingle = module.instanceType != \"clone\";\r\n\r\n\t\t\tif (L.isObject(obj)) {\r\n\t\t\t\tif (module.loopObject && !isSingle) {\r\n\t\t\t\t\tthrow new Error(\"loop dependency not support single option:\" + module.description());\r\n\t\t\t\t}\r\n\t\t\t\tthis._object = addTheAttrs(isSingle ? obj : L.clone(obj));\r\n\t\t\t} else if (L.isFunction(obj)) {\r\n\t\t\t\tthis._object = addTheAttrs(obj);\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\t_object: null,\r\n\t\t_setDepModuleObjectGen: function(obj) {\r\n\t\t\tthis._object = obj;\r\n\t\t\tthis.initInvoker();\r\n\t\t},\r\n\t\tmodule: module,\r\n\t\tmoduleObject: function() {\r\n\t\t\treturn this._object;\r\n\t\t},\r\n\t\tgenExports: function() {\r\n\t\t\tlet exports = {};\r\n\t\t\tthis._setDepModuleObjectGen(exports);\r\n\t\t\treturn this._object;\r\n\t\t},\r\n\t\t_dealPluginArgs: function(pluginArgs) {\r\n\t\t\tif (this._object && this._object.dealPluginArgs) {\r\n\t\t\t\treturn this._object.dealPluginArgs.call(this.thiz, pluginArgs);\r\n\t\t\t} else {\r\n\t\t\t\tlet config = L.config();\r\n\t\t\t\tlet argArr = [pluginArgs];\r\n\t\t\t\tU.replaceModulePrefix(config, argArr); //前缀替换\r\n\t\t\t\tpluginArgs = argArr[0];\r\n\t\t\t\treturn pluginArgs;\r\n\t\t\t}\r\n\t\t},\r\n\t\t_getCacheKey: function(pluginArgs) {\r\n\t\t\tif (this._object.getCacheKey) {\r\n\t\t\t\treturn this._object.getCacheKey.call(this.thiz, pluginArgs);\r\n\t\t\t}\r\n\t\t\tlet id = this._invoker.getUrl();\r\n\t\t\treturn id;\r\n\t\t},\r\n\t\t_willCache: function(pluginArgs, cacheResult) {\r\n\t\t\tif (this._object.willCache) {\r\n\t\t\t\treturn this._object.willCache.call(this.thiz, pluginArgs, cacheResult);\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\tlastSinglePluginResult: function(pluginArgs) {\r\n\t\t\tlet id = this._getCacheKey(pluginArgs);\r\n\t\t\treturn this.module.lastSinglePluginResult(id, pluginArgs);\r\n\t\t},\r\n\t\tsetSinglePluginResult: function(pluginArgs, obj) {\r\n\t\t\tlet id = this._getCacheKey(pluginArgs);\r\n\t\t\tlet willCache = this._willCache(pluginArgs, obj);\r\n\t\t\treturn this.module.setSinglePluginResult(willCache, id, pluginArgs, obj);\r\n\t\t},\r\n\t\tinitInstance: function(justForSingle, originPluginArgs) {\r\n\t\t\tlet relyCallback = this.relyCallback;\r\n\t\t\tthis._module_ = this.module.dealInstance(this);\r\n\t\t\tthis._setDepModuleObjectGen(this.module.loopObject || this.module.moduleObject);\r\n\r\n\t\t\tlet pluginArgs = undefined;\r\n\t\t\tif (!L.isEmpty(originPluginArgs)) {\r\n\t\t\t\tpluginArgs = this._dealPluginArgs(originPluginArgs);\r\n\t\t\t} else {\r\n\t\t\t\tpluginArgs = originPluginArgs;\r\n\t\t\t}\r\n\r\n\t\t\tif (pluginArgs !== undefined) {\r\n\t\t\t\tif (!this._object) {\r\n\t\t\t\t\tthrow new Error(\"pulgin error:\" + this.module.description());\r\n\t\t\t\t}\r\n\t\t\t\tif (this._object.isSingle === undefined) {\r\n\t\t\t\t\tthis._object.isSingle = true; //同样的参数也需要重新调用\r\n\t\t\t\t}\r\n\t\t\t\tif (justForSingle && !this._object.isSingle) {\r\n\t\t\t\t\tthrow new Error(\"just for single plugin\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet hasFinished = false;\r\n\t\t\t\tlet onload = (result, ignoreAspect) => {\r\n\t\t\t\t\tif (result === undefined) {\r\n\t\t\t\t\t\tresult = {\r\n\t\t\t\t\t\t\t__default: true\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\t\t\t\t\thasFinished = true;\r\n\t\t\t\t\tif (this._object.isSingle) {\r\n\t\t\t\t\t\tthis.setSinglePluginResult(pluginArgs, {\r\n\t\t\t\t\t\t\tresult: result,\r\n\t\t\t\t\t\t\tignoreAspect: ignoreAspect\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.module.ignoreAspect = ignoreAspect === undefined || ignoreAspect;\r\n\t\t\t\t\tthis._setDepModuleObjectGen(result);\r\n\t\t\t\t\trelyCallback(this);\r\n\t\t\t\t};\r\n\t\t\t\tlet onerror = (err) => {\r\n\t\t\t\t\thasFinished = true;\r\n\t\t\t\t\trelyCallback(this, new U.PluginError(err || false));\r\n\t\t\t\t};\r\n\r\n\t\t\t\ttry {\r\n\t\t\t\t\tlet cacheResult;\r\n\t\t\t\t\tif (this._object.isSingle && (cacheResult = this.lastSinglePluginResult(pluginArgs)) !== undefined) {\r\n\t\t\t\t\t\tlet last = cacheResult;\r\n\t\t\t\t\t\tonload(last.result, last.ignoreAspect);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tlet args = [pluginArgs, onload, onerror, L.config()].concat(this.module.args);\r\n\t\t\t\t\t\tthis._object.pluginMain.apply(this.thiz, args);\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\t//console.warn(e);\r\n\t\t\t\t\tonerror(e);\r\n\t\t\t\t}\r\n\t\t\t\tif (!hasFinished) {\r\n\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\tif (!hasFinished) {\r\n\t\t\t\t\t\t\tconsole.warn(\"invoke plugin may failed:page=\" + location.href + \",plugin=\" + module.selfname + \"!\" +\r\n\t\t\t\t\t\t\t\tpluginArgs);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, L.config().waitSeconds * 1000);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\trelyCallback(this);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t};\r\n\r\n\tlet moduleMap = {\r\n\t\tindex,\r\n\t\tmodule: module,\r\n\t\tsrc: module.src,\r\n\t\tscriptSrc: module.scriptSrc,\r\n\t\tabsUrl: () => module.thiz.absUrl(),\r\n\t\tselfname: module.thiz.getName(),\r\n\t\tinvoker: instanceModule._invoker\r\n\t};\r\n\tinstanceModule.thiz = new script.Invoker(moduleMap);\r\n\r\n\t//\tif(module.selfname == \"css\") {\r\n\t//\t\tconsole.log(\"absUrl=\" + instanceModule.thiz.absUrl() + \",invoker.absUrl=\" + instanceModule.thiz.invoker().absUrl());\r\n\t//\t}\r\n\r\n\t//\tbuildInvoker(instanceModule);\r\n\treturn instanceModule;\r\n}\r\n\r\nfunction _newModule(name, scriptSrc, thatInvoker, index) {\r\n\tlet src = U.removeQueryHash(scriptSrc);\r\n\tlet defineObject = new script.DefineObject(scriptSrc, src, null, [name, null, null]);\r\n\tdefineObject.index = index;\r\n\tdefineObject.thatInvoker = thatInvoker;\r\n\tdefineObject.appendConfigDepsAndEmbedDeps(); //添加配置依赖，该模块对象是加载者、而不是define者\r\n\treturn newModule(defineObject);\r\n}\r\n\r\n//\r\n//模块依赖来源：(另见module.js:mayAddDeps,define.js:theRealDefine)\r\n//1、define里声明的\r\n//2、define或require里直接require('...')\r\n//3、config里配置的\r\n//4、手动通过handle.before或depBefore进行修改的\r\n/*\r\n *模块的名字来源：(另见define.js:onModuleLoaded)\r\n * 1、模块url地址:一定存在\r\n * 2、模块define时提供的：可选\r\n * 3、paths或depsPaths提供的：可选，且可能为默认模块\r\n * 4、name!提供的：可选\r\n */\r\nfunction newModule(defineObject) {\r\n\r\n\tlet instances = []; //所有模块实例\r\n\tlet moduleMap = {\r\n\t\tindex: defineObject.index || 0, //在上级依赖数组中所处的索引位置\r\n\t\tid: U.getAndIncIdCount(),\r\n\t\tselfname: defineObject.selfname,\r\n\t\tparent: defineObject.parentDefine,\r\n\t\tdescription() {\r\n\t\t\treturn `id=${this.id},selfname=${this.selfname || \"\"},src=${this.src}`;\r\n\t\t},\r\n\t\tdeps: defineObject.deps || [],\r\n\t\trelys: [],\r\n\t\tignoreAspect: false,\r\n\t\targs: null,\r\n\t\tsrc: defineObject.src, //绝对路径,可能等于当前页面路径\r\n\t\tscriptSrc: defineObject.scriptSrc, //含地址参数\r\n\t\tabsUrlFromModule: () => defineObject.absUrlFromDefineObject(),\r\n\t\tgetCallback: () => defineObject.callback,\r\n\t\t_dealApplyArgs: (args) => args,\r\n\t\t_loadCallback: null,\r\n\t\tmoduleObject: undefined, //依赖模块对应的对象\r\n\t\texports: null,\r\n\t\tloopObject: undefined, //循环依赖对象\r\n\t\tinvoker: defineObject.thatInvoker,\r\n\t\tinstanceType: \"single\",\r\n\t\treinitByDefineObject(defineObject) {\r\n\t\t\tthis.deps = defineObject.deps || [];\r\n\t\t\tthis.getCallback = () => defineObject.callback;\r\n\t\t},\r\n\t\tsetInstanceType(instanceType) {\r\n\t\t\tthis.instanceType = instanceType;\r\n\t\t},\r\n\t\t_singlePluginResult: {},\r\n\t\tlastSinglePluginResult(id, pluginArgs) {\r\n\t\t\tif (this._singlePluginResult[id]) {\r\n\t\t\t\treturn this._singlePluginResult[id][pluginArgs];\r\n\t\t\t}\r\n\t\t},\r\n\t\tsetSinglePluginResult(willCache, id, pluginArgs, obj) {\r\n\t\t\tif (willCache) {\r\n\t\t\t\tif (!this._singlePluginResult[id]) {\r\n\t\t\t\t\tthis._singlePluginResult[id] = {};\r\n\t\t\t\t}\r\n\t\t\t\tthis._singlePluginResult[id][pluginArgs] = obj;\r\n\t\t\t} else {\r\n\t\t\t\tif (this._singlePluginResult[id]) {\r\n\t\t\t\t\tdelete this._singlePluginResult[id][pluginArgs];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tfinish(args) {\r\n\t\t\targs = this._dealApplyArgs(args);\r\n\t\t\tthis.args = args;\r\n\t\t\tlet obj;\r\n\t\t\tif (L.isFunction(this.getCallback())) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tscript.currentDefineModuleQueue.push(this);\r\n\t\t\t\t\tobj = this.getCallback().apply(this.thiz, args);\r\n\t\t\t\t\tscript.currentDefineModuleQueue.pop();\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tscript.currentDefineModuleQueue.pop();\r\n\t\t\t\t\tconsole.error(\"error occured,invoker.url=\", this.invoker ? this.invoker.getUrl() : \"\");\r\n\t\t\t\t\tconsole.error(e);\r\n\t\t\t\t\tthis.setState(\"error\", e);\r\n\t\t\t\t\tthrow e;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tobj = this.getCallback();\r\n\t\t\t\tif (this.moduleObject !== undefined) {\r\n\t\t\t\t\tconsole.warn(\"ignore moudule:\" + moduleMap.description());\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet isDefault = false;\r\n\t\t\tif (obj === undefined) {\r\n\t\t\t\tisDefault = true;\r\n\t\t\t\tobj = {\r\n\t\t\t\t\t__default: true\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\tif (this.loopObject) {\r\n\t\t\t\tif (!L.isObject(obj)) {\r\n\t\t\t\t\tthrow new Error(\"循环依赖的模块必须是对象：\" + this.description());\r\n\t\t\t\t}\r\n\t\t\t\tfor (let x in obj) {\r\n\t\t\t\t\tthis.loopObject[x] = obj[x];\r\n\t\t\t\t}\r\n\t\t\t\tobj = this.loopObject;\r\n\t\t\t}\r\n\t\t\t//this.moduleObject不为undefined，则使用了exports\r\n\t\t\tif (this.moduleObject === undefined ||\r\n\t\t\t\t!isDefault && obj !== undefined //如果使用了return、则优先使用\r\n\t\t\t) {\r\n\t\t\t\tthis.moduleObject = obj;\r\n\t\t\t}\r\n\t\t\tthis.setState(\"defined\");\r\n\t\t},\r\n\t\tstate: \"init\", //init,loading,loaded,defined,error,\r\n\t\terrinfo: null,\r\n\t\t_callback(fun) {\r\n\t\t\tlet thiz = this;\r\n\t\t\tlet _state = thiz.state;\r\n\t\t\tif (_state == 'defined' || thiz.loopObject) {\r\n\t\t\t\tlet theCallback = function() {\r\n\t\t\t\t\tif (fun) {\r\n\t\t\t\t\t\tlet depModule = newModuleInstance(thiz, fun.thatInvoker, fun.relyCallback, fun.index);\r\n\t\t\t\t\t\tdepModule.initInstance(false, fun.pluginArgs);\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t\t//已经加载了模块，仍然需要判断为其另外设置的依赖模块是否已被加载\r\n\t\t\t\tlet deps = !thiz.loopObject && L.config().getDeps(thiz.selfname);\r\n\t\t\t\t//console.log(this.selfname,\":\",deps);\r\n\t\t\t\t//deps=null;\r\n\t\t\t\tif (deps && deps.length > 0) {\r\n\t\t\t\t\tL.require(deps, () => {\r\n\t\t\t\t\t\ttheCallback();\r\n\t\t\t\t\t}).then({\r\n\t\t\t\t\t\tdefined_module_for_deps: this.selfname\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttheCallback();\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn false;\r\n\t\t\t} else if (_state == \"timeout\" || _state == \"error\") {\r\n\t\t\t\tif (fun) {\r\n\t\t\t\t\tfun.relyCallback(this, this.errinfo);\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t} else {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t},\r\n\t\tsetState(_state, errinfo) {\r\n\t\t\tthis.state = _state;\r\n\t\t\tthis.errinfo = errinfo;\r\n\t\t\tif (!this._callback()) {\r\n\t\t\t\twhile (this.relys.length) {\r\n\t\t\t\t\tlet fun = this.relys.shift();\r\n\t\t\t\t\tthis._callback(fun);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tget() {\r\n\t\t\tif (this.refmodule) {\r\n\t\t\t\tthis.state = this.refmodule.state; //状态同步,保持与refmodule状态相同\r\n\t\t\t\treturn this.refmodule;\r\n\t\t\t}\r\n\t\t\treturn this;\r\n\t\t},\r\n\t\trefmodule: undefined, //引用指定模块\r\n\t\t/**\r\n\t\t * 依赖当前模块、表示依赖otherModule模块，当前模块为别名或引用。\r\n\t\t * @param {Object} otherModule\r\n\t\t */\r\n\t\ttoOtherModule(otherModule) {\r\n\t\t\tthis.refmodule = otherModule;\r\n\t\t\tthis.get(); //状态同步\r\n\t\t\tlet theRelys = this.relys;\r\n\t\t\tthis.relys = [];\r\n\t\t\twhile (theRelys.length) {\r\n\t\t\t\tlet fun = theRelys.shift();\r\n\t\t\t\tthis.refmodule.relyIt(fun.thatInvoker, fun.relyCallback, fun.pluginArgs);\r\n\t\t\t}\r\n\t\t},\r\n\t\twhenNeed(loadCallback) {\r\n\t\t\tif (this.relys.length || this.refmodule && this.refmodule.relys.length) {\r\n\t\t\t\tloadCallback(); //已经被依赖了\r\n\t\t\t} else {\r\n\t\t\t\tthis._loadCallback = loadCallback;\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * \r\n\t\t * @param {Object} thatInvoker\r\n\t\t * @param {Object} callbackFun function(depModule,err)\r\n\t\t * @param {Object} pluginArgs\r\n\t\t */\r\n\t\trelyIt(thatInvoker, callbackFun, pluginArgs, index) {\r\n\t\t\tif (this.refmodule) {\r\n\t\t\t\tthis.get(); //状态同步\r\n\t\t\t\tthis.refmodule.relyIt(thatInvoker, callbackFun, pluginArgs, index); //传递给refmodule\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tlet fun = {\r\n\t\t\t\tthatInvoker: thatInvoker,\r\n\t\t\t\trelyCallback: callbackFun,\r\n\t\t\t\tpluginArgs: pluginArgs,\r\n\t\t\t\tindex,\r\n\t\t\t};\r\n\t\t\tif (this._callback(fun)) {\r\n\t\t\t\tthis.relys.push(fun);\r\n\t\t\t}\r\n\t\t\tif (this._loadCallback) { //将会加载此模块及其依赖的模块\r\n\t\t\t\tlet loadCallback = this._loadCallback;\r\n\t\t\t\tthis._loadCallback = null;\r\n\t\t\t\tloadCallback();\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tnew script.Invoker(moduleMap);\r\n\r\n\t//返回_module_\r\n\tmoduleMap.dealInstance = function(moduleInstance) {\r\n\t\tinstances.push(moduleInstance);\r\n\t\tlet _module_ = {\r\n\t\t\topId: null,\r\n\t\t\tsetToAll(name, value, opId) {\r\n\t\t\t\tif (opId !== undefined && opId == this.opId) {\r\n\t\t\t\t\treturn; //防止循环\r\n\t\t\t\t}\r\n\t\t\t\topId = opId || getModuleId();\r\n\t\t\t\tthis.opId = opId;\r\n\r\n\t\t\t\tlet obj = {};\r\n\t\t\t\tif (L.isString(name)) {\r\n\t\t\t\t\tobj[name] = value;\r\n\t\t\t\t} else if (L.isObject(name)) {\r\n\t\t\t\t\tfor (let k in name) {\r\n\t\t\t\t\t\tobj[k] = name[k];\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthrow new Error(\"unknown param:\" + name);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tU.each(instances, function(ins) {\r\n\t\t\t\t\tlet mobj = ins.moduleObject();\r\n\t\t\t\t\tfor (let k in obj) {\r\n\t\t\t\t\t\tmobj[k] = obj[k];\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (mobj._modules_) {\r\n\t\t\t\t\t\tU.each(mobj._modules_, function(_m_) {\r\n\t\t\t\t\t\t\t_m_.setToAll(name, value, opId);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t\treturn _module_;\r\n\t};\r\n\tmoduleMap.printOnNotDefined = function() {\r\n\r\n\t\tif (this.refmodule && this.refmodule.printOnNotDefined) {\r\n\t\t\tthis.refmodule.printOnNotDefined();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tlet root = {\r\n\t\t\tnodes: []\r\n\t\t};\r\n\t\tthis._printOnNotDefined(root);\r\n\t\tlet leafs = [];\r\n\r\n\t\tfunction findLeaf(node) {\r\n\t\t\tif (node.nodes.length) {\r\n\t\t\t\tU.each(node.nodes, function(item) {\r\n\t\t\t\t\tfindLeaf(item);\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tleafs.push(node);\r\n\t\t\t}\r\n\t\t}\r\n\t\tfindLeaf(root);\r\n\r\n\t\tfunction genErrs(node, infos, nodePaths) {\r\n\t\t\tinfos.push(node.err);\r\n\t\t\tnodePaths.push(node);\r\n\t\t\tif (node.parent) {\r\n\t\t\t\tgenErrs(node.parent, infos, nodePaths);\r\n\t\t\t}\r\n\t\t}\r\n\t\tconsole.error(\"{-----------------------------------------------------------------------------------------------\");\r\n\t\tconsole.error(\"load module error:id=\" + this.id + \",\" + (this.selfname ? \"selfname=\" + this.selfname + \",\" : \"\") +\r\n\t\t\t\"my page=\" + location.href);\r\n\r\n\t\tlet logedPathMap = {};\r\n\t\tU.each(leafs, (leaf) => {\r\n\t\t\tlet infos = [];\r\n\t\t\tlet nodePaths = [];\r\n\t\t\tgenErrs(leaf, infos, nodePaths);\r\n\r\n\t\t\tif (nodePaths.length) {\r\n\t\t\t\tlet key = nodePaths[0].id + \"-\" + nodePaths[nodePaths.length - 1].id;\r\n\t\t\t\tif (logedPathMap[key]) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlogedPathMap[key] = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tinfos = infos.reverse();\r\n\t\t\tfor (let i = 1; i < infos.length;) {\r\n\t\t\t\tlet as = [];\r\n\t\t\t\tfor (let k = 0; k < 3 && i < infos.length; k++) {\r\n\t\t\t\t\tas.push(infos[i++]);\r\n\t\t\t\t}\r\n\t\t\t\tconsole.warn(as.join(`\\n-----[${this.id}]-->`));\r\n\t\t\t\tconsole.log(\"\");\r\n\t\t\t}\r\n\r\n\t\t\tlet errModule = leaf.module;\r\n\t\t\tif (leaf.module && leaf.module.state == \"defined\") {\r\n\t\t\t\terrModule = leaf.parent.module;\r\n\t\t\t}\r\n\r\n\t\t\tif (errModule) {\r\n\r\n\t\t\t\tfunction getName(dep) {\r\n\t\t\t\t\tlet index = dep.lastIndexOf(\"/\");\r\n\t\t\t\t\treturn dep.substring(index + 1);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction getState(state) {\r\n\t\t\t\t\treturn state == \"defined\" ? state : \"【\" + (state || \"\") + \"】\";\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet as = [];\r\n\t\t\t\tfor (let i = 0; i < errModule.deps.length; i++) {\r\n\t\t\t\t\tlet dep = errModule.deps[i];\r\n\t\t\t\t\tlet index = dep.lastIndexOf(\"!\");\r\n\t\t\t\t\tif (index != -1) {\r\n\t\t\t\t\t\tdep = dep.substring(0, index);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (i % 5 == 0) {\r\n\t\t\t\t\t\tas.push(\"\\t\");\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tlet depMod = moduleDef.getModule(dep);\r\n\t\t\t\t\tif (depMod) {\r\n\t\t\t\t\t\tas.push(getName(dep) + \":\" + getState(depMod.state));\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tas.push(getName(dep) + \":\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (i < errModule.deps.length - 1) {\r\n\t\t\t\t\t\tas.push(\",\");\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ((i + 1) % 5 == 0) {\r\n\t\t\t\t\t\tas.push(\"\\n\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tconsole.warn(\"failed module:\" + errModule.description());\r\n\t\t\t\tconsole.warn(\"deps state infos:{\");\r\n\t\t\t\tconsole.warn(as.join(\"\"));\r\n\t\t\t\tconsole.warn(\"}\");\r\n\t\t\t\tfor (let i = 0; i < errModule.deps.length; i++) {\r\n\t\t\t\t\tlet dep = errModule.deps[i];\r\n\t\t\t\t\tlet index = dep.lastIndexOf(\"!\");\r\n\t\t\t\t\tif (index != -1) {\r\n\t\t\t\t\t\tdep = dep.substring(0, index);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlet depMod = moduleDef.getModule(dep);\r\n\t\t\t\t\tif (depMod) {\r\n\t\t\t\t\t\tconsole.warn(\"[dep]\" + getName(dep) + \":\" + \"state=\" + getState(depMod.state) + \"\\n\\tsrc=\" + depMod.src +\r\n\t\t\t\t\t\t\t\"\\n\\tabsUrl=\" +\r\n\t\t\t\t\t\t\t(depMod\r\n\t\t\t\t\t\t\t\t.thiz && depMod.thiz.absUrl()));\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconsole.warn(\"[dep]\" + getName(dep) + \":\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\tconsole.error(\"}-----------------------------------------------------------------------------------------------\");\r\n\t};\r\n\tmoduleMap._printOnNotDefined = function(parentNode) {\r\n\t\tlet node = {\r\n\t\t\terr: \"[\" + this.description() + \"].state=\" + this.state,\r\n\t\t\tid: this.id,\r\n\t\t\tmodule: this,\r\n\t\t\tparent: parentNode,\r\n\t\t\tnodes: []\r\n\t\t};\r\n\t\tparentNode.nodes.push(node);\r\n\t\tif (this.state == \"defined\") {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tU.each(this.deps, (dep) => {\r\n\t\t\tif (dep == \"exports\") {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tlet indexPlguin = dep.indexOf(\"!\");\r\n\t\t\tif (indexPlguin > 0) {\r\n\t\t\t\tdep = dep.substring(0, indexPlguin);\r\n\t\t\t}\r\n\r\n\t\t\tlet mod = moduleDef.getModule(dep);\r\n\t\t\tif (!mod && dep.indexOf(\"/\") >= 0) {\r\n\t\t\t\tdep = this.thiz.getUrl(dep, false);\r\n\t\t\t\tmod = moduleDef.getModule(dep);\r\n\t\t\t}\r\n\r\n\t\t\tif (mod && mod.state == \"defined\") {\r\n\t\t\t\tmod._printOnNotDefined(node);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t//只打印一个错误栈\r\n\t\t\tif (mod) {\r\n\t\t\t\tmod._printOnNotDefined && mod._printOnNotDefined(node);\r\n\t\t\t} else {\r\n\t\t\t\tnode.nodes.push({\r\n\t\t\t\t\tparent: parentNode,\r\n\t\t\t\t\tid: U.getAndIncIdCount(),\r\n\t\t\t\t\tnodes: [],\r\n\t\t\t\t\terr: \"[\" + dep + \"] has not module\"\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\tmoduleDef.setModule(moduleMap.selfname, moduleMap);\r\n\r\n\treturn moduleMap;\r\n}\r\n\r\nlet randModuleIndex = 0;\r\n\r\nfunction getModuleId() {\r\n\treturn \"_xs_req_2019_\" + randModuleIndex++;\r\n}\r\n\r\n//everyOkCallback(depModules,module),errCallback(err,invoker)\r\nfunction everyRequired(defineObject, module, everyOkCallback, errCallback) {\r\n\tif (defineObject.isError) {\r\n\t\treturn;\r\n\t}\r\n\r\n\t//处理相对路径,此时模块的依赖已经全部处理好了\r\n\tdefineObject.dealRelative(module);\r\n\r\n\tlet config = L.config();\r\n\r\n\tlet isError = false,\r\n\t\thasCallErr = false,\r\n\t\ttheExports;\r\n\tlet depCount = module.deps.length;\r\n\t//module.jsScriptCount = 0;\r\n\tlet depModules = new Array(depCount);\r\n\r\n\tlet invoker_of_module = module.thiz;\r\n\r\n\tfunction checkFinish(index, dep_name, depModule, syncHandle) {\r\n\t\tdepModules[index] = depModule;\r\n\r\n\t\tlet isFinish = /*(depCount == 0 || depCount - module.jsScriptCount == 0)*/ depCount <= 0 && !isError;\r\n\t\tlet customerResult;\r\n\r\n\t\tif (isFinish) {\r\n\t\t\teveryOkCallback(depModules, module);\r\n\t\t} else if (isError) {\r\n\t\t\tif (!hasCallErr) {\r\n\t\t\t\tlet err = new U.PluginError(isError, invoker_of_module, {\r\n\t\t\t\t\tindex: index,\r\n\t\t\t\t\tdep_name: dep_name\r\n\t\t\t\t});\r\n\t\t\t\tcustomerResult = errCallback(err, invoker_of_module);\r\n\t\t\t\tif (customerResult && customerResult.ignoreErrState) {\r\n\t\t\t\t\tif (customerResult.onGetModule) {\r\n\t\t\t\t\t\tmodule.moduleObject = customerResult.onGetModule();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (isFinish) {\r\n\t\t\t\t\t\teveryOkCallback(depModules, module);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\thasCallErr = true;\r\n\t\t\t\t\tmodule.setState('error', isError);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (!isError && syncHandle) {\r\n\t\t\tsyncHandle();\r\n\t\t}\r\n\t\treturn customerResult;\r\n\t}\r\n\r\n\tU.each(module.deps, function(dep, index, ary, syncHandle) {\r\n\t\t//\t\tif(L.startsWith(dep, \"css!\")) {\r\n\t\t//\t\t\tconsole.log(\"src=\" + module.src + \",absUrl=\" + invoker_of_module.absUrl() + \",absolute=\" + invoker_of_module.src());\r\n\t\t//\t\t}\r\n\t\tlet originDep = dep;\r\n\t\tlet pluginArgs = undefined;\r\n\t\tlet pluginIndex = dep.indexOf(\"!\");\r\n\t\tif (pluginIndex > 0) {\r\n\t\t\tpluginArgs = dep.substring(pluginIndex + 1);\r\n\t\t\tdep = dep.substring(0, pluginIndex);\r\n\t\t}\r\n\t\tlet relyItFun = function() {\r\n\t\t\tlet dmod = moduleDef.getModule(dep);\r\n\t\t\tif (!dmod) {\r\n\t\t\t\tconsole.warn(`not found module define: dep=${dep}`);\r\n\t\t\t}\r\n\r\n\t\t\tdmod.relyIt(invoker_of_module, function(depModule, err) {\r\n\t\t\t\tif (!err) {\r\n\t\t\t\t\tdepCount--;\r\n\t\t\t\t\tif (dep == \"exports\") {\r\n\t\t\t\t\t\tif (theExports) {\r\n\t\t\t\t\t\t\tmodule.moduleObject = theExports;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\ttheExports = module.moduleObject = depModule.genExports();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tmodule.exports = theExports;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tisError = err;\r\n\t\t\t\t}\r\n\t\t\t\tlet customerResult = checkFinish(index, originDep, depModule, syncHandle);\r\n\t\t\t\tif (customerResult && customerResult.ignoreErrState) {\r\n\t\t\t\t\tisError = false;\r\n\t\t\t\t\tif (customerResult.onFinish) {\r\n\t\t\t\t\t\tcustomerResult.onFinish();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}, pluginArgs, index);\r\n\t\t};\r\n\r\n\t\tif (!moduleDef.getModule(dep)) {\r\n\t\t\tlet isJsFile = U.isJsFile(dep);\r\n\t\t\tdo {\r\n\t\t\t\tlet urls;\r\n\t\t\t\tif (!isJsFile && dep.indexOf(\"/\") < 0 && dep.indexOf(\":\") >= 0) {\r\n\t\t\t\t\tlet i1 = dep.indexOf(\":\");\r\n\t\t\t\t\tlet i2 = dep.indexOf(\":\", i1 + 1);\r\n\t\t\t\t\tlet i3 = i2 > 0 ? dep.indexOf(\":\", i2 + 1) : -1;\r\n\t\t\t\t\tif (i2 == -1) {\r\n\t\t\t\t\t\tisError = \"illegal module:\" + dep;\r\n\t\t\t\t\t\terrCallback(isError, invoker_of_module);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlet version;\r\n\t\t\t\t\tlet groupModule;\r\n\t\t\t\t\tif (i3 == -1) {\r\n\t\t\t\t\t\tversion = config.defaultVersion[dep];\r\n\t\t\t\t\t\tgroupModule = dep + \":\" + version;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tversion = dep.substring(i3 + 1);\r\n\t\t\t\t\t\tgroupModule = dep;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (version === undefined) {\r\n\t\t\t\t\t\tisError = \"unknown version for:\" + dep;\r\n\t\t\t\t\t\terrCallback(isError, invoker_of_module);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlet _url = L.resUrlBuilder(groupModule);\r\n\t\t\t\t\turls = L.isArray(_url) ? _url : [_url];\r\n\t\t\t\t} else if (config.isInUrls(dep)) {\r\n\t\t\t\t\turls = config.getUrls(dep);\r\n\t\t\t\t} else if (isJsFile) {\r\n\t\t\t\t\turls = [dep];\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (config.autoExt && /\\/[^\\/.]+$/.test(dep)) { //自动后缀，需要后台支持\r\n\t\t\t\t\t\turls = [dep + config.autoExtSuffix];\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\turls = [];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//TODO errCallback是否无效??\r\n\t\t\t\tif (urls.length == 0) {\r\n\t\t\t\t\t//提前依赖模块\r\n\t\t\t\t\tmoduleDef.preDependOn(dep, index);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tU.each(urls, function(url, index) {\r\n\t\t\t\t\t\tif (L.startsWith(url, \".\") || L.startsWith(url, \"/\")) {\r\n\t\t\t\t\t\t\tif (!invoker_of_module.rurl(defineObject)) {\r\n\t\t\t\t\t\t\t\tisError = \"script url is null:'\" + module.description();\r\n\t\t\t\t\t\t\t\terrCallback(isError, invoker_of_module);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\turl = U.getPathWithRelative(invoker_of_module.rurl(defineObject), url);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tlet absolute = U.dealPathMayAbsolute(url);\r\n\t\t\t\t\t\t\tif (absolute.absolute) {\r\n\t\t\t\t\t\t\t\turl = absolute.path;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\turl = config.baseUrl + url;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (urls[index] == dep) {\r\n\t\t\t\t\t\t\tdep = url; //替换为绝对路径\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\turls[index] = config.dealUrl(dep, url, true);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!isError && urls.length) {\r\n\t\t\t\t\tU.replaceModulePrefix(config, urls); //前缀替换\r\n\r\n\t\t\t\t\tif (isJsFile) {\r\n\t\t\t\t\t\tlet lastModule;\r\n\t\t\t\t\t\tU.each([dep].concat(urls), (item) => {\r\n\t\t\t\t\t\t\tlastModule = moduleDef.getModule(item);\r\n\t\t\t\t\t\t\tif (lastModule) {\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tif (lastModule) { //已经被加载过,在dep最初为相对地址、接着变成绝对地址、且该模块被多个其他模块依赖时会出现这种情况\r\n\t\t\t\t\t\t\tdep = lastModule.src;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlet m2Name = isJsFile ? null : dep;\r\n\t\t\t\t\tlet module2 = _newModule(m2Name, urls[0], invoker_of_module, index);\r\n\t\t\t\t\tmoduleDef.setModule(null, module2); //直接通过地址加载的设置默认模块\r\n\t\t\t\t\tmodule2.setState(\"loading\"); //只有此处才设置loading状态\r\n\r\n\t\t\t\t\tlet configDeps = [];\r\n\t\t\t\t\tif (m2Name) {\r\n\t\t\t\t\t\tlet _deps = config.getDeps(m2Name);\r\n\t\t\t\t\t\tU.each(_deps, (d) => {\r\n\t\t\t\t\t\t\tif (L.indexInArray(configDeps, d) == -1) {\r\n\t\t\t\t\t\t\t\tconfigDeps.push(d);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tU.each(urls, (url) => {\r\n\t\t\t\t\t\tlet _deps = config.getDeps(url);\r\n\t\t\t\t\t\tU.each(_deps, (d) => {\r\n\t\t\t\t\t\t\tif (L.indexInArray(configDeps, d) == -1) {\r\n\t\t\t\t\t\t\t\tconfigDeps.push(d);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tif (configDeps.length) {\r\n\t\t\t\t\t\t//先加载配置依赖\r\n\t\t\t\t\t\tL.require(configDeps, () => {\r\n\t\t\t\t\t\t\tloadModule();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tloadModule();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t//加载模块dep:module2\r\n\t\t\t\t\tfunction loadModule(index = 0) {\r\n\t\t\t\t\t\tif (index >= urls.length) {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tlet url = urls[index];\r\n\t\t\t\t\t\tmoduleDef.setLastDefineObject(url, defineObject);\r\n\t\t\t\t\t\tif (index > 0) {\r\n\t\t\t\t\t\t\tlet oldSrc = module2.src;\r\n\t\t\t\t\t\t\tmodule2.src = U.removeQueryHash(url);\r\n\t\t\t\t\t\t\tmoduleDef.replaceModuleSrc(oldSrc, module2);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tscript.loadScript(module2.selfname, url, (scriptData) => {\r\n\t\t\t\t\t\t\tlet defaultMod;\r\n\t\t\t\t\t\t\tif (module2.state == \"loading\") { //module2.selfname为配置名称，尝试默认模块或者唯一的模块\r\n\t\t\t\t\t\t\t\t//(唯一的模块用于支持：脚本里只有一个define、且指定了模块名、且此处的模块名与其自己指定了不相等)\r\n\t\t\t\t\t\t\t\tdefaultMod = moduleDef.getModule(module2.src, null, module2);\r\n\t\t\t\t\t\t\t\tif (defaultMod && module2 != defaultMod) {\r\n\t\t\t\t\t\t\t\t\tmodule2.toOtherModule(defaultMod);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif (!defaultMod && module2.state == \"loading\") {\r\n\t\t\t\t\t\t\t\t//isError = \"load module err(may not define default):\" + module2.description();\r\n\t\t\t\t\t\t\t\t//errCallback(isError, invoker_of_module);\r\n\t\t\t\t\t\t\t\t//？？没有define的情况、直接完成\r\n\t\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\t\tmodule2.finish([]);\r\n\t\t\t\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\t\t\t\tisError = e;\r\n\t\t\t\t\t\t\t\t\terrCallback(isError, invoker_of_module);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}, (err) => {\r\n\t\t\t\t\t\t\tif (index + 1 < urls.length) {\r\n\t\t\t\t\t\t\t\tloadModule(index + 1);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tisError = err;\r\n\t\t\t\t\t\t\t\terrCallback(isError, invoker_of_module);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} while (false);\r\n\t\t}\r\n\t\tif (!isError) {\r\n\t\t\trelyItFun();\r\n\t\t}\r\n\t}, defineObject.handle.orderDep);\r\n\t//TODO STRONG ????ie10及以下版本，js文件一个一个加载，从而解决缓存等造成的混乱问题\r\n}\r\n\r\nexport default {\r\n\t...moduleDef,\r\n\tnewModule,\r\n\teveryRequired,\r\n\tnewModuleInstance,\r\n\tgetModuleId\r\n};\r\n","import U from \"../util/index.js\";\r\nimport moduleScript from \"./module.js\";\r\n\r\nconst L = U.global.xsloader;\r\n\r\nconst defContextName = \"xsloader1.1.x\";\r\nconst DATA_ATTR_MODULE = 'data-xsloader-module';\r\nconst DATA_ATTR_CONTEXT = \"data-xsloader-context\";\r\nconst INNER_DEPS_PLUGIN = \"__inner_deps__\";\r\nconst innerDepsMap = {}; //内部依赖加载插件用于保存依赖的临时map\r\nconst globalDefineQueue = []; //没有配置前的define\r\n\r\nconst isOpera = typeof opera !== 'undefined' && opera.toString() === '[object Opera]';\r\nconst safariVersion = (function() {\r\n\tlet ua = navigator.userAgent.toLowerCase();\r\n\tlet s = ua.match(/version\\/([\\d.]+)\\s+safari/);\r\n\treturn s ? parseInt(s[1]) : -1;\r\n})();\r\n\r\nconst readyRegExp = navigator.platform === 'PLAYSTATION 3' ? /^complete$/ : /^(complete|loaded)$/;\r\nconst theLoaderScript = document.currentScript || U.getScriptBySubname(\"xsloader.js\");\r\nconst theLoaderUrl = U.removeQueryHash(U.getNodeAbsolutePath(theLoaderScript));\r\nconst thePageUrl = U.thePageUrl;\r\nconst theHead = document.head || document.getElementsByTagName('head')[0];\r\n\r\nconst currentDefineModuleQueue = []; //当前回调的模块\r\ncurrentDefineModuleQueue.peek = function() {\r\n\tif (this.length > 0) {\r\n\t\treturn this[this.length - 1];\r\n\t}\r\n};\r\n\r\nlet lastAppendHeadDom = theLoaderScript;\r\nlet isSrcFromScriptLoad; //获取脚本的src是否在load事件阶段\r\nlet lastSrc = thePageUrl;\r\nlet lastScriptSrc = location.href;\r\n\r\nlet theRealDefine;\r\nif (safariVersion > 0 && safariVersion <= 7) {\r\n\tisSrcFromScriptLoad = true;\r\n}\r\n\r\n//处理嵌套依赖\r\nfunction _dealEmbedDeps(deps, defineObject) {\r\n\tfor (let i = 0; i < deps.length; i++) {\r\n\t\tlet dep = deps[i];\r\n\t\tif (L.isArray(dep)) {\r\n\t\t\t//内部的模块顺序加载\r\n\t\t\tlet modName = \"inner_order_\" + moduleScript.getModuleId();\r\n\t\t\tlet isOrderDep = !(dep.length > 0 && dep[0] === false);\r\n\t\t\tif (dep.length > 0 && (dep[0] === false || dep[0] === true)) {\r\n\t\t\t\tdep = dep.slice(1);\r\n\t\t\t}\r\n\t\t\tinnerDepsMap[modName] = {\r\n\t\t\t\tdeps: dep,\r\n\t\t\t\tabsUrl: defineObject.absUrlFromDefineObject(),\r\n\t\t\t\torderDep: isOrderDep,\r\n\t\t\t\tsrc: defineObject.src,\r\n\t\t\t};\r\n\r\n\t\t\t//console.log(innerDepsMap[modName]);\r\n\t\t\tdeps[i] = INNER_DEPS_PLUGIN + \"!\" + modName;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction _getPluginParam(path) {\r\n\tlet pluginIndex = path.indexOf(\"!\");\r\n\tif (pluginIndex > 0) {\r\n\t\treturn path.substring(pluginIndex);\r\n\t} else {\r\n\t\treturn \"\";\r\n\t}\r\n}\r\n\r\n/////////////////////////////\r\nclass Handle {\r\n\tdefineObject;\r\n\tconstructor(defineObject) {\r\n\t\tthis.defineObject = defineObject;\r\n\t}\r\n\r\n\tthen(option) {\r\n\t\tlet defineObject = this.defineObject;\r\n\t\tdefineObject.handle = L.extend(defineObject.handle, option);\r\n\t\treturn this;\r\n\t}\r\n\terror(onError) {\r\n\t\tlet defineObject = this.defineObject;\r\n\t\tdefineObject.handle.onError = onError;\r\n\t\treturn this;\r\n\t}\r\n\tonError(err, invoker) {\r\n\t\treturn this.defineObject.handle.onError(err, invoker);\r\n\t}\r\n}\r\n\r\nclass ThisInvoker {\r\n\tinvoker;\r\n\tconstructor(invoker) {\r\n\t\tthis.invoker = invoker;\r\n\t}\r\n}\r\n\r\nfunction _buildInvoker(module) {\r\n\tlet invoker = module[\"thiz\"];\r\n\tmodule = module.module || module;\r\n\tlet id = L.randId();\r\n\tinvoker.getId = function() {\r\n\t\treturn id;\r\n\t};\r\n\tinvoker.getUrl = function(relativeUrl, appendArgs = true, optionalAbsUrl) {\r\n\t\tif (optionalAbsUrl && !U.dealPathMayAbsolute(optionalAbsUrl).absolute) {\r\n\t\t\tthrow new Error(-1, \"expected absolute url:\" + optionalAbsUrl);\r\n\t\t}\r\n\r\n\t\tlet url;\r\n\t\tif (relativeUrl === undefined) {\r\n\t\t\turl = this.src();\r\n\t\t} else if (L.startsWith(relativeUrl, \".\") || U.dealPathMayAbsolute(relativeUrl).absolute) {\r\n\t\t\turl = U.getPathWithRelative(optionalAbsUrl || this.absUrl(), relativeUrl);\r\n\t\t} else {\r\n\t\t\tlet config = L.config();\r\n\t\t\tlet argArr = [relativeUrl];\r\n\t\t\tU.replaceModulePrefix(config, argArr); //前缀替换\r\n\r\n\t\t\tif (L.startsWith(argArr[0], relativeUrl)) {\r\n\t\t\t\turl = L.config().baseUrl + relativeUrl;\r\n\t\t\t} else {\r\n\t\t\t\turl = argArr[0];\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (appendArgs) {\r\n\t\t\tif (url == thePageUrl) {\r\n\t\t\t\turl += location.search + location.hash;\r\n\t\t\t}\r\n\t\t\treturn L.config().dealUrl(module, url);\r\n\t\t} else {\r\n\t\t\treturn url;\r\n\t\t}\r\n\t};\r\n\r\n\tinvoker.getUrl2 = function(relativeUrl, appendArgs = true, optionalAbsUrl) {\r\n\t\tlet url = this.getUrl(relativeUrl, false, optionalAbsUrl);\r\n\t\tif (appendArgs) {\r\n\t\t\treturn L.config().dealUrl(module, url);\r\n\t\t} else {\r\n\t\t\treturn url;\r\n\t\t}\r\n\t};\r\n\r\n\tinvoker.appendArgs = function(url, forArgsUrl = U.global.location.href) {\r\n\t\tlet urlArgs = L.config().getUrlArgs(module, forArgsUrl);\r\n\t\treturn L.appendArgs2Url(url, urlArgs);\r\n\t};\r\n\r\n\tinvoker.require = function() {\r\n\t\t//\t\tconsole.log(\"this.require:absolute=\" + invoker.src() + \",args[0]=\" + arguments[0]);\r\n\t\tlet h = L.require.apply(new ThisInvoker(invoker), arguments);\r\n\t\tif (h instanceof Handle) {\r\n\t\t\th.then({\r\n\t\t\t\tabsUrl: invoker.src()\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn h;\r\n\t};\r\n\r\n\tinvoker.require.get = function(name) {\r\n\t\treturn L.require.get.apply(new ThisInvoker(invoker), [name]);\r\n\t};\r\n\r\n\tinvoker.define = function() {\r\n\t\t//\t\tconsole.log(\"this.define:absolute=\" + invoker.src() + \",args[0]=\" + arguments[0] + (typeof arguments[0] == \"string\" ? (\",args[1]=\" + arguments[1]) : \"\"));\r\n\t\tlet h = L.define.apply(new ThisInvoker(invoker), arguments);\r\n\t\tif (h instanceof Handle) {\r\n\t\t\th.then({\r\n\t\t\t\tabsUrl: invoker.src()\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn h;\r\n\t};\r\n\tinvoker.rurl = function(defineObject) {\r\n\t\treturn defineObject && defineObject.absUrlFromDefineObject() || this.absUrl();\r\n\t};\r\n\r\n\t//deprecated\r\n\tinvoker.defineAsync = function() {\r\n\t\tlet h = invoker.define.apply(invoker, arguments);\r\n\t\treturn h;\r\n\t};\r\n\r\n\tinvoker.withAbsUrl = function(absUrlStr) {\r\n\r\n\t\tlet moduleMap = {\r\n\t\t\tmodule: module,\r\n\t\t\tget src() {\r\n\t\t\t\treturn invoker.src();\r\n\t\t\t},\r\n\t\t\tset src(val) {\r\n\t\t\t\tthrow \"not support!\";\r\n\t\t\t},\r\n\t\t\tget scriptSrc() {\r\n\t\t\t\treturn invoker.scriptSrc();\r\n\t\t\t},\r\n\t\t\tset scriptSrc(val) {\r\n\t\t\t\tthrow \"not support!\";\r\n\t\t\t},\r\n\t\t\tabsUrl: () => {\r\n\t\t\t\tlet url = absUrlStr || invoker.absUrl();\r\n\t\t\t\treturn url;\r\n\t\t\t},\r\n\t\t\tabsUrlFromModule() {\r\n\t\t\t\treturn this.absUrl();\r\n\t\t\t},\r\n\t\t\tname: invoker.getName(),\r\n\t\t\tinvoker: invoker.invoker()\r\n\t\t};\r\n\t\treturn new Invoker(moduleMap);\r\n\t};\r\n}\r\n\r\nclass Invoker {\r\n\t_im;\r\n\t_id;\r\n\tconstructor(moduleMap) {\r\n\t\tthis._im = new L.InVar(moduleMap);\r\n\t\tthis._id = U.getAndIncIdCount();\r\n\t\tmoduleMap.thiz = this;\r\n\t\t_buildInvoker(moduleMap);\r\n\t}\r\n\r\n\tgetId() {\r\n\t\treturn this._id;\r\n\t}\r\n\r\n\t/**\r\n\t * 获取绝对地址（弃用）\r\n\t */\r\n\tgetAbsoluteUrl() {\r\n\t\treturn this._im.get().src;\r\n\t}\r\n\r\n\t/**\r\n\t * 获取绝对地址(不含地址参数)\r\n\t */\r\n\tsrc() {\r\n\t\treturn this._im.get().src;\r\n\t}\r\n\r\n\t/**\r\n\t * 获取绝对地址(含地址参数)\r\n\t */\r\n\tscriptSrc() {\r\n\t\treturn this._im.get().scriptSrc;\r\n\t}\r\n\r\n\tgetName() {\r\n\t\treturn this._im.get().selfname;\r\n\t}\r\n\r\n\t/**\r\n\t * 获取在上级依赖数组中的索引位置\r\n\t */\r\n\tgetIndex() {\r\n\t\treturn this._im.get().index;\r\n\t}\r\n\r\n\t/**\r\n\t * 获取当前调用者的调用者\r\n\t */\r\n\tinvoker() {\r\n\t\treturn this._im.get().invoker;\r\n\t}\r\n\r\n\tabsUrl() { //用于获取其他模块地址的参考路径\r\n\t\treturn this._im.get().absUrlFromModule();\r\n\t}\r\n\r\n\texports() {\r\n\t\treturn this._im.get().exports;\r\n\t}\r\n\r\n\troot() {\r\n\t\tlet p = this.invoker();\r\n\t\treturn p ? p.invoker() : this;\r\n\t}\r\n}\r\n\r\nfunction getMineInvoker(thiz) {\r\n\tif (thiz instanceof ThisInvoker) {\r\n\t\treturn thiz.invoker;\r\n\t} else if (thiz instanceof Invoker) {\r\n\t\treturn thiz;\r\n\t} else if (thiz instanceof DefineObject) {\r\n\t\treturn thiz.thiz;\r\n\t}\r\n}\r\n\r\nfunction getInvoker(thiz, nullNew = true) {\r\n\tif (thiz instanceof ThisInvoker) {\r\n\t\treturn thiz.invoker;\r\n\t} else if (thiz instanceof Invoker) {\r\n\t\treturn thiz;\r\n\t} else if (thiz instanceof DefineObject) {\r\n\t\treturn thiz.thatInvoker;\r\n\t} else {\r\n\t\tlet parentModule = currentDefineModuleQueue.peek();\r\n\t\tif (parentModule) {\r\n\t\t\treturn parentModule.thiz;\r\n\t\t} else if (nullNew) {\r\n\t\t\tlet moduleMap = {\r\n\t\t\t\tmodule: \"\",\r\n\t\t\t\tsrc: thePageUrl,\r\n\t\t\t\tscriptSrc: location.href,\r\n\t\t\t\tabsUrl: () => thePageUrl,\r\n\t\t\t\tname: \"__root__\",\r\n\t\t\t\tinvoker: null\r\n\t\t\t};\r\n\t\t\treturn new Invoker(moduleMap);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nclass DefineObject {\r\n\tid = U.getAndIncIdCount();\r\n\tthiz;\r\n\tisRequire;\r\n\t_scriptSrc;\r\n\t_src;\r\n\tparentDefine;\r\n\thandle;\r\n\tselfname;\r\n\tdeps;\r\n\tcallback;\r\n\tthatInvoker;\r\n\t_directDepLength = 0;\r\n\tdirectDepLength = 0;\r\n\tnames = [];\r\n\tindex;\r\n\tconstructor(scriptSrc, src, thiz, args = [], isRequire = false /*, willDealConfigDeps = false*/ ) {\r\n\t\tthis.parentDefine = currentDefineModuleQueue.peek();\r\n\t\tthis.thatInvoker = getInvoker(thiz);\r\n\r\n\t\tthis.scriptSrc = scriptSrc;\r\n\t\tthis.src = src;\r\n\t\tthis.thiz = thiz;\r\n\t\tthis.isRequire = isRequire;\r\n\t\tthis.handle = {\r\n\t\t\tonError(err, invoker) {\r\n\t\t\t\tconsole.error(U.unwrapError(err));\r\n\t\t\t},\r\n\t\t\tbefore(deps) {},\r\n\t\t\tdepBefore(index, dep, depDeps) {},\r\n\t\t\torderDep: false,\r\n\t\t\tabsoluteUrl: undefined, //弃用\r\n\t\t\tabsUrl: undefined,\r\n\t\t\tinstance: undefined,\r\n\t\t};\r\n\r\n\t\tif (thiz instanceof ThisInvoker) {\r\n\t\t\t//this.handle.absUrl = thiz.invoker.src(); //设置默认参考地址\r\n\t\t\tthis.src = thiz.invoker.src();\r\n\t\t}\r\n\r\n\t\tlet selfname = args[0];\r\n\t\tlet deps = args[1];\r\n\t\tlet callback = args[2];\r\n\t\tif (args.length == 1) {\r\n\t\t\t//直接定义模块，且没有依赖\r\n\t\t\tcallback = selfname;\r\n\t\t\tselfname = null;\r\n\t\t\tdeps = null;\r\n\t\t} else if (typeof selfname !== 'string') {\r\n\t\t\tcallback = deps;\r\n\t\t\tdeps = selfname;\r\n\t\t\tselfname = null; //为空的、表示定义默认模块\r\n\t\t}\r\n\r\n\t\tif (deps && !L.isArray(deps)) {\r\n\t\t\tcallback = deps;\r\n\t\t\tdeps = null;\r\n\t\t}\r\n\r\n\t\tif (!deps) {\r\n\t\t\tdeps = [];\r\n\t\t} else {\r\n\t\t\tdeps = L.clone(deps);\r\n\t\t}\r\n\r\n\t\t//获取函数体里直接require('...')的依赖\r\n\t\t//if(!isRequire) {\r\n\t\tU.appendInnerDeps(deps, callback);\r\n\t\t//}\r\n\r\n\t\tthis.selfname = selfname;\r\n\t\tthis.deps = deps;\r\n\t\tthis.pushName(selfname);\r\n\t\tthis.callback = callback;\r\n\t\tthis._directDepLength = deps.length;\r\n\t\tthis.directDepLength = deps.length;\r\n\t}\r\n\r\n\tget src() {\r\n\t\treturn this._src;\r\n\t}\r\n\tset src(val) {\r\n\t\tthis._src = val;\r\n\t}\r\n\r\n\tget scriptSrc() {\r\n\t\treturn this._scriptSrc;\r\n\t}\r\n\r\n\tset scriptSrc(val) {\r\n\t\tthis._scriptSrc = val;\r\n\t}\r\n\r\n\tpushName(name) {\r\n\t\tif (name && L.indexInArray(this.names, name) == -1) {\r\n\t\t\tthis.names.push(name);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * 处理配置依赖及嵌套依赖,同时会替换前缀\r\n\t */\r\n\tappendConfigDepsAndEmbedDeps(module) {\r\n\t\tlet config = L.config();\r\n\t\tlet src = this.src;\r\n\t\tlet deps = this.deps;\r\n\r\n\t\tlet _deps = config.getDeps(src);\r\n\t\tU.each(_deps, (dep) => {\r\n\t\t\tif (L.indexInArray(deps, dep) == -1) {\r\n\t\t\t\tdeps.push(dep);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tU.each(this.names, (name) => {\r\n\t\t\t_deps = config.getDeps(name);\r\n\t\t\tU.each(_deps, (dep) => {\r\n\t\t\t\tif (L.indexInArray(deps, dep) == -1) {\r\n\t\t\t\t\tdeps.push(dep);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\tif (this.handle.orderDep && this._directDepLength > 1 && deps.length > this._directDepLength) {\r\n\t\t\tlet odeps = [true]; //第一个true表示顺序依赖\r\n\t\t\twhile (this._directDepLength-- > 0) {\r\n\t\t\t\todeps.push(deps.shift());\r\n\t\t\t}\r\n\t\t\tdeps.unshift(odeps);\r\n\t\t\tthis.handle.orderDep = false;\r\n\t\t}\r\n\r\n\t\t_dealEmbedDeps(deps, this); //处理嵌套依赖\r\n\r\n\t\t//替换项目别名；另见：prerequire\r\n\t\tfor (let i = 0; i < deps.length; i++) {\r\n\t\t\tlet dep = deps[i];\r\n\t\t\tdeps[i] = config.replaceDepAlias(deps[i]);\r\n\t\t}\r\n\r\n\t\tU.replaceModulePrefix(config, deps); //前缀替换\r\n\r\n\t\tif (module) {\r\n\t\t\tmodule.deps = deps;\r\n\t\t\tmodule._dealApplyArgs = (function(directDepLength, hasOrderDep) {\r\n\t\t\t\treturn function(applyArgs) {\r\n\t\t\t\t\tif (directDepLength == 0 || applyArgs.length == 0) {\r\n\t\t\t\t\t\treturn [];\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//顺序依赖,还原成最初的顺序,移除额外的依赖。\r\n\t\t\t\t\tlet args = new Array(directDepLength + 1);\r\n\t\t\t\t\tif (hasOrderDep) {\r\n\t\t\t\t\t\targs = applyArgs[0];\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tfor (var i = 0; i < directDepLength; i++) {\r\n\t\t\t\t\t\t\targs[i] = applyArgs[i];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\targs[directDepLength] = applyArgs[applyArgs.length - 1].slice(0, directDepLength);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn args;\r\n\t\t\t\t};\r\n\t\t\t})(this.directDepLength, this.directDepLength > 0 && this._directDepLength <= 0);\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tdealRelative(module) {\r\n\t\tlet deps = this.deps;\r\n\t\t//处理相对路径\r\n\t\tfor (let i = 0; i < deps.length; i++) {\r\n\t\t\t//console.log(module.selfname+(\"(\"+defineObject.handle.defined_module_for_deps+\")\"), \":\", deps);\r\n\t\t\tlet m = deps[i];\r\n\t\t\tlet jsFilePath = U.isJsFile(m);\r\n\r\n\t\t\t//替换相对路径为绝对路径\r\n\t\t\tif (jsFilePath && L.startsWith(m, \".\")) {\r\n\t\t\t\tm = U.getPathWithRelative(module.thiz.rurl(this), jsFilePath.path) + _getPluginParam(m);\r\n\t\t\t\tdeps[i] = m;\r\n\t\t\t}\r\n\r\n\t\t\tlet paths = U.graphPath.tryAddEdge(this.handle.defined_module_for_deps || module.selfname, m);\r\n\t\t\tif (paths.length > 0) {\r\n\t\t\t\tlet moduleLoop = moduleScript.getModule(m); //该模块必定已经被定义过\r\n\t\t\t\tmoduleLoop.loopObject = {};\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tabsUrlFromDefineObject() {\r\n\t\treturn this.handle.absUrl || this.handle.absoluteUrl || this.src;\r\n\t}\r\n\r\n}\r\n\r\n////////////////////////\r\n\r\n/**\r\n * 获取当前脚本，返回对象：\r\n * src:脚本绝对地址，不含参数\r\n * node:脚本dom对象\r\n */\r\nlet hasCurrentPath = false;\r\n\r\nfunction getCurrentScript() {\r\n\tfunction _getCurrentScriptOrSrc() { //兼容获取正在运行的js\r\n\t\t//取得正在解析的script节点\r\n\t\tif (document.currentScript !== undefined) { //firefox 4+\r\n\t\t\tlet node = document.currentScript && document.currentScript.src && document.currentScript;\r\n\t\t\tif (node) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tnode,\r\n\t\t\t\t\tsrc: node.src\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (U.IE_VERSION > 0 && U.IE_VERSION <= 10) {\r\n\t\t\tlet nodes = document.getElementsByTagName(\"script\"); //只在head标签中寻找\r\n\t\t\t//\t\t\tU.each(nodes, (node) => {\r\n\t\t\t//\t\t\t\tconsole.log(\"node.src=\" + node.src + \",node.readyState=\" + node.readyState);\r\n\t\t\t//\t\t\t});\r\n\t\t\tfor (let i = nodes.length - 1; i >= 0; i--) {\r\n\t\t\t\tlet node = nodes[i];\r\n\t\t\t\tif (node.readyState === \"interactive\" && node.src) {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tnode,\r\n\t\t\t\t\t\tsrc: node.src\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tlet stack;\r\n\t\ttry {\r\n\t\t\tlet a = undefined;\r\n\t\t\ta.b.c(); //强制报错,以便捕获e.stack\r\n\t\t} catch (e) { //safari的错误对象只有line,sourceId,sourceURL\r\n\t\t\tstack = e.stack || e.sourceURL || e.stacktrace || '';\r\n\t\t\tif (!stack && window.opera) {\r\n\t\t\t\t//opera 9没有e.stack,但有e.Backtrace,但不能直接取得,需要对e对象转字符串进行抽取\r\n\t\t\t\tstack = (String(e).match(/of linked script \\S+/g) || []).join(\" \");\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (stack) {\r\n\t\t\t/**e.stack最后一行在所有支持的浏览器大致如下:\r\n\t\t\t *chrome23:\r\n\t\t\t * at http://113.93.50.63/data.js:4:1\r\n\t\t\t *firefox17:\r\n\t\t\t *@http://113.93.50.63/query.js:4\r\n\t\t\t *opera12:\r\n\t\t\t *@http://113.93.50.63/data.js:4\r\n\t\t\t *IE10:\r\n\t\t\t *  at Global code (http://113.93.50.63/data.js:4:1)\r\n\t\t\t */\r\n\t\t\tstack = stack.split(/[@ ]/g).pop(); //取得最后一行,最后一个空格或@之后的部分\r\n\t\t\tstack = stack[0] == \"(\" ? stack.slice(1, -1) : stack;\r\n\t\t\tlet s = stack.replace(/(:\\d+)?:\\d+$/i, \"\"); //去掉行号与或许存在的出错字符起始位置\r\n\t\t\treturn {\r\n\t\t\t\tsrc: s\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n\r\n\tlet rs;\r\n\tlet parentDefine = currentDefineModuleQueue.peek();\r\n\tif (parentDefine) {\r\n\t\trs = {\r\n\t\t\tsrc: parentDefine.src\r\n\t\t};\r\n\t} else {\r\n\t\trs = _getCurrentScriptOrSrc();\r\n\t}\r\n\r\n\tif (!rs) {\r\n\t\trs = {\r\n\t\t\tsrc: thePageUrl\r\n\t\t};\r\n\t}\r\n\r\n\tif (U.isLoaderEnd() && rs.src == theLoaderUrl) {\r\n\t\trs.src = thePageUrl;\r\n\t\trs.node = null;\r\n\t}\r\n\r\n\tif (!rs.node && rs.src != thePageUrl) {\r\n\t\tlet src = U.removeQueryHash(rs.src);\r\n\t\tlet nodes = document.getElementsByTagName(\"script\"); //只在head标签中寻找\r\n\t\tfor (let i = 0; i < nodes.length; i++) {\r\n\t\t\tlet node = nodes[i];\r\n\t\t\tif (src == U.removeQueryHash(node.src)) {\r\n\t\t\t\trs.node = node;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tif (rs.node) {\r\n\t\tlet __src = rs.node.getAttribute(\"_current_path_src_\");\r\n\t\trs.src = __src || U.getNodeAbsolutePath(rs.node);\r\n\t}\r\n\r\n\thasCurrentPath = !!L.__currentPath;\r\n\r\n\tif (hasCurrentPath) {\r\n\t\tlet oldSrc = rs.src;\r\n\t\trs.srcBeforeCurrentPath = U.removeQueryHash(oldSrc);\r\n\t\trs.__currentPath = L.__currentPath;\r\n\t\trs.src = L.getPathWithRelative(oldSrc, L.__currentPath, false);\r\n\t\trs.src = L.appendArgs2Url(rs.src, oldSrc);\r\n\t\tL.__currentPath = undefined;\r\n\r\n\t\tif (rs.srcBeforeCurrentPath != U.removeQueryHash(rs.src)) {\r\n\t\t\trs.node.setAttribute(\"_current_path_src_\", rs.src);\r\n\t\t}\r\n\t}\r\n\r\n\trs.scriptSrc = rs.src;\r\n\trs.src = U.removeQueryHash(rs.src);\r\n\r\n\treturn rs;\r\n\r\n}\r\n\r\nfunction __createNode() {\r\n\tlet node = document.createElement('script');\r\n\tnode.type = 'text/javascript';\r\n\tnode.charset = 'utf-8';\r\n\tnode.async = \"async\";\r\n\treturn node;\r\n}\r\n\r\nfunction __removeListener(node, func, name, ieName) {\r\n\tif (node.detachEvent && !isOpera) {\r\n\t\tif (ieName) {\r\n\t\t\tnode.detachEvent(ieName, func);\r\n\t\t}\r\n\t} else {\r\n\t\tnode.removeEventListener(name, func, false);\r\n\t}\r\n}\r\n\r\n/**\r\n * callbackObj.onScriptLoad\r\n * callbackObj.onScriptError\r\n *\r\n */\r\nfunction __browserLoader(moduleName, url, callbackObj) {\r\n\tlet node = __createNode();\r\n\tmoduleName && node.setAttribute(DATA_ATTR_MODULE, moduleName);\r\n\tnode.setAttribute(DATA_ATTR_CONTEXT, defContextName);\r\n\r\n\tlet useAttach = !L.isFunction(node.addEventListener) && node.attachEvent &&\r\n\t\t!(node.attachEvent.toString && node.attachEvent.toString().indexOf('[native code') < 0) &&\r\n\t\t!isOpera;\r\n\r\n\tif (useAttach) {\r\n\t\tnode.attachEvent('onreadystatechange', callbackObj.onScriptLoad);\r\n\t} else {\r\n\t\tnode.addEventListener('load', callbackObj.onScriptLoad, true);\r\n\t\tlet errListen = function() {\r\n\t\t\t__removeListener(node, errListen, 'error');\r\n\t\t\tcallbackObj.onScriptError.apply(this, arguments);\r\n\t\t};\r\n\t\tcallbackObj.errListen = errListen;\r\n\t\tnode.addEventListener('error', errListen, true);\r\n\t}\r\n\tappendHeadDom(node);\r\n\tif (U.IE_VERSION > 0 && U.IE_VERSION <= 10) {\r\n\t\tL.asyncCall(() => {\r\n\t\t\tnode.src = url; //在ie10-以下，必须在脚本插入head后再进行src的设置、且需要异步设置。\r\n\t\t});\r\n\t} else {\r\n\t\tnode.src = url;\r\n\t}\r\n}\r\n\r\nfunction __getScriptData(evt, callbackObj) {\r\n\tlet node = evt.currentTarget || evt.srcElement;\r\n\t__removeListener(node, callbackObj.onScriptLoad, 'load', 'onreadystatechange');\r\n\t__removeListener(node, callbackObj.errListen, 'error');\r\n\tlet scriptSrc = node && U.getNodeAbsolutePath(node);\r\n\treturn {\r\n\t\tnode: node,\r\n\t\tname: node && node.getAttribute(DATA_ATTR_MODULE),\r\n\t\tsrc: U.removeQueryHash(scriptSrc),\r\n\t\tscriptSrc,\r\n\t};\r\n}\r\n\r\nfunction appendHeadDom(dom) {\r\n\tif (!L.isDOM(dom)) {\r\n\t\tthrow new Error(\"expected dom object,but provided:\" + dom);\r\n\t}\r\n\tlet nextDom = lastAppendHeadDom.nextSibling;\r\n\ttheHead.insertBefore(dom, nextDom);\r\n\t//\t\t\thead.appendChild(dom);\r\n\tlastAppendHeadDom = dom;\r\n}\r\n\r\n/////////////////////////\r\n\r\nfunction loadScript(moduleName, url, onload, onerror) {\r\n\tlet callbackObj = {};\r\n\tcallbackObj.onScriptLoad = function(evt) {\r\n\t\tif (callbackObj.removed) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (evt.type === 'load' || (readyRegExp.test((evt.currentTarget || evt.srcElement).readyState))) {\r\n\t\t\tcallbackObj.removed = true;\r\n\t\t\tlet scriptData = __getScriptData(evt, callbackObj);\r\n\t\t\tif (isSrcFromScriptLoad) {\r\n\t\t\t\tlastSrc = scriptData.src; //已经不含参数\r\n\t\t\t\tlastScriptSrc = scriptData.lastScriptSrc;\r\n\t\t\t\tL.asyncCall(() => {\r\n\t\t\t\t\tonload(scriptData);\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tif (U.IE_VERSION > 0 || U.IE_VERSION == \"edge\") { //ie下确保此事件在脚本之后执行。\r\n\t\t\t\t\tL.asyncCall(() => {\r\n\t\t\t\t\t\tonload(scriptData);\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tonload(scriptData);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tcallbackObj.onScriptError = function(evt) {\r\n\t\tif (callbackObj.removed) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tcallbackObj.removed = true;\r\n\t\tlet scriptData = __getScriptData(evt, callbackObj);\r\n\t\tonerror(scriptData);\r\n\t};\r\n\t__browserLoader(moduleName, url, callbackObj);\r\n}\r\n\r\nfunction doDefine(thiz, args, isRequire) {\r\n\t//\tconsole.log(\"**********************************[\");\r\n\tlet rs = getCurrentScript(); //已经不含参数\r\n\r\n\t//\tif(typeof args[0] == \"string\") {\r\n\t//\t\tconsole.log(\"args[0]=\" + args[0] + \",args[1]=\" + args[1] + \",src=\" + rs.src);\r\n\t//\t} else {\r\n\t//\t\tconsole.log(\"args[0]=\" + args[0] + \",src=\" + rs.src);\r\n\t//\t}\r\n\t//\tconsole.log(rs.node);\r\n\t//\tconsole.log(\"**********************************]\\n\");\r\n\tlet src = rs.src;\r\n\tlet scriptSrc = rs.scriptSrc;\r\n\tlet defineObject = new DefineObject(scriptSrc, src, thiz, args, isRequire);\r\n\tdefineObject.srcBeforeCurrentPath = rs.srcBeforeCurrentPath; //处理__currentPath前的\r\n\r\n\tif (!isSrcFromScriptLoad) {\r\n\t\ttry { //防止执行其他脚本\r\n\t\t\tif (defineObject.src) {\r\n\t\t\t\tlet node = document.currentScript;\r\n\t\t\t\tif (node && node.getAttribute(\"src\") && node.getAttribute(DATA_ATTR_CONTEXT) != defContextName &&\r\n\t\t\t\t\tdefineObject.src != theLoaderUrl && defineObject.src != thePageUrl) {\r\n\t\t\t\t\tconsole.error(\"unknown js script module:\" + L.xsJson2String(defineObject.src));\r\n\t\t\t\t\tconsole.error(node);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} catch (e) {\r\n\t\t\tL.config().error(e);\r\n\t\t}\r\n\t}\r\n\r\n\tlet handle = new Handle(defineObject);\r\n\r\n\tlet isLoaderEnd = U.isLoaderEnd();\r\n\tL.asyncCall(() => {\r\n\t\tif (isSrcFromScriptLoad && isLoaderEnd && !hasCurrentPath) {\r\n\t\t\t//执行顺序：当前脚本define>load事件(获取lastSrc)>当前位置>onload\r\n\t\t\tdefineObject.src = lastSrc;\r\n\t\t\tdefineObject.lastScriptSrc = lastScriptSrc;\r\n\t\t}\r\n\t\thasCurrentPath = false;\r\n\t\ttheRealDefine([defineObject]);\r\n\t});\r\n\treturn handle;\r\n}\r\n\r\nfunction predefine() {\r\n\tlet args = [];\r\n\tfor (let i = 0; i < arguments.length; i++) {\r\n\t\targs.push(arguments[i]);\r\n\t}\r\n\treturn doDefine(this, args, false);\r\n}\r\n\r\nlet isFirstRequire = true;\r\n\r\nfunction prerequire(deps, callback) {\r\n\tlet config = L.config();\r\n\tif (!config) { //require必须是在config之后\r\n\t\tthrow new Error(\"not config\");\r\n\t}\r\n\r\n\tlet thatInvoker = getInvoker(this);\r\n\tif (arguments.length == 1 && L.isString(deps)) { //获取已经加载的模块\r\n\t\tif (deps == \"exports\") { //当require(\"exports\")时，必须依赖了exports\r\n\t\t\tlet mineInvoker = getMineInvoker(this);\r\n\t\t\tlet exports = mineInvoker && mineInvoker.exports();\r\n\t\t\tif (!exports) {\r\n\t\t\t\tthrow new Error(\"not found exports\");\r\n\t\t\t} else {\r\n\t\t\t\treturn exports;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tlet originDep = deps;\r\n\t\tlet oneDep = deps;\r\n\t\tlet pluginArgs = undefined;\r\n\t\tlet pluginIndex = oneDep.indexOf(\"!\");\r\n\t\tif (pluginIndex > 0) {\r\n\t\t\tpluginArgs = oneDep.substring(pluginIndex + 1);\r\n\t\t\toneDep = oneDep.substring(0, pluginIndex);\r\n\t\t}\r\n\r\n\t\toneDep = config.replaceDepAlias(oneDep);\r\n\r\n\t\tlet module = moduleScript.getModule(oneDep);\r\n\t\tif (!module) {\r\n\t\t\toneDep = thatInvoker.getUrl(oneDep, false);\r\n\t\t\tmodule = moduleScript.getModule(oneDep);\r\n\t\t}\r\n\r\n\t\tif (!module) {\r\n\t\t\tthrow new Error(\"the module '\" + originDep + \"' is not load!\");\r\n\t\t} else if (module.state != \"defined\") {\r\n\t\t\tthrow new Error(\"the module '\" + originDep + \"' is not defined:\" + module.state);\r\n\t\t}\r\n\r\n\t\tlet theMod;\r\n\t\tmoduleScript.newModuleInstance(module, thatInvoker, (depModule) => {\r\n\t\t\ttheMod = depModule.moduleObject();\r\n\t\t}).initInstance(true, pluginArgs);\r\n\r\n\t\tif (theMod === undefined) {\r\n\t\t\tthrow Error(\"the module '\" + originDep + \"' is not load!\");\r\n\t\t}\r\n\t\treturn theMod;\r\n\t}\r\n\r\n\tlet selfname = L.randId(\"_require\");\r\n\tif (L.isFunction(deps)) {\r\n\t\tcallback = deps;\r\n\t\tdeps = [];\r\n\t} else if (!L.isArray(deps)) {\r\n\t\tthrow new Error(\"unexpected argument:\" + deps);\r\n\t}\r\n\tU.appendInnerDeps(deps, callback);\r\n\r\n\tlet timeid;\r\n\tlet tagString;\r\n\tlet loading;\r\n\tlet isOk = false;\r\n\tlet customerErrCallback;\r\n\tlet isErr;\r\n\tif (isFirstRequire && config.plugins.loading.enable) {\r\n\t\tisFirstRequire = false;\r\n\t\tsetTimeout(() => {\r\n\t\t\tif (!isOk) {\r\n\t\t\t\tloading = new U.ToProgress(config.plugins.loading);\r\n\t\t\t\tloading.autoIncrement();\r\n\t\t\t\tif (isErr) {\r\n\t\t\t\t\tloading.toError(config.plugins.loading.errColor);\r\n\t\t\t\t\tloading = null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}, config.plugins.loading.delay);\r\n\t}\r\n\tlet clearTimer = function(isErr = false) {\r\n\t\tif (loading) {\r\n\t\t\tif (isErr) {\r\n\t\t\t\tloading.toError(config.plugins.loading.errColor);\r\n\t\t\t} else {\r\n\t\t\t\tloading.stopAuto();\r\n\t\t\t\tloading.finish();\r\n\t\t\t}\r\n\t\t\tloading = null;\r\n\t\t}\r\n\t\tif (timeid !== undefined) {\r\n\t\t\tclearTimeout(timeid);\r\n\t\t\ttimeid = undefined;\r\n\t\t}\r\n\t};\r\n\r\n\tlet handle = doDefine(this, [selfname, deps, function() {\r\n\t\tisOk = true;\r\n\t\tclearTimer();\r\n\t\t//\t\tconsole.log(\"2======require:\"+selfname);\r\n\t\t//\t\tconsole.log(callback);\r\n\t\tif (L.isFunction(callback)) {\r\n\t\t\ttry {\r\n\t\t\t\tcallback.apply(this, arguments);\r\n\t\t\t} catch (e) {\r\n\t\t\t\thandle.onError(e);\r\n\t\t\t}\r\n\t\t}\r\n\t}], true);\r\n\thandle.waitTime = config.waitSeconds * 1000;\r\n\r\n\thandle.logError = function(err, invoker, logFun = \"error\") {\r\n\t\tinvoker && console[logFun](\"invoker.url=\", invoker.getUrl());\r\n\t\tthatInvoker && console[logFun](\"require.invoker.url=\", thatInvoker.getUrl());\r\n\t\tconsole[logFun](U.unwrapError(err));\r\n\t};\r\n\r\n\tlet checkResultFun = (forTimeout = false) => {\r\n\t\ttry {\r\n\t\t\tif (!checkResultFun) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tlet ifmodule = moduleScript.getModule(selfname);\r\n\t\t\t//console.log(isErr)\r\n\t\t\tif ((!ifmodule || ifmodule.state != 'defined') && (isErr || forTimeout)) {\r\n\r\n\t\t\t\tif (forTimeout) {\r\n\t\t\t\t\thandle.onError(\r\n\t\t\t\t\t\t`require timeout:${tagString?'tag='+tagString:''},\\n` +\r\n\t\t\t\t\t\t`\\tdeps=[${deps ? deps.join(\",\") : \"\"}]\\n` +\r\n\t\t\t\t\t\t`${thatInvoker?'\\tinvokerSrc='+thatInvoker.src():''}`\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (ifmodule) {\r\n\t\t\t\t\tU.each(ifmodule.deps, (dep) => {\r\n\t\t\t\t\t\tif (thatInvoker) {\r\n\t\t\t\t\t\t\tdep = thatInvoker.getUrl(dep, false);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tlet mod = moduleScript.getModule(dep);\r\n\t\t\t\t\t\tif (mod && mod.printOnNotDefined) {\r\n\t\t\t\t\t\t\tmod.printOnNotDefined();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} catch (e) {\r\n\t\t\tconsole.error(e);\r\n\t\t}\r\n\t\tclearTimer();\r\n\t};\r\n\r\n\thandle.error(function(err, invoker) {\r\n\t\tclearTimer(true);\r\n\t\tif (customerErrCallback) {\r\n\t\t\tlet result = customerErrCallback.call(handle, err, invoker);\r\n\t\t\tif (result && result.ignoreErrState) {\r\n\t\t\t\treturn result;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tisErr = !!err;\r\n\t\ttry {\r\n\t\t\thandle.logError(err, invoker);\r\n\t\t} catch (e) {\r\n\t\t\tconsole.warn(e);\r\n\t\t}\r\n\r\n\t\tif (checkResultFun) {\r\n\t\t\tlet fun = checkResultFun;\r\n\t\t\tcheckResultFun = null;\r\n\t\t\tfun();\r\n\t\t}\r\n\t});\r\n\r\n\thandle.error = function(errCallback) {\r\n\t\tcustomerErrCallback = errCallback;\r\n\t\treturn this;\r\n\t};\r\n\r\n\thandle.setTag = function(tag) {\r\n\t\ttagString = tag;\r\n\t\treturn this;\r\n\t};\r\n\r\n\tif (handle.waitTime) {\r\n\t\ttimeid = setTimeout(() => {\r\n\t\t\tcheckResultFun(true)\r\n\t\t}, handle.waitTime);\r\n\t}\r\n\r\n\tif (typeof Promise != \"undefined\" && arguments.length == 1 && !callback) {\r\n\t\tlet promise = new Promise((resolve, inject) => {\r\n\t\t\tcallback = function() {\r\n\t\t\t\tif (deps.length == 1) {\r\n\t\t\t\t\tresolve(arguments[0]);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlet args = [];\r\n\t\t\t\t\tfor (var i = 0; i < deps.length; i++) {\r\n\t\t\t\t\t\targs.push(arguments[i]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tresolve(args);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\thandle.error((err) => {\r\n\t\t\t\tcallback = null;\r\n\t\t\t\tinject(err);\r\n\t\t\t});\r\n\t\t});\r\n\t\treturn promise;\r\n\t}\r\n\r\n\treturn handle;\r\n}\r\n\r\n//对于safari7-:在脚本加载事件中可获得正确的脚本地址\r\n\r\n//initDefine在../define.js里进行初始化\r\nconst initDefine = function(theDefine) {\r\n\ttheRealDefine = (defines, loaded) => {\r\n\t\tif (!L.config()) { //还没有配置\r\n\t\t\tglobalDefineQueue.push(defines);\r\n\t\t} else {\r\n\t\t\ttheDefine(defines, loaded);\r\n\t\t}\r\n\t};\r\n\treturn {\r\n\t\tpredefine,\r\n\t\tprerequire,\r\n\t};\r\n};\r\n\r\nconst onConfigedCallback = function() {\r\n\twhile (globalDefineQueue.length) {\r\n\t\tlet defines = globalDefineQueue.shift();\r\n\t\ttheRealDefine(defines);\r\n\t}\r\n};\r\n\r\nexport default {\r\n\tdefContextName,\r\n\ttheLoaderScript,\r\n\tlastAppendHeadDom: function() {\r\n\t\treturn lastAppendHeadDom;\r\n\t},\r\n\ttheLoaderUrl,\r\n\tthePageUrl,\r\n\thead: function() {\r\n\t\treturn theHead;\r\n\t},\r\n\tappendHeadDom,\r\n\tinitDefine,\r\n\tHandle,\r\n\tInvoker,\r\n\tDefineObject,\r\n\tloadScript,\r\n\tcurrentDefineModuleQueue,\r\n\tonConfigedCallback,\r\n\tINNER_DEPS_PLUGIN,\r\n\tinnerDepsMap,\r\n};\r\n","import loader from './loader.js';\r\nimport \"../public/index.js\";\r\nimport U from \"../util/index.js\";\r\n\r\nconst L = U.global.xsloader;\r\n\r\nimport script from \"./script.js\";\r\nimport moduleScript from \"./module.js\";\r\n\r\nlet theContext;\r\nlet theConfig;\r\nlet argsObject = {};\r\n\r\nL.config = function() {\r\n\treturn theConfig;\r\n};\r\nL.script = function() {\r\n\treturn script.theLoaderScript;\r\n};\r\n\r\nL.lastAppendHeadDom = function() {\r\n\treturn script.lastAppendHeadDom();\r\n};\r\n\r\nL.scriptSrc = function() {\r\n\treturn script.theLoaderUrl;\r\n};\r\n\r\nL.putUrlArgs = function(argsObj) {\r\n\targsObject = L.extend(argsObject, argsObj);\r\n};\r\n\r\nL.getUrlArgs = function() {\r\n\tlet obj = L.extend({}, argsObject);\r\n\treturn obj;\r\n};\r\n\r\nL.clearUrlArgs = function() {\r\n\targsObject = {};\r\n};\r\n\r\nL.appendHeadDom = script.appendHeadDom;\r\n\r\nL.hasDefine = function(name) {\r\n\tlet has = false;\r\n\tlet module = moduleScript.getModule(name);\r\n\tif (!module || module.state === undefined //可能是preDependModule：预依赖模块\r\n\t\t||\r\n\t\tmodule.state == \"init\") {\r\n\t\thas = false;\r\n\t} else {\r\n\t\thas = true;\r\n\t}\r\n\treturn has;\r\n};\r\n\r\nL.hasDefined = function(name) {\r\n\tlet has = false;\r\n\tlet module = moduleScript.getModule(name);\r\n\tif (module && module.state == \"defined\") {\r\n\t\thas = true;\r\n\t}\r\n\treturn has;\r\n};\r\n\r\n//用于把\"group:project:version\"转换成url地址,返回一个String或包含多个url地址的数组\r\nL.resUrlBuilder = function(groupName) {\r\n\tthrow new Error('resUrlBuilder not found!');\r\n};\r\n\r\nL.clear_module_ = function() {\r\n\tlet modules = arguments;\r\n\tfor (let i = 0; i < modules.length; i++) {\r\n\t\tif (modules[i]) {\r\n\t\t\tdelete modules[i]._module_;\r\n\t\t\tdelete modules[i]._modules_;\r\n\t\t}\r\n\t}\r\n};\r\n\r\nfunction _newContext() {\r\n\tlet context = {\r\n\t\tcontextName: script.contextName,\r\n\t\tdefQueue: []\r\n\t};\r\n\treturn context;\r\n}\r\n\r\nloader.loaderFun((option) => {\r\n\tif (theContext) {\r\n\t\tthrow new Error(\"already configed!\");\r\n\t}\r\n\toption = L.extend({\r\n\t\tbaseUrl: U.getPathWithRelative(location.pathname, \"./\", L.endsWith(location.pathname, \"/\")),\r\n\t\turlArgs: {},\r\n\t\tignoreProperties: false,\r\n\t\tpaths: {},\r\n\t\tdepsPaths: {},\r\n\t\taliasPaths: {},\r\n\t\tdeps: {},\r\n\t\tjsExts: undefined,\r\n\t\tautoExt: true,\r\n\t\tautoExtSuffix: \".*\",\r\n\t\tproperties: {},\r\n\t\tmodulePrefix: {},\r\n\t\tdefineFunction: {},\r\n\t\tmodulePrefixCount: 0,\r\n\t\twaitSeconds: 20,\r\n\t\tautoUrlArgs() {\r\n\t\t\treturn false;\r\n\t\t},\r\n\t\tinstance: \"single\",\r\n\t\tdealtDeps: {},\r\n\t\tdealProperties(obj) {\r\n\t\t\treturn U.propertiesDeal(obj, option.properties);\r\n\t\t},\r\n\t\tisInUrls(m) {\r\n\t\t\treturn !!this.getUrls(m);\r\n\t\t},\r\n\t\tgetUrls(m) {\r\n\t\t\treturn this.paths[m] || this.depsPaths[m];\r\n\t\t},\r\n\t\tgetDeps(m) {\r\n\t\t\tlet as = this.dealtDeps[m] || [];\r\n\t\t\tlet deps = [];\r\n\t\t\tlet hasOrderDep = undefined;\r\n\r\n\t\t\tif (as.length > 0 && (as[0] === true || as[0] === false)) {\r\n\t\t\t\tif (as[0]) {\r\n\t\t\t\t\tdeps = [\r\n\t\t\t\t\t\t[]\r\n\t\t\t\t\t];\r\n\t\t\t\t\thasOrderDep = true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tas.splice(0, 1);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfor (let i = 0; i < as.length; i++) {\r\n\t\t\t\tif (hasOrderDep === true) {\r\n\t\t\t\t\tdeps[0].push(as[i]);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdeps.push(as[i]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn deps;\r\n\t\t},\r\n\t\tdealUrl(module, url, addVersion = false) {\r\n\t\t\tlet urlArgs = this.getUrlArgs(module, url, addVersion);\r\n\t\t\treturn L.appendArgs2Url(url, urlArgs);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 获取待添加的参数\r\n\t\t */\r\n\t\tgetUrlArgs(module, url, addVersion = false) {\r\n\t\t\tlet urlArg;\r\n\t\t\tlet nameOrUrl;\r\n\t\t\tif (this.autoUrlArgs()) {\r\n\t\t\t\turlArg = \"_t=\" + new Date().getTime();\r\n\t\t\t} else {\r\n\t\t\t\tlet moduleName;\r\n\t\t\t\tlet src;\r\n\t\t\t\tif (L.isString(module)) {\r\n\t\t\t\t\tmoduleName = module;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tmoduleName = module.selfname;\r\n\t\t\t\t\tsrc = module.src;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//精确匹配优先\r\n\r\n\t\t\t\t//先尝试模块名\r\n\t\t\t\turlArg = this.urlArgs[moduleName];\r\n\t\t\t\tif (!urlArg) {\r\n\t\t\t\t\turlArg = this.forPrefixSuffix(moduleName);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//再尝试提供的url\r\n\t\t\t\tif (!urlArg && url) {\r\n\t\t\t\t\turlArg = this.urlArgs[url];\r\n\t\t\t\t\tif (!urlArg) {\r\n\t\t\t\t\t\turlArg = this.forPrefixSuffix(url);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//接着尝试模块src\r\n\t\t\t\tif (!urlArg && src) {\r\n\t\t\t\t\turlArg = this.urlArgs[src];\r\n\t\t\t\t\tif (!urlArg) {\r\n\t\t\t\t\t\turlArg = this.forPrefixSuffix(src);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//最后尝试通用的\r\n\t\t\t\tif (!urlArg) {\r\n\t\t\t\t\turlArg = this.urlArgs[\"*\"];\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif (L.isFunction(urlArg)) {\r\n\t\t\t\turlArg = urlArg.call(this, nameOrUrl);\r\n\t\t\t}\r\n\r\n\t\t\tif (!urlArg) {\r\n\t\t\t\turlArg = \"\";\r\n\t\t\t}\r\n\r\n\t\t\tfor (let k in argsObject) { //加入全局的参数\r\n\t\t\t\turlArg += \"&\" + k + \"=\" + encodeURIComponent(argsObject[k]);\r\n\t\t\t}\r\n\r\n\t\t\tif (addVersion && this.props.addVersion) {\r\n\t\t\t\turlArg += \"&_xsv=\" + encodeURIComponent(L.env.version);\r\n\t\t\t}\r\n\r\n\t\t\treturn urlArg;\r\n\t\t},\r\n\t\tdealUrlArgs(url) {\r\n\t\t\turl = U.getPathWithRelative(location.href, url);\r\n\t\t\treturn this.dealUrl(url, url);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 替换模块别名\r\n\t\t * @param {Object} dep 不以\".\"开头\r\n\t\t */\r\n\t\treplaceDepAlias(dep) {\r\n\t\t\tif (!L.startsWith(dep, '.') && this.aliasPaths[dep]) {\r\n\t\t\t\tdep = this.aliasPaths[dep];\r\n\t\t\t}\r\n\r\n\t\t\treturn dep;\r\n\t\t},\r\n\t\tdefaultVersion: {},\r\n\t\tplugins: {},\r\n\t\tprops: {},\r\n\t}, option);\r\n\r\n\toption.props = L.extend({\r\n\t\taddVersion: true,\r\n\t\tinnerDepType: \"auto\", //auto,require.get,require,disable\r\n\t}, option.props);\r\n\r\n\toption.plugins.loading = L.extend({\r\n\t\tenable: true,\r\n\t\tcolor: '#2196f3',\r\n\t\tbgColor: 'rgba(0,0,0,0.1)',\r\n\t\terrColor: '#f5222d',\r\n\t\tduration: 0.2,\r\n\t\theight: 1,\r\n\t\tdelay: 500,\r\n\t}, option.plugins.loading);\r\n\r\n\tif (L.domAttr(script.theLoaderScript, \"disable-loading\") !== undefined) {\r\n\t\toption.plugins.loading.enable = false;\r\n\t}\r\n\r\n\toption.plugins.image = L.extend({\r\n\t\ttimeout: 10000, //超时时间，毫秒\r\n\t}, option.plugins.image);\r\n\r\n\toption.plugins.xsmsg = L.extend({\r\n\t\ttimeout: 30000, //连接超时时间，毫秒\r\n\t\tsleep: 500, //连接检测的休眠时间，毫秒\r\n\t}, option.plugins.xsmsg);\r\n\r\n\toption.plugins.ifmsg = L.extend({\r\n\t\tconnTimeout: 30000, //连接超时时间，毫秒\r\n\t\tsleepTimeout: 20, //连接检测的休眠时间，毫秒\r\n\t}, option.plugins.ifmsg);\r\n\r\n\tif (!L.endsWith(option.baseUrl, \"/\")) {\r\n\t\toption.baseUrl += \"/\";\r\n\t}\r\n\toption.baseUrl = U.getPathWithRelative(location.href, option.baseUrl);\r\n\r\n\tif (!option.ignoreProperties) {\r\n\t\toption = option.dealProperties(option);\r\n\t}\r\n\r\n\tU.strValue2Arr(option.paths);\r\n\tU.strValue2Arr(option.depsPaths);\r\n\tU.strValue2Arr(option.deps);\r\n\r\n\tif (!L.isFunction(option.autoUrlArgs)) {\r\n\t\tlet isAutoUrlArgs = option.autoUrlArgs;\r\n\t\toption.autoUrlArgs = function() {\r\n\t\t\treturn isAutoUrlArgs;\r\n\t\t};\r\n\t}\r\n\r\n\tlet modulePrefixCount = 0;\r\n\tfor (let prefix in option.modulePrefix) {\r\n\t\tif (L.startsWith(prefix, \".\") || L.startsWith(prefix, \"/\")) {\r\n\t\t\tthrow new Error(\"modulePrefix can not start with '.' or '/'(\" + prefix + \")\");\r\n\t\t}\r\n\t\tmodulePrefixCount++;\r\n\t}\r\n\toption.modulePrefixCount = modulePrefixCount;\r\n\tif (modulePrefixCount > 0) {\r\n\t\t//替换urlArgs中地址前缀\r\n\t\tlet star = option.urlArgs[\"*\"];\r\n\t\tdelete option.urlArgs[\"*\"];\r\n\r\n\t\tlet urlArgsArr = [];\r\n\t\tfor (let k in option.urlArgs) {\r\n\t\t\tlet url = k;\r\n\t\t\tif (U.isJsFile(url)) { //处理相对\r\n\t\t\t\tif (L.startsWith(url, \".\") || L.startsWith(url, \"/\") && !L.startsWith(url, \"//\")) {\r\n\t\t\t\t\turl = U.getPathWithRelative(script.theLoaderUrl, url);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlet absolute = U.dealPathMayAbsolute(url);\r\n\t\t\t\t\tif (absolute.absolute) {\r\n\t\t\t\t\t\turl = absolute.path;\r\n\t\t\t\t\t} else if (!L.startsWith(url, \"*]\")) { //排除*]；单*[可以有前缀\r\n\t\t\t\t\t\turl = option.baseUrl + url;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t\turlArgsArr.push({\r\n\t\t\t\turl: url,\r\n\t\t\t\targs: option.urlArgs[k]\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tfor (let prefix in option.modulePrefix) {\r\n\t\t\tlet replaceStr = option.modulePrefix[prefix].replace;\r\n\t\t\tfor (let i = 0; i < urlArgsArr.length; i++) {\r\n\t\t\t\tlet urlArgObj = urlArgsArr[i];\r\n\t\t\t\tlet starP = \"\";\r\n\t\t\t\tif (L.startsWith(urlArgObj.url, \"*[\")) {\r\n\t\t\t\t\tstarP = \"*[\";\r\n\t\t\t\t\turlArgObj.url = urlArgObj.url.substring(2);\r\n\t\t\t\t}\r\n\t\t\t\tif (L.startsWith(urlArgObj.url, prefix)) {\r\n\t\t\t\t\turlArgObj.url = replaceStr + urlArgObj.url.substring(prefix.length);\r\n\t\t\t\t}\r\n\t\t\t\tstarP && (urlArgObj.url = starP + urlArgObj.url);\r\n\t\t\t}\r\n\t\t}\r\n\t\toption.urlArgs = {};\r\n\t\toption.urlArgs[\"*\"] = star;\r\n\t\tfor (let i = 0; i < urlArgsArr.length; i++) {\r\n\t\t\tlet urlArgObj = urlArgsArr[i];\r\n\t\t\toption.urlArgs[urlArgObj.url] = urlArgObj.args;\r\n\t\t}\r\n\t}\r\n\r\n\t//预处理urlArgs中的*[与*]\r\n\tlet _urlArgs_prefix = [];\r\n\tlet _urlArgs_suffix = [];\r\n\toption._urlArgs_prefix = _urlArgs_prefix;\r\n\toption._urlArgs_suffix = _urlArgs_suffix;\r\n\r\n\tfor (let k in option.urlArgs) {\r\n\t\tlet url = k;\r\n\t\tif (L.startsWith(url, \"*[\")) {\r\n\t\t\tlet strfix = url.substring(2);\r\n\t\t\tif (L.startsWith(strfix, \".\") || L.startsWith(strfix, \"/\") && !L.startsWith(strfix, \"//\")) {\r\n\t\t\t\tstrfix = U.getPathWithRelative(script.theLoaderUrl, strfix);\r\n\t\t\t} else {\r\n\t\t\t\tlet absolute = U.dealPathMayAbsolute(strfix);\r\n\t\t\t\tif (absolute.absolute) {\r\n\t\t\t\t\tstrfix = absolute.path;\r\n\t\t\t\t} else {\r\n\t\t\t\t\turl = option.baseUrl + url;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t_urlArgs_prefix.push({\r\n\t\t\t\tstrfix: strfix,\r\n\t\t\t\tvalue: option.urlArgs[k]\r\n\t\t\t});\r\n\t\t\tdelete option.urlArgs[k];\r\n\t\t} else if (L.startsWith(url, \"*]\")) {\r\n\t\t\t_urlArgs_suffix.push({\r\n\t\t\t\tstrfix: url.substring(2),\r\n\t\t\t\tvalue: option.urlArgs[k]\r\n\t\t\t});\r\n\t\t\tdelete option.urlArgs[k];\r\n\t\t}\r\n\t}\r\n\r\n\toption.forPrefixSuffix = function(urlOrName) {\r\n\t\t//前缀判断\r\n\t\tfor (let i = 0; i < _urlArgs_prefix.length; i++) {\r\n\t\t\tlet strfixObj = _urlArgs_prefix[i];\r\n\t\t\tif (L.startsWith(urlOrName, strfixObj.strfix)) {\r\n\t\t\t\tlet value;\r\n\t\t\t\tif (L.isFunction(strfixObj.value)) {\r\n\t\t\t\t\tvalue = strfixObj.value.call(this, urlOrName);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvalue = strfixObj.value;\r\n\t\t\t\t}\r\n\t\t\t\treturn value;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//后缀判断\r\n\t\tfor (let i = 0; i < _urlArgs_suffix.length; i++) {\r\n\t\t\tlet strfixObj = _urlArgs_suffix[i];\r\n\t\t\tif (L.endsWith(urlOrName, strfixObj.strfix)) {\r\n\t\t\t\tlet value;\r\n\t\t\t\tif (L.isFunction(strfixObj.value)) {\r\n\t\t\t\t\tvalue = strfixObj.value.call(this, urlOrName);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvalue = strfixObj.value;\r\n\t\t\t\t}\r\n\t\t\t\treturn value;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tfor (let name in option.paths) {\r\n\t\tU.replaceModulePrefix(option, option.paths[name]); //前缀替换\r\n\t}\r\n\tfor (let name in option.depsPaths) {\r\n\t\tU.replaceModulePrefix(option, option.depsPaths[name]); //前缀替换\r\n\t}\r\n\r\n\t//处理依赖\r\n\tlet dealtDeps = option.dealtDeps;\r\n\r\n\tlet pushDeps = (dealtDepArray, depsArray) => {\r\n\t\tU.each(depsArray, (dep) => {\r\n\t\t\tdealtDepArray.push(dep);\r\n\t\t});\r\n\t};\r\n\r\n\tfor (let keyName in option.deps) {\r\n\t\tlet paths = keyName.split('::');\r\n\t\tlet depsArray = option.deps[keyName];\r\n\t\tU.each(paths, (path) => {\r\n\t\t\tif (path == '*') {\r\n\t\t\t\tfor (let m in option.depsPaths) {\r\n\t\t\t\t\tlet dealtDepArray = dealtDeps[m] = dealtDeps[m] || [];\r\n\t\t\t\t\tpushDeps(dealtDepArray, depsArray);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tlet dealtDepArray = (dealtDeps[path] = dealtDeps[path] || []);\r\n\t\t\t\tpushDeps(dealtDepArray, depsArray);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\ttheConfig = option;\r\n\ttheContext = _newContext();\r\n\tscript.onConfigedCallback(); //完成配置回调\r\n\treturn theConfig;\r\n});\r\n","import U from \"./util/index.js\";\r\nimport script from \"./core/script.js\";\r\nimport moduleScript from \"./core/module.js\";\r\n\r\nconst G = U.global;\r\nconst L = G.xsloader;\r\n\r\nconst defineHandle = script.initDefine(function theRealDefine(defines, loaded = () => {}) {\r\n\tU.each(defines, (defineObject) => {\r\n\t\tif (L.isFunction(defineObject.callback)) {\r\n\t\t\tlet originCallback = defineObject.callback;\r\n\t\t\tdefineObject.callback = function() {\r\n\t\t\t\t//\t\t\t\tif(defineObject.isRequire) {\r\n\t\t\t\t//\t\t\t\t\tconsole.log(\"1======require:\" + defineObject.selfname);\r\n\t\t\t\t//\t\t\t\t\tconsole.log(defineObject);\r\n\t\t\t\t//\t\t\t\t\tconsole.log(originCallback);\r\n\t\t\t\t//\t\t\t\t}\r\n\t\t\t\tlet config = L.config();\r\n\t\t\t\tlet rt;\r\n\r\n\t\t\t\tlet defineFun;\r\n\t\t\t\tU.each(defineObject.names, (name) => {\r\n\t\t\t\t\tlet fun = config.defineFunction[name];\r\n\t\t\t\t\tif (L.isFunction(fun)) {\r\n\t\t\t\t\t\tdefineFun = fun;\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif (defineFun) {\r\n\t\t\t\t\tlet args = [];\r\n\t\t\t\t\tfor (let i = 0; i < arguments.length; i++) {\r\n\t\t\t\t\t\targs.push(arguments[i]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\trt = defineFun.apply(this, [originCallback, this, args]);\r\n\t\t\t\t} else {\r\n\t\t\t\t\trt = originCallback.apply(this, arguments);\r\n\t\t\t\t}\r\n\r\n\t\t\t\toriginCallback = null;\r\n\t\t\t\treturn rt;\r\n\t\t\t};\r\n\t\t}\r\n\t\tonModuleLoaded(defineObject, moduleScript.getLastDefineObject(defineObject.src));\r\n\t\tloaded();\r\n\t});\r\n});\r\n\r\n/**\r\n * 当前模块脚本已经完成加载、但其依赖的模块可能需要加载。\r\n * 当前模块：src、selfname已经确定。\r\n * 若当前模块依赖为0、则可以直接finish；若当前模块存在其他依赖、则设置回调，等待被其他地方依赖时再触发。\r\n * @param {Object} defineObject 当前模块\r\n * @param {Object} lastDefineObject 第一次加载当前模块的模块\r\n */\r\nfunction onModuleLoaded(defineObject, lastDefineObject) {\r\n\t//同一个模块可能分属于不同的module对象，加载者module当前处于loading状态、需要将其依赖追加进来、确保依赖完整\r\n\tmoduleScript.appendLoadingModuleDeps(defineObject);\r\n\t//先根据src获取模块\r\n\tlet ifmodule = moduleScript.getModule(defineObject.src, defineObject.selfname);\r\n\r\n\tlet moduleBeforeCurrentPath;\r\n\tif (!ifmodule && defineObject.srcBeforeCurrentPath) { //根据处理__currentPath前的地址获取模块\r\n\t\tmoduleBeforeCurrentPath = moduleScript.getModule(defineObject.srcBeforeCurrentPath);\r\n\t}\r\n\r\n\tif (ifmodule) {\r\n\t\tif (ifmodule.state == \"loading\") {\r\n\t\t\tifmodule.reinitByDefineObject(defineObject);\r\n\t\t}\r\n\t} else {\r\n\t\tifmodule = moduleScript.newModule(defineObject);\r\n\t\tmoduleBeforeCurrentPath && moduleBeforeCurrentPath.toOtherModule(ifmodule);\r\n\t}\r\n\r\n\tif (defineObject.selfname != defineObject.src) {\r\n\t\tdefineObject.pushName(defineObject.selfname);\r\n\t}\r\n\r\n\tif (ifmodule.selfname != defineObject.src) {\r\n\t\t//此处的名字可能由配置指定\r\n\t\tdefineObject.pushName(ifmodule.selfname);\r\n\t}\r\n\t//一个模块的所有名字，包括src\r\n\tU.each(defineObject.names, (name) => {\r\n\t\tmoduleScript.setModule(name, ifmodule);\r\n\t\tif (L.ignoreAspect_[name]) {\r\n\t\t\tifmodule.ignoreAspect = true;\r\n\t\t}\r\n\t});\r\n\tdefineObject.appendConfigDepsAndEmbedDeps(ifmodule); //添加配置依赖:在配置文件里直接通过src、名称配置的\r\n\r\n\tlet module = ifmodule;\r\n\r\n\tif (defineObject.handle.before) {\r\n\t\tdefineObject.handle.before(module.deps);\r\n\t}\r\n\tif (lastDefineObject && lastDefineObject.handle.depBefore) {\r\n\t\tlastDefineObject.handle.depBefore(lastDefineObject.index, module.selfname, module.deps, 2);\r\n\t}\r\n\r\n\tmodule.setState(\"loaded\");\r\n\tmodule.setInstanceType(defineObject.handle.instance || L.config().instance);\r\n\r\n\tif (module.deps.length == 0) {\r\n\t\ttry {\r\n\t\t\tmodule.finish([]); //递归结束\r\n\t\t} catch (e) {\r\n\t\t\tdefineObject.handle.onError(e);\r\n\t\t}\r\n\t} else {\r\n\t\t//在其他模块依赖此模块时进行加载\r\n\t\tlet needCallback = function() {\r\n\t\t\tmoduleScript.everyRequired(defineObject, module, (depModules) => {\r\n\t\t\t\tlet args = [];\r\n\t\t\t\tlet depModuleArgs = [];\r\n\t\t\t\tU.each(depModules, (depModule) => {\r\n\t\t\t\t\tdepModuleArgs.push(depModule);\r\n\t\t\t\t\targs.push(depModule && depModule.moduleObject());\r\n\t\t\t\t});\r\n\t\t\t\targs.push(depModuleArgs);\r\n\t\t\t\ttry {\r\n\t\t\t\t\tmodule.finish(args);\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tdefineObject.handle.onError(e);\r\n\t\t\t\t}\r\n\t\t\t}, (err, invoker) => {\r\n\t\t\t\treturn defineObject.handle.onError(err, invoker);\r\n\t\t\t});\r\n\t\t};\r\n\r\n\t\tif (defineObject.isRequire) {\r\n\t\t\tneedCallback();\r\n\t\t} else {\r\n\t\t\tmodule.whenNeed(needCallback);\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\n//定义模块\r\nconst define = function() {\r\n\treturn defineHandle.predefine.apply(this, arguments);\r\n};\r\n\r\nconst require = function() {\r\n\treturn defineHandle.prerequire.apply(this, arguments);\r\n};\r\n\r\nrequire.get = function(name) {\r\n\tif (!L.isString(name)) {\r\n\t\tthrow new Error(\"expected string type for module name\");\r\n\t} else {\r\n\t\treturn require.call(this, name);\r\n\t}\r\n};\r\n\r\nrequire.has = function() {\r\n\tvar args = arguments;\r\n\tif (args.length == 0) {\r\n\t\treturn false;\r\n\t}\r\n\tfor (var i = 0; i < args.length; i++) {\r\n\t\tvar module = moduleScript.getModule(args[i]);\r\n\t\tif (!module || module.state != \"defined\") {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\treturn true;\r\n};\r\n\r\nL.define = define;\r\n//deprecated\r\nL.defineAsync = define;\r\nL.require = require;\r\nG.define = define;\r\nG.require = require;\r\n\r\ndefine.amd = true;\r\n\r\n//声明exports,内部会做特殊处理\r\ndefine(\"exports\", function() {});\r\n","import U from \"../../util/index.js\";\r\nconst L = U.global.xsloader;\r\nconst G = U.global;\r\n\r\nlet progIds = ['Msxml2.XMLHTTP', 'Microsoft.XMLHTTP', 'Msxml2.XMLHTTP.4.0'];\r\n/**\r\n * option._beforeOpenHook\r\n * option._onOkResponseHook\r\n * option._onFailResponseHook\r\n * \r\n * @param {Object} option\r\n */\r\nfunction httpRequest(option) {\r\n\tif (!option) {\r\n\t\toption = {};\r\n\t}\r\n\r\n\tfunction prop(obj, varName, defaultVal) {\r\n\t\tif (obj[varName] === undefined) {\r\n\t\t\treturn defaultVal;\r\n\t\t} else {\r\n\t\t\treturn obj[varName];\r\n\t\t}\r\n\t}\r\n\r\n\tfunction putProp(obj, varName, toObj) {\r\n\t\tif (obj[varName]) {\r\n\t\t\tfor (let x in obj[varName]) {\r\n\t\t\t\tlet value = obj[varName][x];\r\n\t\t\t\tif (value === null || value === undefined) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\ttoObj[x] = value;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tlet _url = prop(option, \"url\", \"\"),\r\n\t\t_method = prop(option, \"method\", \"GET\"),\r\n\t\t_params = {},\r\n\t\t_headers = {\r\n\t\t\t\"X-Requested-With\": \"XMLHttpRequest\"\r\n\t\t},\r\n\t\t_async = prop(option, \"async\", true),\r\n\t\t_multiPart = prop(option, \"multiPart\", false),\r\n\t\t_handleType = prop(option, \"handleType\", \"json\");\r\n\tlet _timeout = option.timeout;\r\n\tputProp(option, \"params\", _params);\r\n\tputProp(option, \"headers\", _headers);\r\n\r\n\tlet okCallback = option.ok;\r\n\tlet failCallback = option.fail;\r\n\tlet uploadStartCallback = option.uploadStart;\r\n\tlet uploadProgressCallback = option.uploadProgress;\r\n\tlet uploadOkCallback = option.uploadOk;\r\n\tlet uploadErrorCallback = option.uploadError;\r\n\tlet uploadEndCallback = option.uploadEnd;\r\n\r\n\tlet _beforeOpenHook = option._beforeOpenHook || httpRequest._beforeOpenHook;\r\n\tlet _onOkResponseHook = option._onOkResponseHook || httpRequest._onOkResponseHook;\r\n\tlet _onFailResponseHook = option._onFailResponseHook || httpRequest._onFailResponseHook;\r\n\r\n\tfunction createXhr() {\r\n\t\tlet xhr, i, progId;\r\n\t\tif (typeof XMLHttpRequest !== \"undefined\") {\r\n\t\t\treturn new XMLHttpRequest();\r\n\t\t} else if (typeof ActiveXObject !== \"undefined\") {\r\n\t\t\tfor (i = 0; i < 3; i += 1) {\r\n\t\t\t\tprogId = progIds[i];\r\n\t\t\t\ttry {\r\n\t\t\t\t\txhr = new ActiveXObject(progId);\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tconsole.warn(e);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (xhr) {\r\n\t\t\t\t\tprogIds = [progId];\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn xhr;\r\n\t}\r\n\r\n\tfunction conn() {\r\n\t\t_conn(createXhr());\r\n\t}\r\n\r\n\tfunction _conn(xhr) {\r\n\t\tlet option = {\r\n\t\t\turl: _url,\r\n\t\t\tmethod: _method.toUpperCase(),\r\n\t\t\tparams: _params,\r\n\t\t\theaders: _headers,\r\n\t\t\thandleType: _handleType,\r\n\t\t\tasync: _async,\r\n\t\t\tmultiPart: _multiPart,\r\n\t\t\ttimeout: _timeout\r\n\t\t};\r\n\t\t_beforeOpenHook(option, function() {\r\n\t\t\t_connAfterOpenHook(option, xhr);\r\n\t\t}, xhr);\r\n\t}\r\n\r\n\tfunction _doOnFailResponseHook(option, xhr, err, extraErr) {\r\n\t\t_onFailResponseHook(option, function(result) {\r\n\t\t\tif (result !== false && result !== undefined) {\r\n\t\t\t\tif (typeof okCallback == \"function\") {\r\n\t\t\t\t\tokCallback(result, xhr);\r\n\t\t\t\t}\r\n\t\t\t\treturn;\r\n\t\t\t} else if (typeof failCallback == \"function\") {\r\n\t\t\t\tfailCallback(err);\r\n\t\t\t} else {\r\n\t\t\t\tconsole.error(err);\r\n\t\t\t}\r\n\t\t}, xhr, extraErr);\r\n\t}\r\n\r\n\tfunction _connAfterOpenHook(option, xhr) {\r\n\t\tlet body;\r\n\t\tif (option.multiPart) {\r\n\t\t\tlet formData = new FormData();\r\n\t\t\tfor (let x in option.params) {\r\n\t\t\t\tlet value = option.params[x];\r\n\t\t\t\tif(value === null || value === undefined) {\r\n\t\t\t\t\tvalue = \"\";\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (L.isArray(value)) {\r\n\t\t\t\t\tformData.append(x, L.xsJson2String(value));\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (G.File && value instanceof G.File || G.Blob && value instanceof G.Blob) {\r\n\t\t\t\t\t\tformData.append(x, value);\r\n\t\t\t\t\t} else if(L.isObject(value)){\r\n\t\t\t\t\t\tformData.append(x, L.xsJson2String(value));\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tformData.append(x, value);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t\tbody = formData;\r\n\t\t} else {\r\n\t\t\tbody = \"\";\r\n\t\t\tfor (let x in option.params) {\r\n\t\t\t\tlet value = option.params[x];\r\n\t\t\t\tif (value === null || value === undefined) {\r\n\t\t\t\t\tvalue = \"\";\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (L.isArray(value) || L.isObject(value)) {\r\n\t\t\t\t\tvalue = L.xsJson2String(value);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tbody += \"&\" + encodeURIComponent(x) + \"=\" + encodeURIComponent(value);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (!(option.method == \"POST\" || option.method == \"PUT\")) {\r\n\t\t\t\tif (option.url.lastIndexOf(\"?\") < 0 && body.length > 0) {\r\n\t\t\t\t\toption.url += \"?\";\r\n\t\t\t\t}\r\n\t\t\t\toption.url += body;\r\n\t\t\t\toption.url = option.url.replace(\"?&\", \"?\");\r\n\t\t\t\tbody = null;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\txhr.open(option.method, option.url, option.async);\r\n\t\tif ((option.method == \"POST\" || option.method == \"PUT\") && !option.multiPart && option.headers[\"Content-Type\"] ===\r\n\t\t\tundefined) {\r\n\r\n\t\t\txhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded;charset=utf-8');\r\n\t\t}\r\n\t\tfor (let header in option.headers) {\r\n\t\t\txhr.setRequestHeader(header, option.headers[header]);\r\n\t\t}\r\n\r\n\t\tif (typeof uploadStartCallback == \"function\") {\r\n\t\t\txhr.upload.onloadstart = uploadStartCallback;\r\n\t\t}\r\n\r\n\t\tif (typeof uploadProgressCallback == \"function\") {\r\n\t\t\txhr.upload.onprogress = uploadProgressCallback;\r\n\t\t}\r\n\r\n\t\tif (typeof uploadOkCallback == \"function\") {\r\n\t\t\txhr.upload.onload = uploadOkCallback;\r\n\t\t}\r\n\r\n\t\tif (typeof uploadErrorCallback == \"function\") {\r\n\t\t\txhr.upload.onerror = uploadErrorCallback;\r\n\t\t}\r\n\r\n\t\tif (typeof uploadEndCallback == \"function\") {\r\n\t\t\txhr.upload.onloadend = uploadEndCallback;\r\n\t\t}\r\n\r\n\t\tlet timeoutTimer;\r\n\t\tlet isTimeout = false;\r\n\t\tif (option.timeout) {\r\n\t\t\ttimeoutTimer = setTimeout(function() {\r\n\t\t\t\tisTimeout = true;\r\n\t\t\t\txhr.abort();\r\n\t\t\t\tclearTimeout(timeoutTimer);\r\n\t\t\t}, option.timeout);\r\n\t\t}\r\n\r\n\t\txhr.onreadystatechange = function(evt) {\r\n\t\t\tlet status, err;\r\n\t\t\tif (xhr.readyState === 4) {\r\n\t\t\t\tstatus = xhr.status || 0;\r\n\t\t\t\tif (status > 399 && status < 600 || !status) {\r\n\t\t\t\t\tlet err = new Error(option.url + ' HTTP status: ' + status);\r\n\t\t\t\t\terr.xhr = xhr;\r\n\t\t\t\t\t_doOnFailResponseHook(option, xhr, err);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlet result;\r\n\t\t\t\t\tif (option.handleType === \"json\") {\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tresult = L.xsParseJson(xhr.responseText);\r\n\t\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\t\t_doOnFailResponseHook(option, xhr, new Error(\"parse-json-error:\" + e), \"parse-json-error\");\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if (option.handleType === \"text\") {\r\n\t\t\t\t\t\tresult = xhr.responseText;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t_onOkResponseHook(result, option, function(result) {\r\n\t\t\t\t\t\tif (typeof okCallback == \"function\") {\r\n\t\t\t\t\t\t\tokCallback(result, xhr);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, xhr);\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\t\t\t\tif (timeoutTimer && isTimeout) {\r\n\t\t\t\t\tlet err = new Error(option.url + ' timeout status: ' + status);\r\n\t\t\t\t\terr.xhr = xhr;\r\n\t\t\t\t\t_doOnFailResponseHook(option, xhr, err);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t\txhr.send(body);\r\n\t}\r\n\r\n\tlet requestObj = {\r\n\t\tmultiPart(multiPart) {\r\n\t\t\t_multiPart = multiPart;\r\n\t\t\treturn this;\r\n\t\t},\r\n\t\tuploadStart(uploadStart) {\r\n\t\t\tuploadStartCallback = uploadStart;\r\n\t\t\treturn this;\r\n\t\t},\r\n\t\tuploadProgress(uploadProgress) {\r\n\t\t\tuploadProgressCallback = uploadProgress;\r\n\t\t\treturn this;\r\n\t\t},\r\n\t\tuploadOk(callback) {\r\n\t\t\tuploadOkCallback = callback;\r\n\t\t\treturn this;\r\n\t\t},\r\n\t\tuploadError(callback) {\r\n\t\t\tuploadErrorCallback = callback;\r\n\t\t\treturn this;\r\n\t\t},\r\n\t\tuploadEnd(uploadEnd) {\r\n\t\t\tuploadEndCallback = uploadEnd;\r\n\t\t\treturn this;\r\n\t\t},\r\n\t\turl(urlStr) {\r\n\t\t\t_url = urlStr;\r\n\t\t\treturn this;\r\n\t\t},\r\n\t\tmethod(methodStr) {\r\n\t\t\t_method = methodStr;\r\n\t\t\treturn this;\r\n\t\t},\r\n\t\ttimeout(timeout) {\r\n\t\t\t_timeout = timeout;\r\n\t\t\treturn this;\r\n\t\t},\r\n\t\tasync (isAsync) {\r\n\t\t\t_async = isAsync;\r\n\t\t\treturn this;\r\n\t\t},\r\n\t\tparams(paramsObj) {\r\n\t\t\tif (paramsObj) {\r\n\t\t\t\tfor (let x in paramsObj) {\r\n\t\t\t\t\tlet value = paramsObj[x];\r\n\t\t\t\t\tif (value === null || value === undefined) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t_params[x] = value;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn this;\r\n\t\t},\r\n\t\theaders(headersObj) {\r\n\t\t\tif (headersObj) {\r\n\t\t\t\tfor (let x in headersObj) {\r\n\t\t\t\t\t_headers[x] = headersObj[x];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn this;\r\n\t\t},\r\n\t\thandleType(_handleType) {\r\n\t\t\treturn this.handleAs(_handleType);\r\n\t\t},\r\n\t\thandleAs(handleType) {\r\n\t\t\tif (handleType !== \"json\" && handleType !== \"text\") {\r\n\t\t\t\tthrow \"unknown handleType:\" + handleType;\r\n\t\t\t}\r\n\t\t\t_handleType = handleType;\r\n\t\t\treturn this;\r\n\t\t},\r\n\t\tok(callback) {\r\n\t\t\tokCallback = callback;\r\n\t\t\treturn this;\r\n\t\t},\r\n\t\tfail(callback) {\r\n\t\t\tfailCallback = callback;\r\n\t\t\treturn this;\r\n\t\t},\r\n\t\t_beforeOpenHook(callback) {\r\n\t\t\t_beforeOpenHook = callback;\r\n\t\t\treturn this;\r\n\t\t},\r\n\t\t_onOkResponseHook(callback) {\r\n\t\t\t_onOkResponseHook = callback;\r\n\t\t\treturn this;\r\n\t\t},\r\n\t\t_onFailResponseHook(callback) {\r\n\t\t\t_onFailResponseHook = callback;\r\n\t\t\treturn this;\r\n\t\t},\r\n\t\tdone() {\r\n\t\t\ttry {\r\n\t\t\t\tconn();\r\n\t\t\t} catch (e) {\r\n\t\t\t\tif (typeof failCallback == \"function\") {\r\n\t\t\t\t\tfailCallback(e);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconsole.error(e);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\treturn requestObj;\r\n}\r\n/**\r\n */\r\nhttpRequest._beforeOpenHook = function(option, callback, xhr) {\r\n\tcallback();\r\n};\r\n\r\n/**\r\n * function(result,option,xhr,callback),callback(result)的result为最终的结果\r\n */\r\nhttpRequest._onOkResponseHook = function(result, option, callback, xhr) {\r\n\tcallback(result);\r\n};\r\n/**\r\n * function(option,xhr,callback,extraErrorType),callback(result)的result为false则不会处理后面的,如果为非undefined则作为成功的结果。\r\n * extraErrorType==\"parse-json-error\"表示转换成json时出错\r\n */\r\nhttpRequest._onFailResponseHook = function(option, callback, xhr, extraErrorType) {\r\n\tcallback(undefined);\r\n};\r\n\r\nwindow._xshttp_request_ = httpRequest;\r\n\r\nL.define(\"xshttp\", [], function() {\r\n\treturn httpRequest;\r\n});\r\n","import U from \"../../util/index.js\";\r\nconst L = U.global.xsloader;\r\n\r\n/**\r\n * 返回Request返回一个Promise\r\n */\r\nL.define(\"request\", [\"xshttp\"], function(http) {\r\n\t/**\r\n\t * 参数列表:\r\n\t * async:始终为true\r\n\t * ok与fail失效\r\n\t * 其他参数同xshttp\r\n\t * 不断返回then(function()).then,当返回false时取消调用后面的回调。\r\n\t * @param {Object} option\r\n\t */\r\n\tlet Request = function(option) {\r\n\t\toption = L.extend({\r\n\t\t\tparams: undefined,\r\n\t\t\theaders: undefined,\r\n\t\t\tmethod: undefined,\r\n\t\t\turl: undefined,\r\n\t\t\tcallback: undefined\r\n\t\t}, option);\r\n\t\toption.async = true;\r\n\r\n\t\tlet promise = new Promise((resolve, reject) => {\r\n\t\t\toption.ok = function(rs) {\r\n\t\t\t\tresolve(rs);\r\n\t\t\t};\r\n\t\t\toption.fail = function(err) {\r\n\t\t\t\treject(err);\r\n\t\t\t};\r\n\t\t\thttp(option).done();\r\n\t\t});\r\n\r\n\t\treturn promise;\r\n\t};\r\n\r\n\treturn Request;\r\n});","import U from \"../../util/index.js\";\r\nconst L = U.global.xsloader;\r\n\r\ntry {\r\n\tlet isXsMsgDebug = false;\r\n\tlet api = {};\r\n\r\n\tfunction isDebug(type) {\r\n\t\treturn isXsMsgDebug;\r\n\t}\r\n\r\n\tapi.linkedList = function() {\r\n\t\treturn new LinkedList();\r\n\t};\r\n\r\n\tfunction LinkedList() {\r\n\t\tfunction newNode(element) {\r\n\t\t\tlet node = {\r\n\t\t\t\telement: element,\r\n\t\t\t\tnext: null,\r\n\t\t\t\tpre: null\r\n\t\t\t};\r\n\t\t\treturn node;\r\n\t\t}\r\n\t\tlet length = 0;\r\n\t\tlet headNode = newNode(),\r\n\t\t\tlastNode = headNode;\r\n\r\n\t\t/**\r\n\t\t * 在链表末尾添加元素\r\n\t\t */\r\n\t\tthis.append = function(element) {\r\n\t\t\tlet current = newNode(element);\r\n\r\n\t\t\tlastNode.next = current;\r\n\t\t\tcurrent.pre = lastNode;\r\n\t\t\tlastNode = current;\r\n\t\t\tlength++;\r\n\t\t};\r\n\r\n\t\t//在链表的任意位置插入元素\r\n\t\tthis.insert = function(position, element) {\r\n\t\t\tif(position >= 0 && position <= length) {\r\n\r\n\t\t\t\tlet node = newNode(element);\r\n\t\t\t\tlet pNode = headNode;\r\n\t\t\t\twhile(position--) {\r\n\t\t\t\t\tpNode = pNode.next;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(pNode.next) {\r\n\t\t\t\t\tpNode.next.pre = node;\r\n\t\t\t\t\tnode.next = pNode.next;\r\n\t\t\t\t}\r\n\t\t\t\tpNode.next = node;\r\n\t\t\t\tnode.pre = pNode;\r\n\t\t\t\tlength++;\r\n\t\t\t\treturn true;\r\n\t\t\t} else {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tthis.elementAt = function(position) {\r\n\t\t\treturn getElement(position);\r\n\t\t};\r\n\r\n\t\tfunction getElement(position, willRemove) {\r\n\t\t\tif(position >= 0 && position < length) {\r\n\r\n\t\t\t\tlet pNode = headNode;\r\n\t\t\t\twhile(position--) {\r\n\t\t\t\t\tpNode = pNode.next;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(pNode.next) {\r\n\t\t\t\t\tlet currentNode = pNode.next;\r\n\t\t\t\t\tif(willRemove) {\r\n\t\t\t\t\t\tlet nextCurrentNode = currentNode.next;\r\n\t\t\t\t\t\tif(nextCurrentNode) {\r\n\t\t\t\t\t\t\tnextCurrentNode.pre = pNode;\r\n\t\t\t\t\t\t\tpNode.next = nextCurrentNode;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tpNode.next = null;\r\n\t\t\t\t\t\t\tlastNode = pNode;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tlength--;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn currentNode.element;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn undefined;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\treturn undefined;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * @param callback function 返回true表示移除\r\n\t\t */\r\n\t\tthis.eachForRemove = function(callback) {\r\n\t\t\tlet pNode = headNode.next;\r\n\t\t\twhile(pNode) {\r\n\t\t\t\tlet currentNode = pNode;\r\n\t\t\t\tif(callback(currentNode)) {\r\n\t\t\t\t\tlet nextCurrentNode = currentNode.next;\r\n\t\t\t\t\tif(nextCurrentNode) {\r\n\t\t\t\t\t\tnextCurrentNode.pre = pNode;\r\n\t\t\t\t\t\tpNode.next = nextCurrentNode;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tpNode.next = null;\r\n\t\t\t\t\t\tlastNode = pNode;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlength--;\r\n\t\t\t\t\tpNode = nextCurrentNode;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tpNode = pNode.next;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t//从链表中移除元素\r\n\t\tthis.removeAt = function(position) {\r\n\t\t\treturn getElement(position, true);\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * 移除并获取第一个元素\r\n\t\t * @param callback function(elem,index)\r\n\t\t */\r\n\t\tthis.pop = function(callback) {\r\n\t\t\treturn this.removeAt(0);\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * 返回元素在链表中的位置\r\n\t\t * @param element object|function(elem)\r\n\t\t */\r\n\t\tthis.indexOf = function(element) {\r\n\t\t\tlet pNode = headNode.next;\r\n\t\t\tlet index = 0;\r\n\t\t\twhile(pNode) {\r\n\t\t\t\tif(typeof element == \"function\") {\r\n\t\t\t\t\tif(element(pNode.element)) {\r\n\t\t\t\t\t\treturn index;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if(pNode.element === element) {\r\n\t\t\t\t\treturn index;\r\n\t\t\t\t}\r\n\t\t\t\tindex++;\r\n\t\t\t\tpNode = pNode.next;\r\n\t\t\t}\r\n\t\t\treturn -1;\r\n\t\t};\r\n\r\n\t\tthis.find = function(element) {\r\n\t\t\tlet index = this.indexOf(element);\r\n\t\t\treturn index >= 0 ? this.elementAt(index) : undefined;\r\n\t\t};\r\n\r\n\t\t//移除某个元素\r\n\t\tthis.remove = function(element) {\r\n\t\t\tlet index = this.indexOf(element);\r\n\t\t\treturn this.removeAt(index);\r\n\t\t};\r\n\r\n\t\t//判断链表是否为空\r\n\r\n\t\tthis.isEmpty = function() {\r\n\t\t\treturn length === 0;\r\n\t\t};\r\n\r\n\t\t//返回链表的长度\r\n\t\tthis.size = function() {\r\n\t\t\treturn length;\r\n\t\t};\r\n\r\n\t}\r\n\r\n\tif(window.addEventListener) {\r\n\t\tlet postMessageBridge;\r\n\r\n\t\tfunction initPostMessageBridge() {\r\n\t\t\tif(postMessageBridge){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tlet handle = {};\r\n\r\n\t\t\tlet instanceMap = {}; //id:listener\r\n\t\t\tlet cmd2ListenerMap = {}; //cmd:[]\r\n\t\t\tlet instanceBindMap = {}; //instanceid:true\r\n\t\t\tlet oinstanceidMap = {}; //已经被绑定的oinstanceid:instanceid\r\n\r\n\t\t\t//isActive为false表示监听者\r\n\t\t\thandle.listen = function(cmd, conndata, connectingSource, source, isActive, _onConned, _onMsg, _onResponse, _onElse) {\r\n\r\n\t\t\t\tlet listener = {\r\n\t\t\t\t\tcmd: cmd,\r\n\t\t\t\t\t_onConned: _onConned,\r\n\t\t\t\t\t_onMsg: _onMsg,\r\n\t\t\t\t\t_onResponse: _onResponse,\r\n\t\t\t\t\t_onElse: _onElse,\r\n\t\t\t\t\tconndata: conndata,\r\n\t\t\t\t\tosource: source,\r\n\t\t\t\t\tactive: isActive,\r\n\t\t\t\t\tconnectingSource: connectingSource,\r\n\t\t\t\t\tid: L.randId(),\r\n\t\t\t\t\trefused: {}\r\n\t\t\t\t};\r\n\r\n\t\t\t\tif(!cmd2ListenerMap[cmd]) {\r\n\t\t\t\t\tcmd2ListenerMap[cmd] = [];\r\n\t\t\t\t}\r\n\t\t\t\tcmd2ListenerMap[cmd].push(listener);\r\n\r\n\t\t\t\tlet instanceid = listener.id;\r\n\t\t\t\tinstanceMap[instanceid] = listener;\r\n\t\t\t\treturn instanceid;\r\n\t\t\t};\r\n\r\n\t\t\thandle.remove = function(instanceid) {\r\n\t\t\t\t//TODO !!!!!!!\r\n\t\t\t\t/*let listener = listeners[id];\r\n\t\t\t\tdelete listeners[id];\r\n\t\t\t\tif(listener.active) {\r\n\t\t\t\t\tfor(let x in activeListenerMyIds) {\r\n\t\t\t\t\t\tlet as = activeListenerMyIds[x];\r\n\t\t\t\t\t\tlet found = false;\r\n\t\t\t\t\t\tfor(let k = 0; k < as.length; k++) {\r\n\t\t\t\t\t\t\tif(as[k] == id) {\r\n\t\t\t\t\t\t\t\tas.splice(k, 1);\r\n\t\t\t\t\t\t\t\tfound = true;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(found) {\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}*/\r\n\t\t\t};\r\n\r\n\t\t\thandle.send = function(data, instanceid, msgid) {\r\n\t\t\t\tlet listener = instanceMap[instanceid];\r\n\t\t\t\t_sendData(\"msg\", listener.cmd, listener.osource, data, instanceid, msgid);\r\n\t\t\t};\r\n\r\n\t\t\thandle.sendConn = function(instanceid) {\r\n\t\t\t\tlet listener = instanceMap[instanceid];\r\n\t\t\t\t_sendData(\"conn\", listener.cmd, listener.osource, listener.conndata, instanceid);\r\n\t\t\t};\r\n\r\n\t\t\thandle.sendResponse = function(data, instanceid) {\r\n\t\t\t\tlet listener = instanceMap[instanceid];\r\n\t\t\t\t_sendData(\"response\", listener.cmd, listener.osource, data, instanceid);\r\n\t\t\t};\r\n\r\n\t\t\tfunction handleConn(cmd, fromSource, originStr, data, oinstanceid) {\r\n\t\t\t\tif(oinstanceidMap[oinstanceid]) {\r\n\t\t\t\t\t//console.warn(\"already bind:\" + cmd);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tlet listeners = cmd2ListenerMap[cmd];\r\n\t\t\t\tif(!listeners) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction Callback(instanceid) {\r\n\r\n\t\t\t\t\treturn function(isAccept, msg) {\r\n\t\t\t\t\t\tif(!isAccept) {\r\n\t\t\t\t\t\t\tlet listener = instanceMap[instanceid];\r\n\t\t\t\t\t\t\tlistener.refused[oinstanceid] = true;\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(oinstanceidMap[oinstanceid]) {\r\n\t\t\t\t\t\t\tconsole.warn(\"already bind other:\" + cmd + \",my page:\" + location.href);\r\n\t\t\t\t\t\t} else if(instanceBindMap[instanceid]) {\r\n\t\t\t\t\t\t\tconsole.warn(\"already self bind:\" + cmd + \",my page:\" + location.href);\r\n\t\t\t\t\t\t\t_sendData(\"binded\", cmd, fromSource, oinstanceid);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\toinstanceidMap[oinstanceid] = instanceid;\r\n\t\t\t\t\t\t\tinstanceBindMap[instanceid] = true;\r\n\t\t\t\t\t\t\tlet listener = instanceMap[instanceid];\r\n\t\t\t\t\t\t\tlistener.osource = fromSource;\r\n\t\t\t\t\t\t\tlistener.origin = originStr;\r\n\t\t\t\t\t\t\t_sendData(\"accept\", cmd, fromSource, listener.conndata, instanceid, oinstanceid);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor(let i = 0; i < listeners.length; i++) {\r\n\t\t\t\t\tlet listener = listeners[i];\r\n\t\t\t\t\tif(!listener.refused[oinstanceid]) {\r\n\t\t\t\t\t\tlistener.connectingSource(fromSource, originStr, data, Callback(listener.id));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfunction handleAccept(cmd, fromSource, originStr, data, oinstanceid, minstanceid) {\r\n\t\t\t\tlet listeners = cmd2ListenerMap[cmd];\r\n\t\t\t\tif(!listeners) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction Callback(instanceid) {\r\n\r\n\t\t\t\t\treturn function(isAccept, msg) {\r\n\t\t\t\t\t\tif(!isAccept) {\r\n\t\t\t\t\t\t\tlet listener = instanceMap[instanceid];\r\n\t\t\t\t\t\t\tlistener.refused[oinstanceid] = true;\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(oinstanceidMap[oinstanceid]) {\r\n\t\t\t\t\t\t\tconsole.warn(\"already bind:\" + cmd + \",my page:\" + location.href);\r\n\t\t\t\t\t\t} else if(instanceBindMap[instanceid]) {\r\n\t\t\t\t\t\t\tconsole.warn(\"already self bind:\" + cmd + \",my page:\" + location.href);\r\n\t\t\t\t\t\t\t_sendData(\"binded\", cmd, fromSource, oinstanceid);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\toinstanceidMap[oinstanceid] = instanceid;\r\n\t\t\t\t\t\t\tinstanceBindMap[instanceid] = true;\r\n\r\n\t\t\t\t\t\t\tlet listener = instanceMap[instanceid];\r\n\t\t\t\t\t\t\tlistener.osource = fromSource;\r\n\t\t\t\t\t\t\tlistener.origin = originStr;\r\n\t\t\t\t\t\t\t_sendData(\"conned\", cmd, fromSource, listener.conndata, instanceid);\r\n\t\t\t\t\t\t\tlistener._onConned(fromSource, data);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor(let i = 0; i < listeners.length; i++) {\r\n\t\t\t\t\tlet listener = listeners[i];\r\n\t\t\t\t\tif(listener.id == minstanceid && !listener.refused[oinstanceid]) { //当前为主动发起连接的页面\r\n\t\t\t\t\t\tlistener.connectingSource(fromSource, originStr, data, Callback(listener.id));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfunction handleBinded(cmd, fromSource, originStr, minstanceid) {\r\n\t\t\t\tlet listener = instanceMap[minstanceid];\r\n\t\t\t\tlistener._onElse(\"binded\");\r\n\t\t\t}\r\n\r\n\t\t\tfunction checkSource(listener, fromSource, originStr) {\r\n\t\t\t\tif(listener.osource != fromSource && listener.origin != originStr) {\r\n\t\t\t\t\tconsole.warn(\"expected:\" + listener.origin + \",but:\" + originStr);\r\n\t\t\t\t\tthrow new Error(\"source changed!\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfunction handleConned(cmd, fromSource, originStr, data, oinstanceid) {\r\n\t\t\t\tlet instanceid = oinstanceidMap[oinstanceid];\r\n\t\t\t\tlet listener = instanceMap[instanceid];\r\n\t\t\t\tcheckSource(listener, fromSource, originStr);\r\n\r\n\t\t\t\tlistener._onConned(listener.osource, data);\r\n\t\t\t}\r\n\r\n\t\t\tfunction handleMsg(cmd, fromSource, originStr, data, oinstanceid, msgid) {\r\n\t\t\t\tlet instanceid = oinstanceidMap[oinstanceid];\r\n\t\t\t\tlet listener = instanceMap[instanceid];\r\n\t\t\t\tcheckSource(listener, fromSource, originStr);\r\n\r\n\t\t\t\tlistener._onMsg(data, msgid);\r\n\t\t\t}\r\n\r\n\t\t\tfunction handleResponse(cmd, fromSource, originStr, data, oinstanceid) {\r\n\t\t\t\tlet instanceid = oinstanceidMap[oinstanceid];\r\n\t\t\t\tlet listener = instanceMap[instanceid];\r\n\t\t\t\tcheckSource(listener, fromSource, originStr);\r\n\r\n\t\t\t\tlistener._onResponse(data);\r\n\t\t\t}\r\n\r\n\t\t\tfunction _sendData(type, cmd, source, data, instanceid, msgid) {\r\n\t\t\t\tlet msg = {\r\n\t\t\t\t\ttype: type,\r\n\t\t\t\t\tdata: data,\r\n\t\t\t\t\tcmd: cmd,\r\n\t\t\t\t\tid: instanceid,\r\n\t\t\t\t\tmsgid: msgid\r\n\t\t\t\t};\r\n\r\n\t\t\t\tif(isDebug(\"postMessageBridge\")) {\r\n\t\t\t\t\tconsole.log(\"send from:\" + location.href);\r\n\t\t\t\t\tconsole.log(msg);\r\n\t\t\t\t}\r\n\t\t\t\tsource.postMessage(L.xsJson2String(msg), \"*\");\r\n\t\t\t}\r\n\r\n\t\t\twindow.addEventListener('message', function(event) {\r\n\t\t\t\tif(event.data && (typeof event.data == \"string\") && event.data.substring(0, 1) == \"{\") {\r\n\t\t\t\t\tif(isDebug(\"postMessageBridge\")) {\r\n\t\t\t\t\t\tconsole.log(\"receive from:\" + event.origin + \",my page:\" + location.href);\r\n\t\t\t\t\t\tconsole.log(event.data);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tlet data;\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tdata = L.xsParseJson(event.data);\r\n\t\t\t\t\t} catch(e) {\r\n\t\t\t\t\t\tconsole.warn(\"error data:\", event.data);\r\n\t\t\t\t\t\tconsole.warn(e);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(!data || !(data.cmd && data.type)) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tlet cmd = data.cmd;\r\n\t\t\t\t\t\tlet oinstanceid = data.id;\r\n\t\t\t\t\t\tlet rdata = data.data;\r\n\t\t\t\t\t\tlet type = data.type;\r\n\t\t\t\t\t\tlet msgid = data.msgid;\r\n\r\n\t\t\t\t\t\tif(type == \"conn\") {\r\n\t\t\t\t\t\t\thandleConn(cmd, event.source, event.origin, rdata, oinstanceid);\r\n\t\t\t\t\t\t} else if(type == \"accept\") {\r\n\t\t\t\t\t\t\thandleAccept(cmd, event.source, event.origin, rdata, oinstanceid, msgid);\r\n\t\t\t\t\t\t} else if(type == \"conned\") {\r\n\t\t\t\t\t\t\thandleConned(cmd, event.source, event.origin, rdata, oinstanceid);\r\n\t\t\t\t\t\t} else if(type == \"msg\") {\r\n\t\t\t\t\t\t\thandleMsg(cmd, event.source, event.origin, rdata, oinstanceid, msgid);\r\n\t\t\t\t\t\t} else if(type == \"response\") {\r\n\t\t\t\t\t\t\thandleResponse(cmd, event.source, event.origin, rdata, oinstanceid);\r\n\t\t\t\t\t\t} else if(type == \"binded\") {\r\n\t\t\t\t\t\t\thandleBinded(cmd, event.source, event.origin, rdata);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} catch(e) {\r\n\t\t\t\t\t\tconsole.error(e);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t});\r\n\r\n\t\t\thandle.runAfter = function(time, callback) {\r\n\t\t\t\tsetTimeout(callback, time);\r\n\t\t\t};\r\n\r\n\t\t\tpostMessageBridge = handle;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * \r\n\t\t * @param {Object} cmd\r\n\t\t * @param {Object} source\r\n\t\t * @param {Object} connectingSource\r\n\t\t * @param {Object} onfailed\r\n\t\t * @param {Object} isActive\r\n\t\t * @param {Object} conndata 连接传送的数据\r\n\t\t * @param {Object} timeout 连接超时时间，毫秒\r\n\t\t * @param {Object} sleep 连接检测的休眠时间，毫秒\r\n\t\t */\r\n\t\tfunction CommunicationUnit(cmd, source, connectingSource, onfailed, isActive, conndata, timeout, sleep) {\r\n\t\t\tinitPostMessageBridge();\r\n\t\t\t\r\n\t\t\tlet msgQueue = new LinkedList();\r\n\r\n\t\t\tlet SLEEP = sleep;\r\n\t\t\tlet starttime;\r\n\t\t\tlet isFailed = false;\r\n\t\t\tlet isConnected = false;\r\n\t\t\tlet isCanceled = false;\r\n\r\n\t\t\tlet thiz = this;\r\n\t\t\tlet handleId;\r\n\r\n\t\t\tthis.onConnectedListener = null;\r\n\t\t\tthis.onReceiveListener = null;\r\n\t\t\tthis.send = function(data) {\r\n\t\t\t\tlet msg = {\r\n\t\t\t\t\tid: L.randId(),\r\n\t\t\t\t\tdata: data\r\n\t\t\t\t};\r\n\t\t\t\tmsgQueue.append(msg);\r\n\t\t\t\tsendTop();\r\n\t\t\t};\r\n\r\n\t\t\tthis.send.release = function() {\r\n\t\t\t\tpostMessageBridge.remove(handleId);\r\n\t\t\t};\r\n\r\n\t\t\tfunction couldChat() {\r\n\t\t\t\treturn !isFailed && !isCanceled;\r\n\t\t\t}\r\n\r\n\t\t\tfunction _onConned(_source, data) {\r\n\t\t\t\tif(couldChat()) {\r\n\t\t\t\t\tthiz.onConnectedListener.call(thiz, data);\r\n\t\t\t\t\tisConnected = true;\r\n\t\t\t\t\tsendTop();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfunction _onMsg(data, msgid) {\r\n\t\t\t\tif(couldChat()) {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tthiz.onReceiveListener.call(thiz, data);\r\n\t\t\t\t\t} catch(e) {\r\n\t\t\t\t\t\tconsole.warn(e);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tpostMessageBridge.sendResponse({ //回应已经收到\r\n\t\t\t\t\t\tid: msgid\r\n\t\t\t\t\t}, handleId);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfunction _onResponse(data) {\r\n\t\t\t\tmsgQueue.remove(function(elem) {\r\n\t\t\t\t\treturn elem.id = data.id;\r\n\t\t\t\t});\r\n\t\t\t\tcouldChat() && sendTop();\r\n\t\t\t}\r\n\r\n\t\t\tfunction _onElse(type) {\r\n\t\t\t\tif(type == \"binded\") {\r\n\t\t\t\t\tisCanceled = true;\r\n\t\t\t\t\tconsole.error(\"connect failed,that page already binded:\" + cmd + \",my page:\" + location.href);\r\n\t\t\t\t\tonfailed(\"canceled\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfunction initListen() {\r\n\t\t\t\thandleId = postMessageBridge.listen(cmd, conndata, connectingSource, source, isActive, _onConned, _onMsg, _onResponse, _onElse);\r\n\t\t\t}\r\n\r\n\t\t\tfunction sendTop() {\r\n\t\t\t\tif(isConnected) {\r\n\t\t\t\t\tlet msg;\r\n\t\t\t\t\twhile((msg = msgQueue.pop())) {\r\n\t\t\t\t\t\tpostMessageBridge.send(msg.data, handleId, msg.id);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfunction isTimeout() {\r\n\t\t\t\tlet dt = new Date().getTime() - starttime;\r\n\t\t\t\treturn dt > timeout;\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * 主动方初始化\r\n\t\t\t */\r\n\t\t\tfunction initActively() {\r\n\t\t\t\tif(isConnected || isTimeout() || isCanceled) {\r\n\t\t\t\t\tif(!isConnected && !isCanceled) {\r\n\t\t\t\t\t\tisFailed = true;\r\n\t\t\t\t\t\tonfailed(\"timeout:connect\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tpostMessageBridge.sendConn(handleId);\r\n\t\t\t\tpostMessageBridge.runAfter(SLEEP, initActively);\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * 被动方检查\r\n\t\t\t */\r\n\t\t\tfunction checkPassively() {\r\n\t\t\t\tif(isConnected || isTimeout() || isCanceled) {\r\n\t\t\t\t\tif(!isConnected && !isCanceled) {\r\n\t\t\t\t\t\tisFailed = true;\r\n\t\t\t\t\t\tonfailed(\"timeout:wait connect\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tpostMessageBridge.runAfter(SLEEP, checkPassively);\r\n\t\t\t}\r\n\r\n\t\t\t{\r\n\t\t\t\tstarttime = new Date().getTime();\r\n\t\t\t\tif(source) {\r\n\t\t\t\t\tinitListen();\r\n\t\t\t\t\tinitActively();\r\n\t\t\t\t} else if(!isActive) {\r\n\t\t\t\t\tinitListen();\r\n\t\t\t\t\tcheckPassively();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.setSource = function(_source) {\r\n\t\t\t\tsource = _source;\r\n\t\t\t\tif(source) {\r\n\t\t\t\t\tinitListen();\r\n\t\t\t\t\tinitActively();\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tlet handleApi = api;\r\n\r\n\t\t/**\r\n\t\t * \r\n\t\t * @param {Object} winObjOrCallback\r\n\t\t * @param {Object} option\r\n\t\t * @param {Object} notActive\r\n\t\t */\r\n\t\tfunction _connectWindow(winObjOrCallback, option, notActive) {\r\n\t\t\tconst gconfig = L.config().plugins.xsmsg;\r\n\t\t\toption = L.extendDeep({\r\n\t\t\t\tcmd: \"default-cmd\",\r\n\t\t\t\tlistener: null,\r\n\t\t\t\tconnected: null,\r\n\t\t\t\tconndata: null,\r\n\t\t\t\ttimeout: gconfig.timeout,\r\n\t\t\t\tsleep: gconfig.sleep,\r\n\t\t\t\tconnectingSource: function(source, origin, conndata, callback) {\r\n\t\t\t\t\tlet mine = location.protocol + \"//\" + location.host;\r\n\t\t\t\t\tcallback(mine == origin, \"default\");\r\n\t\t\t\t},\r\n\t\t\t\tonfailed: function(errtype) {\r\n\t\t\t\t\tif(errtype.indexOf(\"timeout:\") == 0) {\r\n\t\t\t\t\t\tconsole.warn(\"connect may timeout:cmd=\" + option.cmd + \" ,err='\" + errtype + \"' ,my page=\" + location.href);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}, option);\r\n\r\n\t\t\tlet cmd = option.cmd;\r\n\t\t\tlet connectedCallback = option.connected;\r\n\t\t\tlet receiveCallback = option.listener;\r\n\t\t\tlet conndata = option.conndata;\r\n\t\t\tlet onfailed = option.onfailed;\r\n\t\t\tlet timeout = option.timeout;\r\n\t\t\tlet sleep = option.sleep;\r\n\r\n\t\t\tlet isActive = !notActive;\r\n\t\t\tlet connectingSource = option.connectingSource;\r\n\r\n\t\t\tlet unit;\r\n\t\t\tif(typeof winObjOrCallback == \"function\") {\r\n\t\t\t\tunit = new CommunicationUnit(cmd, null, connectingSource, onfailed, isActive, conndata, timeout, sleep);\r\n\t\t\t} else {\r\n\t\t\t\tunit = new CommunicationUnit(cmd, winObjOrCallback, connectingSource, onfailed, isActive, conndata, timeout, sleep);\r\n\t\t\t}\r\n\r\n\t\t\tconnectedCallback = connectedCallback || function(sender, conndata) {\r\n\t\t\t\tconsole.log((isActive ? \"active\" : \"\") + \" connected:\" + cmd);\r\n\t\t\t};\r\n\t\t\tif(connectedCallback) {\r\n\t\t\t\tunit.onConnectedListener = function(conndata) {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tconnectedCallback(this.send, conndata);\r\n\t\t\t\t\t} catch(e) {\r\n\t\t\t\t\t\tconsole.error(e);\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\tif(receiveCallback) {\r\n\t\t\t\tunit.onReceiveListener = function(data) {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\treceiveCallback(data, this.send);\r\n\t\t\t\t\t} catch(e) {\r\n\t\t\t\t\t\tconsole.error(e);\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\tif(typeof winObjOrCallback == \"function\") {\r\n\t\t\t\twinObjOrCallback(function(winObj) {\r\n\t\t\t\t\tunit.setSource(winObj);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\treturn unit.send;\r\n\t\t}\r\n\r\n\t\tfunction _connectIFrame(iframe, option) {\r\n\t\t\tlet winObj;\r\n\t\t\tif(typeof iframe == \"string\") {\r\n\t\t\t\tiframe = document.getElementById(iframe);\r\n\t\t\t\twinObj = function(callback) {\r\n\t\t\t\t\tiframe.onload = function() {\r\n\t\t\t\t\t\tcallback(this.contentWindow);\r\n\t\t\t\t\t};\r\n\t\t\t\t};\r\n\t\t\t} else {\r\n\t\t\t\twinObj = iframe.contentWindow;\r\n\t\t\t}\r\n\t\t\treturn _connectWindow(winObj, option);\r\n\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * 用于连接iframe.\r\n\t\t * @param {Object} iframe iframe或selector\r\n\t\t * @param {Object} option\r\n\t\t * @return 返回sender\r\n\t\t */\r\n\t\thandleApi.connectIFrame = function(iframe, option) {\r\n\t\t\treturn _connectIFrame(iframe, option);\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * 用于连接父页面.\r\n\t\t * @param {Object} option\r\n\t\t * @return 返回sender\r\n\t\t */\r\n\t\thandleApi.connectParent = function(option) {\r\n\t\t\treturn _connectWindow(window.parent, option);\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * 用于连接顶层页面.\r\n\t\t * @param {Object} option\r\n\t\t * @return 返回sender\r\n\t\t */\r\n\t\thandleApi.connectTop = function(option) {\r\n\t\t\treturn _connectWindow(window.top, option);\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * 用于连接打开者.\r\n\t\t * @param {Object} option\r\n\t\t * @return 返回sender\r\n\t\t */\r\n\t\thandleApi.connectOpener = function(option) {\r\n\t\t\treturn _connectWindow(window.opener, option);\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * 用于监听其他页面发送消息.\r\n\t\t * @param {Object} option\r\n\t\t * @return 返回一个sender\r\n\t\t */\r\n\t\thandleApi.listenMessage = function(option) {\r\n\t\t\treturn _connectWindow(null, option, true);\r\n\t\t};\r\n\r\n\t\thandleApi.debug = function(isDebug) {\r\n\t\t\tisXsMsgDebug = isDebug;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * *******************\r\n\t\t * option参数\r\n\t\t *********************\r\n\t\t * option.cmd:\r\n\t\t * option.connectingSource:function(source,origin,conndata,callback(isAccept,msg))默认只选择同源\r\n\t\t * option.listener: function(data,sender)\r\n\t\t * option.connected:function(sender,conndata)\r\n\t\t * option.onfailed:function(errtype):errtype,timeout,canceled\r\n\t\t * option.conndata:\r\n\t\t * option.timeout:连接超时时间\r\n\t\t * option.sleep:连接检测休眠时间\r\n\t\t **************\r\n\t\t * 回调的extra参数\r\n\t\t **************\r\n\t\t * originStr:对方页面的地址\r\n\t\t */\r\n\t\tL.define(\"xsmsg\", handleApi); //TODO STRONG xsmsg\r\n\t}\r\n\r\n\tL.define(\"XsLinkedList\", function() {\r\n\t\treturn LinkedList;\r\n\t});\r\n} catch(e) {\r\n\tconsole.error(e);\r\n}","import U from \"../../util/index.js\";\r\nconst L = U.global.xsloader;\r\n\r\n/**\r\n * <vnodex :v=\"\">\r\n */\r\nL.define(\"xsloader4j-server-bridge\", [], function() {\r\n\tconst base64 = new L.Base64();\r\n\tlet isDebug = false;\r\n\tlet hasRegVnodex = false;\r\n\r\n\t/**\r\n\t * 用于支持jsx代码\r\n\t * @param {Object} vm\r\n\t */\r\n\tfunction __renderJsx(vm) {\r\n\t\treturn function(component, props /*, ...children*/ ) {\r\n\t\t\tif (!vm || !vm.$createElement) {\r\n\t\t\t\tlet Vue = L.require.get(\"vue\");\r\n\t\t\t\tvm = new Vue();\r\n\t\t\t}\r\n\t\t\tlet $createElement = vm.$createElement;\r\n\t\t\tif (!$createElement) {\r\n\t\t\t\tthrow new Error(\"not found function '$createElement'\");\r\n\t\t\t}\r\n\t\t\tlet children = [];\r\n\t\t\tfor (let i = 2; i < arguments.length; i++) {\r\n\t\t\t\tchildren.push(arguments[i]);\r\n\t\t\t}\r\n\t\t\treturn $createElement(component, props, children);\r\n\t\t};\r\n\t}\r\n\r\n\tfunction regVnodex(requiredVue = false) {\r\n\t\tif (hasRegVnodex || !requiredVue && !L.hasDefined(\"vue\")) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tlet Vue = L.require.get(\"vue\");\r\n\t\tVue.component(\"jsx\", {\r\n\t\t\tprops: {\r\n\t\t\t\tx: {\r\n\t\t\t\t\t//type: [Object, Function],\r\n\t\t\t\t\trequired: false\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\trender(h) {\r\n\t\t\t\tconst {\r\n\t\t\t\t\t$listeners,\r\n\t\t\t\t\t$attrs,\r\n\t\t\t\t} = this;\r\n\t\t\t\tdelete $attrs.x;\r\n\t\t\t\tconst wrapProps = {\r\n\t\t\t\t\ton: $listeners,\r\n\t\t\t\t\tattrs: $attrs,\r\n\t\t\t\t};\r\n\r\n\t\t\t\tlet Comp = this.x;\r\n\r\n\t\t\t\tif (!L.isEmpty(Comp)) {\r\n\t\t\t\t\tif (L.isFunction(Comp)) {\r\n\t\t\t\t\t\tComp = Comp();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (L.isObject(Comp)) {\r\n\t\t\t\t\t\tlet data = Comp.data || (Comp.data = {});\r\n\t\t\t\t\t\tfor (let k in wrapProps) {\r\n\t\t\t\t\t\t\tdata[k] = L.extend({}, data[k], wrapProps[k]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (!L.isObject(Comp)) {\r\n\t\t\t\t\t\tlet content = L.isString(Comp) ? Comp : JSON.stringify(Comp);\r\n\t\t\t\t\t\tComp = h(\"span\", {\r\n\t\t\t\t\t\t\t\"class\": \"jsx-text\",\r\n\t\t\t\t\t\t\t\"domProps\": {\r\n\t\t\t\t\t\t\t\tinnerText: content,\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn Comp;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\thasRegVnodex = true;\r\n\t}\r\n\r\n\tconst mod = {\r\n\t\tgetDefine(thiz) {\r\n\t\t\tregVnodex();\r\n\t\t\treturn thiz.define;\r\n\t\t},\r\n\t\tgetRequire(thiz) {\r\n\t\t\treturn thiz.require;\r\n\t\t},\r\n\t\tgetInvoker(thiz) {\r\n\t\t\treturn thiz.invoker();\r\n\t\t},\r\n\t\trenderJsx(vm) {\r\n\t\t\ttry {\r\n\t\t\t\tregVnodex(true);\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.error(\"jsx need vue!\");\r\n\t\t\t\tthrow e;\r\n\t\t\t}\r\n\t\t\treturn __renderJsx(vm);\r\n\t\t},\r\n\t\tgetVueCompiler(thiz) {\r\n\t\t\tlet rt = function(exports) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tregVnodex(true);\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tconsole.error(\"jsx need vue!\");\r\n\t\t\t\t\tthrow e;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet Vue = L.require.get(\"vue\");\r\n\t\t\t\tlet _default = exports['default'] || exports;\r\n\t\t\t\tif (_default.template) {\r\n\r\n\t\t\t\t\t//处理src,href,url(...)\r\n\t\t\t\t\tlet dealUrl = function(reg, group, str, appendArgs, fun) {\r\n\t\t\t\t\t\tfun = fun || function(regResult, url) {\r\n\t\t\t\t\t\t\treturn url;\r\n\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\tlet result = \"\";\r\n\t\t\t\t\t\twhile (true) {\r\n\t\t\t\t\t\t\tlet rs = reg.exec(str);\r\n\t\t\t\t\t\t\tif (!rs) {\r\n\t\t\t\t\t\t\t\tresult += str;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tlet rurl = rs[group].trim();\r\n\r\n\t\t\t\t\t\t\t\tresult += str.substring(0, rs.index);\r\n\t\t\t\t\t\t\t\tif (L.startsWith(rurl, \"url(\")) {\r\n\t\t\t\t\t\t\t\t\tresult += rs[0];\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tresult += fun(rs, thiz.getUrl(rurl, appendArgs));\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tstr = str.substring(rs.index + rs[0].length);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn result;\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\t//排除掉':src'等属性\r\n\t\t\t\t\t_default.template = dealUrl(/(^|\\s)(src|href)\\s*=\\s*('|\")([^'\"\\(\\)]+)('|\")/, 4, _default.template, false,\r\n\t\t\t\t\t\tfunction(regResult, url) {\r\n\t\t\t\t\t\t\treturn regResult[2] + \"=\" + regResult[3] + url + regResult[5];\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t_default.template = dealUrl(/(^|\\s)url\\(([^\\(\\)]+)\\)/, 2, _default.template, true); //后处理url，src与href中可能包含url(...)\r\n\t\t\t\t\tlet res;\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tif (isDebug) {\r\n\t\t\t\t\t\t\tconsole.log(\"compile vue template content,url=\", thiz.getUrl());\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tres = Vue.compile(_default.template); //用template有bug，根元素有多个时出现死循环\r\n\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\tconsole.error(\"url=\", thiz.getUrl());\r\n\t\t\t\t\t\tthrow e;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t_default.render = res.render;\r\n\t\t\t\t\t_default.staticRenderFns = res.staticRenderFns;\r\n\t\t\t\t}\r\n\t\t\t\tdelete _default.template;\r\n\t\t\t};\r\n\t\t\treturn rt;\r\n\t\t},\r\n\t\tgetVtemplate(thiz) {\r\n\t\t\tlet vtemplate = (component) => {\r\n\t\t\t\treturn (resolve, reject) => {\r\n\t\t\t\t\tlet invoker = thiz.invoker();\r\n\t\t\t\t\tthiz.require([component], (comp) => {\r\n\t\t\t\t\t\tresolve(comp);\r\n\t\t\t\t\t}).error((err) => {\r\n\t\t\t\t\t\treject(err.err);\r\n\t\t\t\t\t});\r\n\t\t\t\t};\r\n\t\t\t};\r\n\t\t\treturn vtemplate;\r\n\t\t},\r\n\t\tgetImporter(thiz) {\r\n\t\t\tlet vtemplate = this.getVtemplate(thiz);\r\n\t\t\treturn function(name) {\r\n\t\t\t\treturn new Promise(vtemplate(name));\r\n\t\t\t};\r\n\t\t},\r\n\t\tgetStyleBuilder(thiz) {\r\n\t\t\treturn function(cssContent, name = \"\") {\r\n\t\t\t\tif (cssContent) {\r\n\t\t\t\t\tlet id = L.randId() + \"_\" + name;\r\n\t\t\t\t\tlet count = 0;\r\n\t\t\t\t\tlet styleDom = document.createElement(\"style\");\r\n\t\t\t\t\tstyleDom.setAttribute(\"id\", id);\r\n\t\t\t\t\tstyleDom.setAttribute(\"type\", \"text/css\");\r\n\t\t\t\t\tstyleDom.innerHTML = cssContent;\r\n\r\n\t\t\t\t\tlet obj = {\r\n\t\t\t\t\t\tinit() {\r\n\t\t\t\t\t\t\tif (count <= 0) {\r\n\t\t\t\t\t\t\t\tL.appendHeadDom(styleDom);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tcount++;\r\n\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\tdestroy() {\r\n\t\t\t\t\t\t\t\t\tif (--count <= 0) {\r\n\t\t\t\t\t\t\t\t\t\tlet element = document.getElementById(id);\r\n\t\t\t\t\t\t\t\t\t\tif (element) {\r\n\t\t\t\t\t\t\t\t\t\t\telement.parentNode.removeChild(element);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t};\r\n\t\t\t\t\treturn obj;\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t},\r\n\t\tdecodeBase64(base64Content) {\r\n\t\t\tif (base64Content) {\r\n\t\t\t\treturn base64.decode(base64Content);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t};\r\n\r\n\treturn mod;\r\n});\r\n","import U from \"../../util/index.js\";\r\nconst L = U.global.xsloader;\r\n\r\n/**\r\n{\r\n\t cmd:{\r\n\t\t selfclients:{//自己连接服务端的实例\r\n\t\t\t id:Client\r\n\t\t },\r\n\t\t server:Connector,//服务端\r\n\t\t clients:{//作为服务端接收的客户端实例\r\n\t\t\t id:Client\r\n\t\t }\r\n\t}\r\n }\r\n */\r\nconst CONNS_MAP = {};\r\nconst DEBUG_OPTION = {\r\n\tlogMessage: false,\r\n};\r\n\r\nclass Debug {\r\n\tconstructor() {\r\n\r\n\t}\r\n\r\n\tset logMessage(log) {\r\n\t\tDEBUG_OPTION.logMessage = !!log;\r\n\t}\r\n\r\n\tget logMessage() {\r\n\t\treturn DEBUG_OPTION.logMessage;\r\n\t}\r\n}\r\n\r\n\r\nfunction currentTimemillis() {\r\n\treturn new Date().getTime();\r\n}\r\n\r\nfunction runAfter(time, callback) {\r\n\treturn setTimeout(callback, time);\r\n}\r\n\r\nfunction clearRunAfter(timer) {\r\n\tclearTimeout(timer);\r\n}\r\n\r\nlet timer = null;\r\n\r\nfunction destroyTimer() {\r\n\tif (timer) {\r\n\t\tclearInterval(timer);\r\n\t\ttimer = null;\r\n\t}\r\n}\r\n\r\nfunction startTimer() {\r\n\tdestroyTimer();\r\n\ttimer = setInterval(() => {\r\n\t\tfor (let cmd in CONNS_MAP) {\r\n\t\t\tlet obj = CONNS_MAP[cmd];\r\n\t\t\tfor (let id in obj.clients) {\r\n\t\t\t\tobj.clients[id].checkHeart();\r\n\t\t\t}\r\n\r\n\t\t\tfor (let id in obj.selfclients) {\r\n\t\t\t\tobj.selfclients[id].checkHeart();\r\n\t\t\t}\r\n\t\t}\r\n\t}, parseInt(5 + Math.random() * 10) * 1000);\r\n}\r\n\r\n\r\nfunction doSendMessage(isserver, source, msg) {\r\n\tmsg = {\r\n\t\tisserver: !!isserver, //是否是服务端发送的\r\n\t\t...msg,\r\n\t\t__ifmsg: true,\r\n\t};\r\n\ttry {\r\n\t\tsource.postMessage(msg, \"*\");\r\n\t} catch (e) {\r\n\t\tconsole.error(e);\r\n\t\tconsole.error(msg);\r\n\t}\r\n}\r\n\r\nfunction checkSource(client, source) {\r\n\tif (client && client.source.get() != source) { //防止其他窗口发过来\r\n\t\tconsole.error(\"source error:\", client.source.get(), source);\r\n\t\tthrow new Error(\"source error:not match\");\r\n\t}\r\n}\r\n\r\nconst MESSAGE_LISTENER = (event) => {\r\n\tlet {\r\n\t\tdata,\r\n\t\tsource,\r\n\t\torigin,\r\n\t} = event;\r\n\tif (L.isObject(data) && data.__ifmsg === true) {\r\n\t\tlet {\r\n\t\t\tcmd,\r\n\t\t\tfromid,\r\n\t\t\ttoid,\r\n\t\t\tmdata,\r\n\t\t\ttype,\r\n\t\t\terr,\r\n\t\t\tisserver,\r\n\t\t} = data;\r\n\r\n\t\tif (DEBUG_OPTION.logMessage) {\r\n\t\t\tconsole.log(location.href, \" receive:\");\r\n\t\t\tconsole.log(data);\r\n\t\t}\r\n\r\n\t\tlet obj = CONNS_MAP[cmd];\r\n\t\tif (!obj) {\r\n\t\t\tif (type != \"ignore\") {\r\n\t\t\t\tdoSendMessage(!isserver, source, {\r\n\t\t\t\t\tcmd,\r\n\t\t\t\t\ttype: \"ignore\",\r\n\t\t\t\t\ttoid: fromid,\r\n\t\t\t\t\tdata,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (type == \"connecting\") { //服务端\r\n\t\t\t\tif (!obj.server) {\r\n\t\t\t\t\tdoSendMessage(!isserver, source, {\r\n\t\t\t\t\t\tcmd,\r\n\t\t\t\t\t\ttype: \"connecting-fail\",\r\n\t\t\t\t\t\ttoid: fromid,\r\n\t\t\t\t\t\terr: \"not a server,cmd=${cmd}\"\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (obj.clients[fromid]) {\r\n\t\t\t\t\t\tif (currentTimemillis() - obj.clients[fromid]._createTime > 10 * 1000) {\r\n\t\t\t\t\t\t\tdoSendMessage(!isserver, source, {\r\n\t\t\t\t\t\t\t\tcmd,\r\n\t\t\t\t\t\t\t\ttype: \"connecting-fail:duplicate\",\r\n\t\t\t\t\t\t\t\ttoid: fromid,\r\n\t\t\t\t\t\t\t\terr: `duplicate fromid[${fromid}],cmd=${cmd}`\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tlet client = new Client(cmd, source, origin, fromid);\r\n\t\t\t\t\t\tclient._conntimeout = obj.server._connTimeout;\r\n\t\t\t\t\t\tclient._sleeptimeout = obj.server._sleepTimeout;\r\n\t\t\t\t\t\tdoSendMessage(!isserver, source, {\r\n\t\t\t\t\t\t\tcmd,\r\n\t\t\t\t\t\t\ttype: \"connect\",\r\n\t\t\t\t\t\t\tfromid: obj.server.id,\r\n\t\t\t\t\t\t\ttoid: fromid,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tobj.server.onConnect(client, mdata);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else if (type == \"connecting-fail:duplicate\") { //客户端\r\n\t\t\t\tconsole.warn(err);\r\n\t\t\t} else if (type == \"connecting-fail\") { //客户端\r\n\t\t\t\tlet client = obj.selfclients[toid];\r\n\t\t\t\tcheckSource(client, source);\r\n\r\n\t\t\t\tif (client) {\r\n\t\t\t\t\tclient.gotConnectingFail(err);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconsole.warn(err);\r\n\t\t\t\t}\r\n\t\t\t} else if (type == \"connect\") { //客户端\r\n\t\t\t\tlet client = obj.selfclients[toid];\r\n\t\t\t\tcheckSource(client, source);\r\n\r\n\t\t\t\tif (!client) {\r\n\t\t\t\t\tdoSendMessage(!isserver, source, {\r\n\t\t\t\t\t\tcmd,\r\n\t\t\t\t\t\ttype: \"connect-fail\",\r\n\t\t\t\t\t\ttoid: fromid,\r\n\t\t\t\t\t\tfromid: toid,\r\n\t\t\t\t\t\terr: `client not found:clientid=${toid}`\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if (type == \"connect-fail\") { //服务端\r\n\t\t\t\tconsole.warn(err);\r\n\t\t\t} else if (type == \"connected\") {\r\n\t\t\t\tlet client;\r\n\t\t\t\tif (isserver) { //来自服务端\r\n\t\t\t\t\tclient = obj.selfclients[toid];\r\n\t\t\t\t} else {\r\n\t\t\t\t\tclient = obj.clients[fromid];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcheckSource(client, source);\r\n\r\n\t\t\t\tif (client) {\r\n\t\t\t\t\tif (isserver) { //来自服务端\r\n\t\t\t\t\t\tclient.gotConnect(fromid, source, origin, mdata);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else if (type == \"message\") {\r\n\t\t\t\tlet client;\r\n\t\t\t\tif (isserver) { //来自服务端\r\n\t\t\t\t\tclient = obj.selfclients[toid];\r\n\t\t\t\t} else {\r\n\t\t\t\t\tclient = obj.clients[fromid];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcheckSource(client, source);\r\n\r\n\t\t\t\tif (client) {\r\n\t\t\t\t\tif (isserver) { //来自服务端\r\n\t\t\t\t\t\tclient.gotMessage(mdata);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tclient.gotMessage(mdata);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else if (type == \"close\") {\r\n\t\t\t\tlet client;\r\n\t\t\t\tif (isserver) { //来自服务端\r\n\t\t\t\t\tclient = obj.selfclients[toid];\r\n\t\t\t\t} else {\r\n\t\t\t\t\tclient = obj.clients[fromid];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcheckSource(client, source);\r\n\r\n\t\t\t\tif (client) {\r\n\t\t\t\t\tclient.close();\r\n\t\t\t\t}\r\n\t\t\t} else if (type == \"closed\") {\r\n\t\t\t\tlet client;\r\n\t\t\t\tif (isserver) { //来自服务端\r\n\t\t\t\t\tclient = obj.selfclients[toid];\r\n\t\t\t\t} else {\r\n\t\t\t\t\tclient = obj.clients[fromid];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcheckSource(client, source);\r\n\r\n\t\t\t\tif (client) {\r\n\t\t\t\t\tclient.close(false);\r\n\t\t\t\t}\r\n\t\t\t} else if (type == \"heart\") {\r\n\t\t\t\tlet client;\r\n\t\t\t\tif (isserver) { //来自服务端\r\n\t\t\t\t\tclient = obj.selfclients[toid];\r\n\t\t\t\t} else {\r\n\t\t\t\t\tclient = obj.clients[fromid];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcheckSource(client, source);\r\n\r\n\t\t\t\tif (client) {\r\n\t\t\t\t\tclient.gotHeart();\r\n\t\t\t\t\tdoSendMessage(!isserver, source, {\r\n\t\t\t\t\t\tcmd,\r\n\t\t\t\t\t\ttype: \"rheart\",\r\n\t\t\t\t\t\ttoid: fromid,\r\n\t\t\t\t\t\tfromid: toid,\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t} else if (type == \"rheart\") {\r\n\t\t\t\tlet client;\r\n\t\t\t\tif (isserver) { //来自服务端\r\n\t\t\t\t\tclient = obj.selfclients[toid];\r\n\t\t\t\t} else {\r\n\t\t\t\t\tclient = obj.clients[fromid];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcheckSource(client, source);\r\n\r\n\t\t\t\tif (client) {\r\n\t\t\t\t\tclient.gotHeart();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n};\r\n\r\nclass Callback {\r\n\tthiz;\r\n\tcallback;\r\n\tconstructor(thiz, callback) {\r\n\t\tthis.thiz = thiz;\r\n\t\tthis.callback = callback;\r\n\t}\r\n\r\n\tinvoke(args) {\r\n\t\tthis.callback.apply(this.thiz, args);\r\n\t}\r\n}\r\n\r\nCallback.call = function(self, callback) {\r\n\tif (callback) {\r\n\r\n\t\tlet args = [];\r\n\t\tfor (var i = 2; i < arguments.length; i++) {\r\n\t\t\targs.push(arguments[i]);\r\n\t\t}\r\n\r\n\t\tif (callback instanceof Callback) {\r\n\t\t\tcallback.invoke(args);\r\n\t\t} else {\r\n\t\t\tcallback.apply(self, args);\r\n\t\t}\r\n\t}\r\n};\r\n\r\nclass Base {\r\n\t_cmd;\r\n\t_id;\r\n\tconstructor(cmd = \"default\") {\r\n\t\tthis._cmd = cmd;\r\n\t\tthis._id = L.randId();\r\n\t}\r\n\r\n\tget cmd() {\r\n\t\treturn this._cmd;\r\n\t}\r\n\r\n\tget id() {\r\n\t\treturn this._id;\r\n\t}\r\n\r\n\tcloseBase() {\r\n\t\tlet obj = CONNS_MAP[this.cmd];\r\n\t\tif (obj) {\r\n\t\t\tif (!obj.server && U.isEmptyObject(obj.clients) && U.isEmptyObject(obj.selfclients)) {\r\n\t\t\t\tdelete CONNS_MAP[this.cmd];\r\n\t\t\t\tif (U.isEmptyObject(CONNS_MAP)) {\r\n\t\t\t\t\twindow.removeEventListener('message', MESSAGE_LISTENER);\r\n\t\t\t\t\tdestroyTimer();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\n\r\nclass Client extends Base {\r\n\t_source;\r\n\t_origin;\r\n\t_fromid;\r\n\t//////////////////////\r\n\t_connect;\r\n\t_connected = false;\r\n\t_destroyed = false;\r\n\t_onConnect;\r\n\t_onConnectFail;\r\n\t_isself;\r\n\t_conntimeout;\r\n\t_sleeptimeout;\r\n\t_rtimer;\r\n\t_starttime;\r\n\t_failed;\r\n\t////////////////\r\n\t_heartTimeout = 30 * 1000; //心跳超时时间\r\n\t_heartTime = 10 * 1000; //发送心跳的最小间隔\r\n\t_lastSendHeartTime = 0;\r\n\t_lastReceiveHeartTime = 0;\r\n\t_onHeartTimeout;\r\n\t_onClosed;\r\n\t_onMessage;\r\n\t_onConnected;\r\n\t_createTime = currentTimemillis();\r\n\tconstructor(cmd, source, origin, fromid, isself = false) {\r\n\t\tsuper(cmd);\r\n\t\tthis._source = new L.InVar(source);\r\n\t\tthis._origin = origin;\r\n\t\tthis._fromid = fromid;\r\n\t\tthis._isself = isself;\r\n\t}\r\n\r\n\tget source() {\r\n\t\treturn this._source;\r\n\t}\r\n\r\n\tset source(source) {\r\n\t\tif (this._source.get()) {\r\n\t\t\tthrow new Error(`already exists source:id=${this.id}`);\r\n\t\t}\r\n\r\n\t\tthis._source.set(source);\r\n\t}\r\n\r\n\tget isself() {\r\n\t\treturn this._isself;\r\n\t}\r\n\r\n\tget origin() {\r\n\t\treturn this._origin;\r\n\t}\r\n\r\n\tget fromid() {\r\n\t\treturn this._fromid;\r\n\t}\r\n\r\n\tget connected() {\r\n\t\treturn this._connected;\r\n\t}\r\n\r\n\tget destroyed() {\r\n\t\treturn this._destroyed;\r\n\t}\r\n\r\n\tisTimeout() {\r\n\t\tlet dt = currentTimemillis() - this._starttime;\r\n\t\treturn dt > this._conntimeout;\r\n\t}\r\n\r\n\tconnect(conndata) {\r\n\t\tif (!this.isself) {\r\n\t\t\tthrow new Error(\"not allowed for server client!\");\r\n\t\t} else if (this.connected) {\r\n\t\t\t//throw new Error(\"already connected!\");\r\n\t\t} else if (this.destroyed) {\r\n\t\t\tthrow new Error(\"destroyed!\");\r\n\t\t} else if (!this.source.get()) {\r\n\t\t\tthrow new Error(\"no source!\");\r\n\t\t} else {\r\n\t\t\tif (!this._starttime || this._failed) {\r\n\t\t\t\tthis._failed = false;\r\n\t\t\t\tthis._starttime = currentTimemillis();\r\n\t\t\t\tthis._connect = false;\r\n\t\t\t} else if (this._connect) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (U.isEmptyObject(CONNS_MAP)) {\r\n\t\t\t\twindow.addEventListener('message', MESSAGE_LISTENER);\r\n\t\t\t\tstartTimer();\r\n\t\t\t}\r\n\r\n\t\t\tlet msg = {\r\n\t\t\t\tcmd: this.cmd,\r\n\t\t\t\ttype: \"connecting\",\r\n\t\t\t\tfromid: this.id,\r\n\t\t\t\tmdata: conndata\r\n\t\t\t};\r\n\r\n\t\t\tif (!CONNS_MAP[this.cmd]) {\r\n\t\t\t\tCONNS_MAP[this.cmd] = {\r\n\t\t\t\t\tserver: null,\r\n\t\t\t\t\tclients: {},\r\n\t\t\t\t\tselfclients: {}\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\tCONNS_MAP[this.cmd].selfclients[this.id] = this;\r\n\t\t\tdoSendMessage(false, this.source.get(), msg);\r\n\r\n\t\t\tthis._rtimer = runAfter(this._sleeptimeout, () => {\r\n\t\t\t\tif (this.connected || this._failed || this._connect || this._destroyed) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t} else if (this.isTimeout()) {\r\n\t\t\t\t\tif (!this.connected) {\r\n\t\t\t\t\t\tthis._failed = true;\r\n\t\t\t\t\t\tCallback.call(this, this._onConnectFail, {\r\n\t\t\t\t\t\t\tcmd: this.cmd,\r\n\t\t\t\t\t\t\ttype: \"timeout:connecting\"\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.connect(conndata);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tcheckHeart() {\r\n\t\tif (this.connected && !this._destroyed) {\r\n\t\t\tlet time = currentTimemillis();\r\n\t\t\tif (time - this._lastReceiveHeartTime > this._heartTimeout) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tCallback.call(this, this._onHeartTimeout);\r\n\t\t\t\t} finally {\r\n\t\t\t\t\tthis.close();\r\n\t\t\t\t}\r\n\t\t\t} else if (time - this._lastSendHeartTime > this._heartTime) {\r\n\t\t\t\tthis._lastSendHeartTime = time;\r\n\t\t\t\tdoSendMessage(!this.isself, this.source.get(), {\r\n\t\t\t\t\tcmd: this.cmd,\r\n\t\t\t\t\ttype: \"heart\",\r\n\t\t\t\t\tfromid: this.id,\r\n\t\t\t\t\ttoid: this.fromid\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tgotHeart() {\r\n\t\tthis._lastReceiveHeartTime = currentTimemillis();\r\n\t}\r\n\r\n\t//服务端调用\r\n\tcheckClientConnected(server) {\r\n\t\tif (!this._connected && !this._destroyed && !this._failed) {\r\n\t\t\tif (!this._starttime) {\r\n\t\t\t\tthis._starttime = currentTimemillis();\r\n\t\t\t\tthis._connect = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (this.isTimeout()) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tCallback.call(this, server._onConnectTimeout, this);\r\n\t\t\t\t} finally {\r\n\t\t\t\t\tthis.close();\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthis._rtimer = runAfter(this._sleeptimeout, () => {\r\n\t\t\t\t\tthis.checkClientConnected(server);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tgotConnectingFail(err) {\r\n\t\tthis._failed = true;\r\n\t\tCallback.call(this, this._onConnectFail, {\r\n\t\t\tcmd: this.cmd,\r\n\t\t\ttype: \"fail:connecting\",\r\n\t\t\terr,\r\n\t\t});\r\n\t}\r\n\t//客户端调用\r\n\tgotConnect(fromid, source, origin, conndata) {\r\n\t\tthis._fromid = fromid;\r\n\t\tif (!this._connect && !this._connected && !this._destroyed && !this._failed) {\r\n\t\t\tthis._connect = true;\r\n\t\t\tlet onConn = this._onConnect || ((source, origin, conndata, callback) => {\r\n\t\t\t\t//默认只允许同域\r\n\t\t\t\tlet mine = location.protocol + \"//\" + location.host;\r\n\t\t\t\tcallback(mine == origin, null);\r\n\t\t\t});\r\n\r\n\t\t\tlet callback = (isAccept, errOrConndata) => {\r\n\t\t\t\tif (isAccept) {\r\n\t\t\t\t\tthis.gotConnected();\r\n\t\t\t\t\tdoSendMessage(false, this.source.get(), {\r\n\t\t\t\t\t\tcmd: this.cmd,\r\n\t\t\t\t\t\ttype: \"connected\",\r\n\t\t\t\t\t\tfromid: this.id,\r\n\t\t\t\t\t\ttoid: this.fromid,\r\n\t\t\t\t\t});\r\n\t\t\t\t\tlet onConnected = this._onConnected;\r\n\t\t\t\t\t// || (() => {\r\n\t\t\t\t\t// \tthis.close(false);\r\n\t\t\t\t\t// \tdoSendMessage(true, this.source.get(), {\r\n\t\t\t\t\t// \t\tcmd: this.cmd,\r\n\t\t\t\t\t// \t\ttype: \"close\",\r\n\t\t\t\t\t// \t\tmdata: \"not exists connected handle\",\r\n\t\t\t\t\t// \t\tfromid: this.id,\r\n\t\t\t\t\t// \t\ttoid: this.fromid,\r\n\t\t\t\t\t// \t});\r\n\t\t\t\t\t// });\r\n\t\t\t\t\tCallback.call(this, onConnected);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdoSendMessage(false, this.source.get(), {\r\n\t\t\t\t\t\tcmd: this.cmd,\r\n\t\t\t\t\t\ttype: \"connected-fail\",\r\n\t\t\t\t\t\terr: errOrConndata,\r\n\t\t\t\t\t\tfromid: this.id,\r\n\t\t\t\t\t\ttoid: this.fromid,\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tCallback.call(this, onConn, source, origin, conndata, callback);\r\n\t\t}\r\n\t}\r\n\r\n\tgotConnected() {\r\n\t\tclearRunAfter(this._rtimer);\r\n\t\tthis._rtimer = null;\r\n\r\n\t\tlet time = currentTimemillis();\r\n\t\tthis._lastSendHeartTime = time;\r\n\t\tthis._lastReceiveHeartTime = time;\r\n\t\tthis._connected = true;\r\n\t}\r\n\r\n\tgotMessage(mdata) {\r\n\t\tCallback.call(this, this._onMessage, mdata);\r\n\t}\r\n\r\n\tclose(sendClosed = true) {\r\n\t\ttry {\r\n\t\t\tlet obj = CONNS_MAP[this.cmd];\r\n\t\t\tif (obj) {\r\n\t\t\t\tif (this.isself) {\r\n\t\t\t\t\tif (obj.selfclients) {\r\n\t\t\t\t\t\tdelete obj.selfclients[this.id];\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (obj.clients) {\r\n\t\t\t\t\t\tdelete obj.clients[this.fromid];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (this._rtimer) {\r\n\t\t\t\tclearRunAfter(this._rtimer);\r\n\t\t\t\tthis._rtimer = null;\r\n\t\t\t}\r\n\r\n\t\t\tthis._connected = false;\r\n\t\t\tthis._destroyed = true;\r\n\t\t\tthis.closeBase();\r\n\r\n\t\t\tif (sendClosed && this.source.get()) {\r\n\t\t\t\tdoSendMessage(!this.isself, this.source.get(), {\r\n\t\t\t\t\tcmd: this.cmd,\r\n\t\t\t\t\ttype: \"closed\",\r\n\t\t\t\t\tfromid: this.id,\r\n\t\t\t\t\ttoid: this.fromid\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t} finally {\r\n\t\t\tCallback.call(this, this._onClosed);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @param {Function} onHeartTimeout\r\n\t */\r\n\tset onHeartTimeout(onHeartTimeout) {\r\n\t\tthis._onHeartTimeout = onHeartTimeout ? new Callback(this, onHeartTimeout) : null;\r\n\t}\r\n\r\n\tget onHeartTimeout() {\r\n\t\treturn this._onHeartTimeout && this._onHeartTimeout.callback;\r\n\t}\r\n\r\n\t/**\r\n\t * @param {Function} onHeartTimeout\r\n\t */\r\n\tset onClosed(onClosed) {\r\n\t\tthis._onClosed = onClosed ? new Callback(this, onClosed) : null;\r\n\t}\r\n\r\n\tget onClosed() {\r\n\t\treturn this._onClosed && this._onClosed.callback;\r\n\t}\r\n\r\n\t/**\r\n\t * @param {Function} onMessage funcation(data)\r\n\t */\r\n\tset onMessage(onMessage) {\r\n\t\tthis._onMessage = onMessage ? new Callback(this, onMessage) : null;\r\n\t}\r\n\r\n\tget onMessage() {\r\n\t\treturn this._onMessage && this._onMessage.callback;\r\n\t}\r\n\r\n\tsendMessage(data) {\r\n\t\tif (this.destroyed) {\r\n\t\t\tthrow new Error(\"destroyed!\");\r\n\t\t} else if (this.connected) {\r\n\t\t\tdoSendMessage(!this.isself, this.source.get(), {\r\n\t\t\t\tcmd: this.cmd,\r\n\t\t\t\ttype: \"message\",\r\n\t\t\t\tmdata: data,\r\n\t\t\t\tfromid: this.id,\r\n\t\t\t\ttoid: this.fromid\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tthrow new Error(\"not connected!\");\r\n\t\t}\r\n\t}\r\n}\r\n\r\n\r\n/**\r\n * 负责建立连接。\r\n */\r\nclass Server extends Base {\r\n\t_start;\r\n\t_destroyed = false;\r\n\t_onConnect;\r\n\t_onConnectTimeout;\r\n\t_onConnected;\r\n\t_conntimeout;\r\n\t_sleeptimeout;\r\n\t#singleMode;\r\n\t#singleClient;//用于单例模式\r\n\tconstructor(cmd, singleMode) {\r\n\t\tsuper(cmd);\r\n\t\tthis.#singleMode = singleMode;\r\n\t\tthis._id = L.randId();\r\n\t\tthis.onConnectTimeout = (client) => {\r\n\t\t\tconsole.warn(\"client connect timeout:\", client);\r\n\t\t};\r\n\t}\r\n\r\n\tget isSingle() {\r\n\t\treturn this.#singleMode;\r\n\t}\r\n\r\n\tget client() {\r\n\t\tif (!this.#singleMode) {\r\n\t\t\tthrow new Error(\"not single mode\");\r\n\t\t} else {\r\n\t\t\treturn this.#singleClient;\r\n\t\t}\r\n\t}\r\n\r\n\tonConnect(client, conndata) {\r\n\t\tlet obj = CONNS_MAP[this.cmd];\r\n\t\tobj.clients[client.fromid] = client;\r\n\r\n\t\tlet onConn = this._onConnect || ((client, conndata, callback) => {\r\n\t\t\t//默认只允许同域\r\n\t\t\tlet mine = location.protocol + \"//\" + location.host;\r\n\t\t\tcallback(mine == client.origin, null);\r\n\t\t});\r\n\r\n\t\tlet callback = (isAccept, errOrConndata) => {\r\n\t\t\tif (isAccept) {\r\n\t\t\t\tclient.gotConnected();\r\n\t\t\t\tdoSendMessage(true, client.source.get(), {\r\n\t\t\t\t\tcmd: this.cmd,\r\n\t\t\t\t\ttype: \"connected\",\r\n\t\t\t\t\tmdata: errOrConndata,\r\n\t\t\t\t\tfromid: this.id,\r\n\t\t\t\t\ttoid: client.fromid,\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif (this.#singleMode && this.#singleClient) {\r\n\t\t\t\t\tthis.#singleClient.close();\r\n\t\t\t\t\tthis.#singleClient = null;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet onConnected = this._onConnected || (() => {\r\n\t\t\t\t\tif (this.#singleMode) {\r\n\t\t\t\t\t\tthis.#singleClient = null;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tclient.close(false);\r\n\t\t\t\t\tdoSendMessage(true, client.source.get(), {\r\n\t\t\t\t\t\tcmd: this.cmd,\r\n\t\t\t\t\t\ttype: \"close\",\r\n\t\t\t\t\t\tmdata: \"not exists connected handle\",\r\n\t\t\t\t\t\tfromid: this.id,\r\n\t\t\t\t\t\ttoid: client.fromid,\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif (this.#singleMode) {\r\n\t\t\t\t\tthis.#singleClient = client;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tCallback.call(this, onConnected, client);\r\n\t\t\t\tclient.checkClientConnected(this);\r\n\t\t\t} else {\r\n\t\t\t\tclient.close(false);\r\n\t\t\t\tdoSendMessage(true, client.source.get(), {\r\n\t\t\t\t\tcmd: this.cmd,\r\n\t\t\t\t\ttype: \"connected-fail\",\r\n\t\t\t\t\terr: errOrConndata,\r\n\t\t\t\t\tfromid: this.id,\r\n\t\t\t\t\ttoid: client.fromid,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t};\r\n\t\tCallback.call(this, onConn, client, conndata, callback);\r\n\t}\r\n\r\n\tclose() {\r\n\t\tif (this._destroyed) {\r\n\t\t\tthrow new Error(\"already destroyed!\");\r\n\t\t} else {\r\n\t\t\tlet obj = CONNS_MAP[this.cmd];\r\n\t\t\tif (!obj.server || obj.server != this) {\r\n\t\t\t\tthrow new Error(`server cmd not match:cmd=${this.cmd}`);\r\n\t\t\t} else {\r\n\t\t\t\tthis._destroyed = true;\r\n\t\t\t\tthis._start = false;\r\n\t\t\t\tfor (let k in obj.clients) {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tlet client = obj.clients[k];\r\n\t\t\t\t\t\tclient.close();\r\n\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\tconsole.error(e);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tobj.clients = {};\r\n\t\t\t\tobj.server = null;\r\n\t\t\t\tthis.#singleClient = null;\r\n\t\t\t\tthis.closeBase();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tlisten() {\r\n\t\tif (CONNS_MAP[this.cmd]) {\r\n\t\t\tthrow new Error(`already listened:cmd=${this.cmd}`);\r\n\t\t} else {\r\n\t\t\tif (U.isEmptyObject(CONNS_MAP)) {\r\n\t\t\t\twindow.addEventListener('message', MESSAGE_LISTENER);\r\n\t\t\t\tstartTimer();\r\n\t\t\t}\r\n\r\n\t\t\tif (!CONNS_MAP[this.cmd]) {\r\n\t\t\t\tCONNS_MAP[this.cmd] = {\r\n\t\t\t\t\tserver: null,\r\n\t\t\t\t\tclients: {},\r\n\t\t\t\t\tselfclients: {}\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\tCONNS_MAP[this.cmd].server = this;\r\n\t\t\tthis._start = true;\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\n\r\nclass IfmsgServer {\r\n\t#server;\r\n\tconstructor(cmd, option) {\r\n\t\tconst gconfig = L.config().plugins.ifmsg;\r\n\t\t\r\n\t\tif (option === true || option === false) {\r\n\t\t\toption = {\r\n\t\t\t\tsingleMode: option\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\toption = L.extend({\r\n\t\t\tconnTimeout: gconfig.connTimeout,\r\n\t\t\tsleepTimeout: gconfig.sleepTimeout,\r\n\t\t\tsingleMode: false,\r\n\t\t}, option);\r\n\r\n\t\tthis.#server = new Server(cmd, option.singleMode);\r\n\t\tthis.#server._conntimeout = option.connTimeout;\r\n\t\tthis.#server._sleeptimeout = option.sleepTimeout;\r\n\t}\r\n\r\n\t/**\r\n\t *@param {Function} onConnect  function(client,conndata,callback(isAccept,errOrConndata))\r\n\t */\r\n\tset onConnect(onConnect) {\r\n\t\tthis.#server._onConnect = onConnect ? new Callback(this, onConnect) : null;\r\n\t}\r\n\r\n\tget onConnect() {\r\n\t\treturn this.#server._onConnect && this.#server._onConnect.callback;\r\n\t}\r\n\r\n\t/**\r\n\t * @param {Function} onConnectTimeout function(client)\r\n\t */\r\n\tset onConnectTimeout(onConnectTimeout) {\r\n\t\tthis.#server._onConnectTimeout = onConnectTimeout ? new Callback(this, onConnectTimeout) : null;\r\n\t}\r\n\r\n\tget onConnectTimeout() {\r\n\t\treturn this.#server._onConnectTimeout && this.#server._onConnectTimeout.callback;\r\n\t}\r\n\r\n\t/**\r\n\t * @param {Function} onConnected function(client)\r\n\t */\r\n\tset onConnected(onConnected) {\r\n\t\tthis.#server._onConnected = onConnected ? new Callback(this, onConnected) : null;\r\n\t}\r\n\r\n\tget onConnected() {\r\n\t\treturn this.#server._onConnected && this.#server._onConnected.callback;\r\n\t}\r\n\r\n\tget isStart() {\r\n\t\treturn this.#server._start;\r\n\t}\r\n\r\n\tget isDestroyed() {\r\n\t\treturn this.#server._destroyed;\r\n\t}\r\n\r\n\tget cmd() {\r\n\t\treturn this.#server.cmd;\r\n\t}\r\n\r\n\tlisten() {\r\n\t\tthis.#server.listen();\r\n\t}\r\n\r\n\tclose() {\r\n\t\tthis.#server.close();\r\n\t}\r\n\r\n\tget isSingle() {\r\n\t\treturn this.#server.isSingle;\r\n\t}\r\n\r\n\tget client() {\r\n\t\treturn this.#server.client;\r\n\t}\r\n\t\r\n}\r\n\r\nclass IfmsgClient {\r\n\t#client;\r\n\tconstructor(cmd, option) {\r\n\t\tconst gconfig = L.config().plugins.ifmsg;\r\n\t\toption = L.extend({\r\n\t\t\tconnTimeout: gconfig.connTimeout,\r\n\t\t\tsleepTimeout: gconfig.sleepTimeout,\r\n\t\t}, option);\r\n\r\n\t\tthis.#client = new Client(cmd, null, null, null, true);\r\n\t\tthis.#client._conntimeout = option.connTimeout;\r\n\t\tthis.#client._sleeptimeout = option.sleepTimeout;\r\n\t\tthis.onConnectFail = (err) => {\r\n\t\t\tconsole.warn(err);\r\n\t\t};\r\n\t}\r\n\r\n\tconnIframe(iframe, conndata) {\r\n\t\tlet winObj;\r\n\t\tif (typeof iframe == \"string\") {\r\n\t\t\tiframe = document.getElementById(iframe);\r\n\t\t\tlet fun = () => {\r\n\t\t\t\tiframe.removeEventListener(\"load\", fun);\r\n\t\t\t\tlet source = iframe.contentWindow;\r\n\t\t\t\tthis.#client.source.set(source);\r\n\t\t\t\tthis.#client.connect(conndata);\r\n\t\t\t};\r\n\t\t\tiframe.addEventListener(\"load\", fun);\r\n\t\t} else {\r\n\t\t\tlet source = iframe.contentWindow;\r\n\t\t\tthis.#client.source.set(source);\r\n\t\t\tthis.#client.connect(conndata);\r\n\t\t}\r\n\t}\r\n\r\n\tconnParent(conndata) {\r\n\t\tthis.#client.source.set(window.parent);\r\n\t\tthis.#client.connect(conndata);\r\n\t}\r\n\r\n\tconnTop(conndata) {\r\n\t\tthis.#client.source.set(window.top);\r\n\t\tthis.#client.connect(conndata);\r\n\t}\r\n\r\n\tconnOpener(conndata) {\r\n\t\tthis.#client.source.set(window.opener);\r\n\t\tthis.#client.connect(conndata);\r\n\t}\r\n\r\n\t/**\r\n\t *@param {Function} onConnect  function(source,origin,conndata,callback(isAccept,err))\r\n\t */\r\n\tset onConnect(onConnect) {\r\n\t\tthis.#client._onConnect = onConnect ? new Callback(this, onConnect) : null;\r\n\t}\r\n\r\n\tget onConnect() {\r\n\t\treturn this.#client._onConnect && this.#client._onConnect.callback;\r\n\t}\r\n\r\n\t/**\r\n\t *@param {Function} onConnected\r\n\t */\r\n\tset onConnected(onConnected) {\r\n\t\tthis.#client._onConnected = onConnected ? new Callback(this, onConnected) : null;\r\n\t}\r\n\r\n\tget onConnected() {\r\n\t\treturn this.#client._onConnected && this.#client._onConnected.callback;\r\n\t}\r\n\r\n\tsendMessage(data) {\r\n\t\tthis.#client.sendMessage(data);\r\n\t}\r\n\r\n\t/**\r\n\t * @param {Function} onHeartTimeout\r\n\t */\r\n\tset onHeartTimeout(onHeartTimeout) {\r\n\t\tthis.#client.onHeartTimeout = onHeartTimeout;\r\n\t}\r\n\r\n\tget onHeartTimeout() {\r\n\t\treturn this.#client.onHeartTimeout;\r\n\t}\r\n\r\n\t/**\r\n\t * @param {Function} onHeartTimeout\r\n\t */\r\n\tset onClosed(onClosed) {\r\n\t\tthis.#client.onClosed = onClosed;\r\n\t}\r\n\r\n\tget onClosed() {\r\n\t\treturn this.#client.onClosed;\r\n\t}\r\n\r\n\t/**\r\n\t * @param {Function} onMessage funcation(data)\r\n\t */\r\n\tset onMessage(onMessage) {\r\n\t\tthis.#client.onMessage = onMessage;\r\n\t}\r\n\r\n\tget onMessage() {\r\n\t\treturn this.#client.onMessage;\r\n\t}\r\n\r\n\t/**\r\n\t * @param {Function} callback function(err)\r\n\t */\r\n\tset onConnectFail(callback) {\r\n\t\tthis.#client._onConnectFail = callback ? new Callback(this, callback) : null;\r\n\t}\r\n\r\n\tget onConnectFail() {\r\n\t\treturn this.#client._onConnectFail && this.#client._onConnectFail.callback;\r\n\t}\r\n\r\n\tget connected() {\r\n\t\treturn this.#client.connected;\r\n\t}\r\n\r\n\tget destroyed() {\r\n\t\treturn this.#client.destroyed;\r\n\t}\r\n\r\n\tclose() {\r\n\t\tthis.#client.close();\r\n\t}\r\n\r\n}\r\n\r\nL.define(\"ifmsg\", {\r\n\tServer: IfmsgServer,\r\n\tClient: IfmsgClient,\r\n\tdebug: new Debug(),\r\n});\n","import script from \"../script.js\";\r\nimport U from \"../../util/index.js\";\r\nconst L = U.global.xsloader;\r\n\r\n//内部依赖加载插件\r\n\r\nL.define(script.INNER_DEPS_PLUGIN, {\r\n\tpluginMain(depId, onload, onerror, config) {\r\n\t\tlet depsObj = script.innerDepsMap[depId];\r\n\t\tlet deps = depsObj.deps;\r\n\t\t//delete innerDepsMap[depId];\r\n\t\tlet newInvoker = this.invoker().withAbsUrl(depsObj.absUrl);\r\n\t\tnewInvoker.src = () => depsObj.src;\r\n\t\tnewInvoker.require(deps, function() {\r\n\t\t\tlet args = [];\r\n\t\t\tfor(let k = 0; k < arguments.length; k++) {\r\n\t\t\t\targs.push(arguments[k]);\r\n\t\t\t}\r\n\t\t\tonload(args);\r\n\t\t}).then({\r\n\t\t\torderDep: depsObj.orderDep,\r\n\t\t\terror(err, invoker) {\r\n\t\t\t\tonerror(new U.PluginError(err, invoker));\r\n\t\t\t}\r\n\t\t}).setTag(`${script.INNER_DEPS_PLUGIN}![${deps.join(',')}]`);\r\n\t},\r\n\tgetCacheKey(depId) {\r\n\t\treturn depId;\r\n\t}\r\n});","import U from \"../../util/index.js\";\r\nconst L = U.global.xsloader;\r\n\r\nL.define(\"ready\", {\r\n\tpluginMain(depId, onload, onerror, config) {\r\n\t\tL.onReady(function() {\r\n\t\t\tonload();\r\n\t\t});\r\n\t}\r\n});","import U from \"../../util/index.js\";\r\nconst L = U.global.xsloader;\r\n\r\nclass TryModule {\r\n\t#state=\"loading\";\r\n\t#mod=undefined;\r\n\t#err=undefined;\r\n\t#successArray=[];\r\n\t#failedArray=[];\r\n\t#finishArray=[];\r\n\r\n\tconstructor(promise) {\r\n\t\tpromise.then((mod) => {\r\n\t\t\tthis.#state = \"defined\";\r\n\t\t\tthis.#mod = mod;\r\n\t\t\tthis.#invokeFuns(this.#successArray, [mod]);\r\n\t\t\tthis.#invokeFuns(this.#finishArray, [true, mod]);\r\n\t\t}, (err) => {\r\n\t\t\tthis.#state = \"failed\";\r\n\t\t\tthis.#mod = err;\r\n\t\t\tthis.#invokeFuns(this.#failedArray, [err]);\r\n\t\t\tthis.#invokeFuns(this.#finishArray, [false, err]);\r\n\t\t});\r\n\t}\r\n\r\n\t#invokeFuns\r\n\t(funs, args) {\r\n\t\tfor (let i = 0; i < funs.length; i++) {\r\n\t\t\ttry {\r\n\t\t\t\tfuns[i].apply(this, args);\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.error(e);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tget state() {\r\n\t\treturn this.#state;\r\n\t}\r\n\r\n\tget module() {\r\n\t\treturn this.#mod;\r\n\t}\r\n\r\n\tget err() {\r\n\t\treturn this.#err;\r\n\t}\r\n\r\n\tget isOk() {\r\n\t\treturn this.#state == \"defined\";\r\n\t}\r\n\r\n\tset success(callback) {\r\n\t\tif (this.#state == \"defined\") {\r\n\t\t\tcallback(this.#mod);\r\n\t\t} else if (this.#state == \"loading\") {\r\n\t\t\tthis.#successArray.push(callback);\r\n\t\t}\r\n\t}\r\n\r\n\tset failed(callback) {\r\n\t\tif (this.#state == \"failed\") {\r\n\t\t\tcallback(this.#err);\r\n\t\t} else if (this.#state == \"loading\") {\r\n\t\t\tthis.#failedArray.push(callback);\r\n\t\t}\r\n\t}\r\n\r\n\tset finish(callback) {\r\n\t\tif (this.#state == \"failed\" || this.#state == \"defined\") {\r\n\t\t\tlet isOk = this.#state == \"defined\";\r\n\t\t\tlet res = isOk ? this.#mod : this.#err;\r\n\t\t\tcallback(isOk, res);\r\n\t\t} else if (this.#state == \"loading\") {\r\n\t\t\tthis.#finishArray.push(callback);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nL.TryModule = TryModule;\r\n\r\n/**\r\n * 格式:try!module\r\n */\r\nL.define(\"try\", {\r\n\tisSingle: true,\r\n\tpluginMain(arg, onload, onerror, config) {\r\n\t\tlet dep = arg;\r\n\r\n\t\tlet tryModule = new TryModule(new Promise((resolve, reject) => {\r\n\t\t\tthis.invoker().withAbsUrl().require([dep], function(mod, depModuleArgs) {\r\n\t\t\t\tresolve(mod);\r\n\t\t\t}).error(function(err, invoker) {\r\n\t\t\t\tconsole.warn(`try!:require '${dep}' failed`);\r\n\t\t\t\treject(err);\r\n\r\n\t\t\t\t// return {\r\n\t\t\t\t// \tignoreErrState: true,\r\n\t\t\t\t// \tonGetModule: () => {\r\n\t\t\t\t// \t\treturn null;\r\n\t\t\t\t// \t},\r\n\t\t\t\t// \tonFinish: () => {\r\n\t\t\t\t// \t\ttryModule.state = \"failed\";\r\n\t\t\t\t// \t\ttryModule.failed(err, invoker);\r\n\t\t\t\t// \t\treject(err);\r\n\t\t\t\t// \t}\r\n\t\t\t\t// }\r\n\t\t\t}).setTag(`try!${arg}`);\r\n\r\n\t\t}));\r\n\r\n\t\tonload(tryModule);\r\n\t}\r\n});\n","import U from \"../../util/index.js\";\r\nconst L = U.global.xsloader;\r\n\r\n/**\r\n * 插件用于加载某些js文件，忽略其所有依赖，可用于忽略在加载webpack等打包的模块时自动添加内部require('...')的依赖\r\n */\r\nL.define(\"nodeps\", {\r\n\tisSingle: true,\r\n\tpluginMain(arg, onload, onerror, config) {\r\n\t\tthis.invoker().withAbsUrl().require([arg], function(mod, depModuleArgs) {\r\n\t\t\tonload(mod);\r\n\t\t}).then({\r\n\t\t\tdepBefore(index, dep, depDeps) {\r\n\t\t\t\tdepDeps.splice(0, depDeps.length);\r\n\t\t\t}\r\n\t\t}).error(function(e) {\r\n\t\t\tonerror(e);\r\n\t\t}).setTag(`nodeps!${arg}`);\r\n\t}\r\n});","import moduleScript from \"../module.js\";\r\nimport U from \"../../util/index.js\";\r\nconst L = U.global.xsloader;\r\n\r\n/**\r\n * exists!module1 or module2 or module3|windowVar1|windowVar2...\r\n */\r\nL.define(\"exists\", {\r\n\tisSingle: true,\r\n\tpluginMain(arg, onload, onerror, config) {\r\n\t\tlet vars = arg.split(\"|\");\r\n\t\tfor(let i = 0; i < vars.length; i++) {\r\n\t\t\tvars[i] = vars[i].trim();\r\n\t\t}\r\n\t\tif(vars.length == 0) {\r\n\t\t\tonerror(\"args error for exists!\");\r\n\t\t} else {\r\n\t\t\tlet moduleNames = (vars[0].replace(/\\s/g, \" \")).split(\" or \");\r\n\t\t\tlet moduleName;\r\n\t\t\tlet module;\r\n\t\t\tfor(let i = 0; i < moduleNames.length; i++) {\r\n\t\t\t\tmoduleName = moduleNames[i].trim();\r\n\t\t\t\tmodule = moduleScript.getModule(moduleName);\r\n\t\t\t\tif(module) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(module) {\r\n\t\t\t\tthis.invoker().withAbsUrl().require([moduleName], function(mod, depModuleArgs) {\r\n\t\t\t\t\tonload(mod);\r\n\t\t\t\t}).error(function(e) {\r\n\t\t\t\t\tonerror(e);\r\n\t\t\t\t}).setTag(`exists!${arg}`);\r\n\t\t\t} else {\r\n\t\t\t\tlet obj = undefined;\r\n\t\t\t\tfor(let i = 1; i < vars.length; i++) {\r\n\t\t\t\t\tif(window[vars[i]]) {\r\n\t\t\t\t\t\tobj = window[vars[i]];\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif(obj === undefined) {\r\n\t\t\t\t\tonerror(\"not found:\" + arg);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tonload(obj);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n});","import moduleScript from \"../module.js\";\r\nimport U from \"../../util/index.js\";\r\nconst L = U.global.xsloader;\r\n\r\n/**\r\n * 格式:name!moduleName=>>modulePath\r\n */\r\n\r\nL.define(\"name\", {\r\n\tisSingle: true,\r\n\tpluginMain(arg, onload, onerror, config) {\r\n\t\tlet index = arg.indexOf(\"=>>\");\r\n\t\tif (index == -1) {\r\n\t\t\tonerror(\"expected:=>>\");\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tlet moduleName = arg.substring(0, index);\r\n\t\tmoduleName = moduleName.replace(/，/g, ',');\r\n\t\tlet names = moduleName.split(\",\");\r\n\t\tlet dep = arg.substring(index + 3);\r\n\t\tthis.invoker().withAbsUrl().require([dep], function(mod, depModuleArgs) {\r\n\t\t\tlet existsMods = [];\r\n\t\t\tfor (let i = 0; i < names.length; i++) {\r\n\t\t\t\tlet newName = names[i];\r\n\t\t\t\tlet lastM = moduleScript.getModule(newName);\r\n\t\t\t\tif (lastM && lastM.state != \"init\" && !lastM.preDependModule) {\r\n\t\t\t\t\tlet errinfo = \"\\tselfname=\" + newName + \",state=\" + lastM.state + \",src=\" + lastM.src;\r\n\t\t\t\t\tif (lastM.id === depModuleArgs[0].module.id) { //模块自己已经定义了\r\n\t\t\t\t\t\tconsole.info(\"already define name by self:\" + errinfo);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\texistsMods.push(errinfo);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tlet module = depModuleArgs[0].module;\r\n\t\t\t\tif (lastM && !lastM.preDependModule) {\r\n\t\t\t\t\tlastM.toOtherModule(module);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tmoduleScript.setModule(newName, module);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (existsMods.length) {\r\n\t\t\t\tonerror(\"already exists:\" + existsMods.join('\\n'));\r\n\t\t\t} else {\r\n\t\t\t\tonload(mod);\r\n\t\t\t}\r\n\t\t}).error(function(e) {\r\n\t\t\tonerror(e);\r\n\t\t}).setTag(`name!${arg}`);\r\n\t},\r\n});\r\n","import U from \"../../util/index.js\";\r\nimport script from \"../script.js\";\r\nconst L = U.global.xsloader;\r\n\r\n/*\r\n * Require-CSS RequireJS css! loader plugin\r\n * 0.1.8\r\n * Guy Bedford 2014\r\n * MIT\r\n */\r\nL.define(\"css\", function() {\r\n\r\n\tlet lastDom; //始终执行最后一个style（inverse处理的）\r\n\t//层级之间，越顶层的、越在后面；同级之间，索引越大的、越在后面\r\n\tclass Node {\r\n\t\tparent;\r\n\t\tchildren = {};\r\n\t\t_maxindex = -1;\r\n\t\t_minindex;\r\n\t\tdoms = {}; //index:dom\r\n\t\tsrc;\r\n\t\tconstructor(src) {\r\n\t\t\tthis.src = src;\r\n\t\t}\r\n\r\n\t\taddChild(src, node) {\r\n\t\t\tthis.children[src] = node;\r\n\t\t\tnode.parent = this;\r\n\t\t}\r\n\t\tgetChild(src) {\r\n\t\t\treturn this.children[src];\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * 将添加到返回节点之前\r\n\t\t */\r\n\t\tfindAnchor(index, dom) {\r\n\t\t\tif(dom) {\r\n\t\t\t\tthis.doms[index] = dom;\r\n\t\t\t}\r\n\r\n\t\t\tlet anchorDom;\r\n\t\t\tif(this._maxindex == -1) {\r\n\t\t\t\tthis._maxindex = index;\r\n\t\t\t\tthis._minindex = index;\r\n\t\t\t\t//层级之间,反向添加\r\n\t\t\t\tlet p = this.parent;\r\n\t\t\t\twhile(p) {\r\n\t\t\t\t\tif(p._maxindex == -1) {\r\n\t\t\t\t\t\tp = p.parent;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tanchorDom = p.doms[p._minindex];\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\t//同级之间、按照索引大小顺序添加\r\n\t\t\t\tif(index > this._maxindex) {\r\n\t\t\t\t\tanchorDom = this.doms[this._maxindex].nextSibling;\r\n\t\t\t\t\tthis._maxindex = index;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif(this._minindex > index) {\r\n\t\t\t\t\t\tthis._minindex = index;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfor(let i = index + 1; i < this._maxindex; i++) {\r\n\t\t\t\t\t\tif(this.doms[i]) {\r\n\t\t\t\t\t\t\tanchorDom = this.doms[i];\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(!anchorDom) {\r\n\t\t\t\tanchorDom = lastDom ? lastDom.nextSibling : L.script().nextSibling;\r\n\t\t\t}\r\n\r\n\t\t\treturn anchorDom;\r\n\t\t}\r\n\t}\r\n\r\n\tlet engine = window.navigator.userAgent.match(/Trident\\/([^ ;]*)|AppleWebKit\\/([^ ;]*)|Opera\\/([^ ;]*)|rv\\:([^ ;]*)(.*?)Gecko\\/([^ ;]*)|MSIE\\s([^ ;]*)|AndroidWebKit\\/([^ ;]*)/) || 0;\r\n\tlet useImportLoad = false;\r\n\tlet useOnload = true;\r\n\tif(engine[1] || engine[7])\r\n\t\tuseImportLoad = parseInt(engine[1]) < 6 || parseInt(engine[7]) <= 9;\r\n\telse if(engine[2] || engine[8] || 'WebkitAppearance' in document.documentElement.style)\r\n\t\tuseOnload = false;\r\n\telse if(engine[4])\r\n\t\tuseImportLoad = parseInt(engine[4]) < 18;\r\n\tlet cssAPI = {};\r\n\r\n\tlet cssIndex = 0;\r\n\t//src:Node\r\n\tconst rootNodes = {};\r\n\r\n\tfunction domIndex(dom) {\r\n\t\tlet index = 0;\r\n\t\twhile((dom = dom.previousSibling)) {\r\n\t\t\tindex++;\r\n\t\t}\r\n\t\treturn index;\r\n\t}\r\n\r\n\tfunction buildAndGetNode(mthiz) {\r\n\t\tlet src = mthiz.src();\r\n\t\tlet p = mthiz.invoker();\r\n\r\n\t\twhile(p && p.src() == src) {\r\n\t\t\tp = p.invoker();\r\n\t\t}\r\n\r\n\t\tif(p) {\r\n\t\t\tlet pnode = buildAndGetNode(p);\r\n\t\t\tlet node = pnode.getChild(src);\r\n\t\t\tif(!node) {\r\n\t\t\t\tnode = new Node(src);\r\n\t\t\t\tpnode.addChild(src, node);\r\n\t\t\t}\r\n\t\t\treturn node;\r\n\t\t} else {\r\n\t\t\t//root\r\n\t\t\tif(!rootNodes[src]) {\r\n\t\t\t\trootNodes[src] = new Node(src);\r\n\t\t\t}\r\n\t\t\treturn rootNodes[src];\r\n\t\t}\r\n\t}\r\n\r\n\tfunction appendCssDom(dom, cssThis, inverse) {\r\n\t\tif(cssThis && inverse) {\r\n\t\t\tlet mthis = cssThis.invoker();\r\n\t\t\tlet node = buildAndGetNode(mthis);\r\n\t\t\tdom.setAttribute(\"data-insert-index\", cssIndex++);\r\n\t\t\tlet index = cssThis.getIndex();\r\n\t\t\tlet nextDom = node.findAnchor(index, dom);\r\n\t\t\tscript.head().insertBefore(dom, nextDom);\r\n\r\n\t\t\tif(!lastDom || domIndex(dom) > domIndex(lastDom)) {\r\n\t\t\t\tlastDom = dom;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tL.appendHeadDom(dom);\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tlet curStyle, curSheet;\r\n\tlet createStyle = function(mthis, inverse) {\r\n\t\tcurStyle = document.createElement('style');\r\n\t\tappendCssDom(curStyle, mthis, inverse);\r\n\t\tcurSheet = curStyle.styleSheet || curStyle.sheet;\r\n\t};\r\n\tlet ieCnt = 0;\r\n\tlet ieLoads = [];\r\n\tlet ieCurCallback;\r\n\tlet createIeLoad = function(url, mthis, inverse) {\r\n\t\tcurSheet.addImport(url);\r\n\t\tcurStyle.onload = function() {\r\n\t\t\tprocessIeLoad(mthis, inverse);\r\n\t\t};\r\n\r\n\t\tieCnt++;\r\n\t\tif(ieCnt == 31) {\r\n\t\t\tcreateStyle(mthis, inverse);\r\n\t\t\tieCnt = 0;\r\n\t\t}\r\n\t};\r\n\tlet processIeLoad = function(mthis, inverse) {\r\n\t\tieCurCallback();\r\n\t\tlet nextLoad = ieLoads.shift();\r\n\t\tif(!nextLoad) {\r\n\t\t\tieCurCallback = null;\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tieCurCallback = nextLoad[1];\r\n\t\tcreateIeLoad(nextLoad[0], mthis, inverse);\r\n\t};\r\n\tlet importLoad = function(url, callback, mthis, inverse) {\r\n\t\tcallback = callback || function() {};\r\n\t\tif(!curSheet || !curSheet.addImport)\r\n\t\t\tcreateStyle(mthis, inverse);\r\n\r\n\t\tif(curSheet && curSheet.addImport) {\r\n\t\t\tif(ieCurCallback) {\r\n\t\t\t\tieLoads.push([url, callback]);\r\n\t\t\t} else {\r\n\t\t\t\tcreateIeLoad(url, mthis, inverse);\r\n\t\t\t\tieCurCallback = callback;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tcurStyle.textContent = '@import \"' + url + '\";';\r\n\t\t\tlet loadInterval = setInterval(function() {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tcurStyle.sheet.cssRules;\r\n\t\t\t\t\tclearInterval(loadInterval);\r\n\t\t\t\t\tcallback();\r\n\t\t\t\t} catch(e) {\r\n\t\t\t\t\tconsole.warn(e);\r\n\t\t\t\t}\r\n\t\t\t}, 10);\r\n\t\t}\r\n\t};\r\n\tlet linkLoad = function(url, callback, mthis, inverse) {\r\n\t\tcallback = callback || function() {};\r\n\t\tlet link = document.createElement('link');\r\n\t\tlink.type = 'text/css';\r\n\t\tlink.rel = 'stylesheet';\r\n\t\tif(useOnload)\r\n\t\t\tlink.onload = function() {\r\n\t\t\t\tlink.onload = function() {};\r\n\t\t\t\tsetTimeout(callback, 7);\r\n\t\t\t};\r\n\t\telse {\r\n\t\t\tlet loadInterval = setInterval(function() {\r\n\t\t\t\tfor(let i = 0; i < document.styleSheets.length; i++) {\r\n\t\t\t\t\tlet sheet = document.styleSheets[i];\r\n\t\t\t\t\tif(sheet.href == link.href) {\r\n\t\t\t\t\t\tclearInterval(loadInterval);\r\n\t\t\t\t\t\treturn callback();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}, 10);\r\n\t\t}\r\n\t\tlink.href = url;\r\n\t\tappendCssDom(link, mthis, inverse);\r\n\t};\r\n\tcssAPI.pluginMain = function(cssId, onload, onerror, config) {\r\n\t\tlet inverse = !(config.plugins.css && config.plugins.css.inverse === false); //默认逆向\r\n\t\t//\t\t\tif(cssId.indexOf(\".css\") != cssId.length - 4) {\r\n\t\t//\t\t\t\tcssId += \".css\";\r\n\t\t//\t\t\t}\r\n\t\t//\t\tconsole.log(\"cssId=\"+cssId+\",cssSrc=\"+this.invoker().getUrl(cssId, true)+\",absUrl=\"+this.invoker().absUrl());\r\n\t\t(useImportLoad ? importLoad : linkLoad)(this.invoker().getUrl(cssId, true), onload, this, inverse);\r\n\t};\r\n\tcssAPI.getCacheKey = function(cssId) {\r\n\t\t//\t\t\tif(cssId.indexOf(\".css\") != cssId.length - 4) {\r\n\t\t//\t\t\t\tcssId += \".css\";\r\n\t\t//\t\t\t}\r\n\t\tlet invoker = this.invoker();\r\n\t\treturn invoker ? invoker.getUrl(cssId, true) : cssId;\r\n\t};\r\n\tcssAPI.loadCss = function(cssPath, callback) {\r\n\t\t(useImportLoad ? importLoad : linkLoad)(L.getUrl(cssPath), callback);\r\n\t};\r\n\r\n\tcssAPI.loadCsses = function() {\r\n\t\tlet args = arguments;\r\n\t\tfor(let i = 0; i < args.length; i++) {\r\n\t\t\t(useImportLoad ? importLoad : linkLoad)(L.getUrl(args[i]), null);\r\n\t\t}\r\n\t};\r\n\treturn cssAPI;\r\n});","import U from \"../../util/index.js\";\r\nconst L = U.global.xsloader;\r\n\r\nL.define(\"text\", [\"xshttp\"], {\r\n\tisSingle: true,\r\n\tpluginMain(name, onload, onerror, config, http) {\r\n\t\tlet url = this.invoker().getUrl(name, true);\r\n\t\thttp().url(url)\r\n\t\t\t.handleAs(\"text\")\r\n\t\t\t.ok(function(text) {\r\n\t\t\t\tonload(text);\r\n\t\t\t})\r\n\t\t\t.fail(function(err) {\r\n\t\t\t\tonerror(err);\r\n\t\t\t})\r\n\t\t\t.done();\r\n\t},\r\n\tdealPluginArgs(pluginArgs) {\r\n\t\treturn pluginArgs;\r\n\t},\r\n});\r\n","import U from \"../../util/index.js\";\r\nconst L = U.global.xsloader;\r\n/**\r\n * 格式：window!varNameInWindow=>>modulePath\r\n */\r\n//window插件,用于添加模块到window对象中\r\nL.define(\"window\", {\r\n\tisSingle: true,\r\n\tpluginMain: function(arg, onload, onerror, config, http) {\r\n\t\tlet index = arg.indexOf(\"=>>\");\r\n\t\tif (index == -1) {\r\n\t\t\tonerror(\"expected:=>>\");\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tlet moduleName = arg.substring(0, index);\r\n\t\tlet dep = arg.substring(index + 3);\r\n\t\tthis.invoker().withAbsUrl().require([dep], function(mod, depModuleArgs) {\r\n\t\t\twindow[moduleName] = mod;\r\n\t\t\tonload(mod);\r\n\t\t}).setTag(`window!${arg}`);\r\n\t},\r\n});\r\n","import U from \"../../util/index.js\";\r\nconst L = U.global.xsloader;\r\n/**\r\n * 格式:withdeps!modulePath=>>[deps]\r\n */\r\nL.define(\"withdeps\", {\r\n\tpluginMain(arg, onload, onerror, config) {\r\n\t\tlet index = arg.indexOf(\"=>>\");\r\n\t\tif (index == -1) {\r\n\t\t\tonerror(\"expected:=>>\");\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tlet moduleName = arg.substring(0, index);\r\n\t\tlet depsStr = arg.substring(index + 3);\r\n\t\tlet deps;\r\n\t\ttry {\r\n\t\t\tdeps = L.xsParseJson(depsStr);\r\n\t\t\tif (!L.isArray(deps)) {\r\n\t\t\t\tonerror(\"deps is not Array:\" + depsStr);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t} catch (e) {\r\n\t\t\tonerror(\"deps error:\" + depsStr);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.invoker().withAbsUrl().require([\r\n\t\t\t[false].concat(deps), moduleName\r\n\t\t], function(_deps, mod, depModuleArgs) {\r\n\t\t\tonload(mod);\r\n\t\t}).then({\r\n\t\t\torderDep: true\r\n\t\t}).setTag(`withdeps!${arg}`);\r\n\t},\r\n});\r\n","import U from \"../../util/index.js\";\r\nconst L = U.global.xsloader;\r\n\r\n/**\r\n * 加载json对象\r\n */\r\nL.define(\"json\", [\"xshttp\"], {\r\n\tisSingle: true,\r\n\tpluginMain(name, onload, onerror, config, http) {\r\n\t\tlet url = this.invoker().getUrl(name, true);\r\n\t\thttp().url(url)\r\n\t\t\t.handleAs(\"json\")\r\n\t\t\t.ok(function(json) {\r\n\t\t\t\tonload(json);\r\n\t\t\t})\r\n\t\t\t.fail(function(err) {\r\n\t\t\t\tonerror(err);\r\n\t\t\t})\r\n\t\t\t.done();\r\n\t},\r\n\tdealPluginArgs(pluginArgs) {\r\n\t\treturn pluginArgs;\r\n\t},\r\n});\r\n","import U from \"../../util/index.js\";\r\nconst L = U.global.xsloader;\r\n\r\n/**\r\n * 用于图片加载\r\n */\r\nL.define(\"image\", {\r\n\tpluginMain(name, onload, onerror, config) {\r\n\t\tlet src = this.invoker().getUrl(name, false);\r\n\t\tlet img = new Image();\r\n\t\tlet callback = (ok) => {\r\n\t\t\tlet image = img;\r\n\t\t\timg = null;\r\n\t\t\timage.onload = null;\r\n\t\t\timage.οnerrοr = null;\r\n\t\t\tonload(ok ? image : null);\r\n\t\t};\r\n\t\timg.onload = function() {\r\n\t\t\tcallback(true);\r\n\t\t};\r\n\t\timg.οnerrοr = function() {\r\n\t\t\tcallback(false);\r\n\t\t};\r\n\t\timg.src = src;\r\n\t\tL.asyncCall(() => {\r\n\t\t\tif (img) {\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tif (img) {\r\n\t\t\t\t\t\tcallback(false);\r\n\t\t\t\t\t}\r\n\t\t\t\t}, config.plugins.image.timeout);\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\tdealPluginArgs(pluginArgs) {\r\n\t\treturn pluginArgs;\r\n\t},\r\n});\r\n","import U from \"../../util/index.js\";\r\nconst L = U.global.xsloader;\r\n\r\n/**\r\n * 格式:default!module\r\n */\r\nL.define(\"default\", {\r\n\tisSingle: true,\r\n\tpluginMain(arg, onload, onerror, config) {\r\n\t\tlet dep = arg;\r\n\t\tlet handle = this.invoker().withAbsUrl().require([dep], function(mod, depModuleArgs) {\r\n\t\t\tif(L.isObject(mod)) {\r\n\t\t\t\tmod = mod[\"default\"];\r\n\t\t\t\tif(mod === undefined) {\r\n\t\t\t\t\tmod = null;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tmod = null;\r\n\t\t\t}\r\n\t\t\tonload(mod);\r\n\t\t}).error(function(err, invoker) {\r\n\t\t\tonerror(err);\r\n\t\t}).setTag(`default!${arg}`);\r\n\t},\r\n});","// 静态资源服务\r\nimport U from \"./util/index.js\";\r\n\r\nconst G = U.global;\r\nconst L = G.xsloader;\r\n\r\nconst http = G._xshttp_request_;\r\nconst DATA_CONF = \"data-conf\",\r\n\tDATA_CONFX = \"data-xsloader-conf\";\r\nconst DATA_CONF2 = \"data-conf2\",\r\n\tDATA_CONF2X = \"data-xsloader-conf2\";\r\nconst DATA_MAIN = \"data-main\",\r\n\tDATA_MAINX = \"data-xsloader-main\";\r\nconst DATA_CONF_TYPE = \"data-conf-type\";\r\n\r\nlet serviceConfigUrl;\r\nlet dataConf = L.script().getAttribute(DATA_CONF) || L.script().getAttribute(DATA_CONFX);\r\nlet dataMain = L.script().getAttribute(DATA_MAIN) || L.script().getAttribute(DATA_MAINX);\r\nlet dataConfType = L.script().getAttribute(DATA_CONF_TYPE);\r\nif (dataConfType !== \"json\" && dataConfType != \"js\") {\r\n\tdataConfType = \"auto\";\r\n}\r\n\r\nlet initFun = () => {\r\n\tfunction getMainPath(config) {\r\n\t\tlet mainPath = config.main.getPath.call(config, dataMain);\r\n\t\tlet path = location.pathname;\r\n\r\n\t\tlet index = path.lastIndexOf(\"/\");\r\n\t\tlet name = path.substring(index + 1);\r\n\t\tif (name === \"\") {\r\n\t\t\tname = \"index\";\r\n\t\t}\r\n\t\tif (L.endsWith(name, \".html\")) {\r\n\t\t\tname = name.substring(0, name.length - 5);\r\n\t\t}\r\n\t\tif (!mainPath) {\r\n\t\t\tmainPath = \"./main/{name}.js\";\r\n\t\t}\r\n\t\tmainPath = mainPath.replace(\"{name}\", name);\r\n\t\treturn mainPath;\r\n\t}\r\n\r\n\tfunction extendConfig(config) {\r\n\t\tconfig = L.extendDeep({\r\n\t\t\tproperties: {},\r\n\t\t\tmain: {\r\n\t\t\t\tgetPath() {\r\n\t\t\t\t\treturn dataMain || \"./main/{name}.js\";\r\n\t\t\t\t},\r\n\t\t\t\tname: \"main\",\r\n\t\t\t\tlocalConfigVar: \"lconfig\",\r\n\t\t\t\tglobalConfigVar: \"gconfig\",\r\n\t\t\t\tbefore(name) {\r\n\t\t\t\t\tconsole.log(\"before:\" + name);\r\n\t\t\t\t},\r\n\t\t\t\tafter(name) {\r\n\t\t\t\t\tconsole.log(\"after:\" + name);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tservice: {\r\n\t\t\t\thasGlobal: false,\r\n\t\t\t\tresUrls: []\r\n\t\t\t},\r\n\t\t\tchooseLoader(localConfig) { //返回一个configName；当此函数为service全局配置的函数时，localConfig为应用的配置对象;本地配置调用时，localConfig为null。\r\n\t\t\t\treturn \"default\";\r\n\t\t\t},\r\n\t\t\tloader: {\r\n\t\t\t\t\"default\": {\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}, config);\r\n\r\n\t\treturn config;\r\n\t}\r\n\r\n\tfunction loadServiceConfig(tag, url, callback, isLocal) {\r\n\t\thttp({\r\n\t\t\turl: url,\r\n\t\t\tmethod: \"get\",\r\n\t\t\ttimeout: 20000,\r\n\t\t\thandleType: \"text\",\r\n\t\t\tok(confText) {\r\n\r\n\t\t\t\tlet conf;\r\n\t\t\t\tif (dataConfType == \"js\") {\r\n\t\t\t\t\tconf = L.xsEval(confText);\r\n\t\t\t\t} else if (dataConfType == \"json\") {\r\n\t\t\t\t\tconf = L.xsParseJson(confText);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (L.startsWith(url, location.protocol + \"//\" + location.host + \"/\")) {\r\n\t\t\t\t\t\t//同域则默认用脚本解析\r\n\t\t\t\t\t\tconf = L.xsEval(confText);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconf = L.xsParseJson(confText);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconf = extendConfig(conf);\r\n\t\t\t\tif (conf.beforeDealProperties) {\r\n\t\t\t\t\tconf.beforeDealProperties();\r\n\t\t\t\t}\r\n\t\t\t\tconf = L.dealProperties(conf, conf.properties); //参数处理\r\n\r\n\t\t\t\tif (isLocal && conf.service.hasGlobal) {\r\n\t\t\t\t\tloadServiceConfig(\"global servie\", conf.service.confUrl,\r\n\t\t\t\t\t\tfunction(globalConfig) {\r\n\t\t\t\t\t\t\tlet localConfig = conf;\r\n\t\t\t\t\t\t\tG[globalConfig.main && globalConfig.main.localConfigVar || localConfig.main.localConfigVar] = localConfig;\r\n\t\t\t\t\t\t\tG[globalConfig.main && globalConfig.main.globalConfigVar || localConfig.main.globalConfigVar] = globalConfig;\r\n\r\n\t\t\t\t\t\t\tlet mainName, mainPath, loaderName;\r\n\r\n\t\t\t\t\t\t\tloaderName = globalConfig.chooseLoader.call(globalConfig, localConfig);\r\n\t\t\t\t\t\t\tlet conf;\r\n\t\t\t\t\t\t\tlet loader;\r\n\t\t\t\t\t\t\tif (loaderName != null) {\r\n\t\t\t\t\t\t\t\tmainName = globalConfig.main.name;\r\n\t\t\t\t\t\t\t\tmainPath = U.getPathWithRelative(location.href, getMainPath(globalConfig));\r\n\t\t\t\t\t\t\t\tloader = globalConfig.loader[loaderName];\r\n\t\t\t\t\t\t\t\tconf = globalConfig;\r\n\t\t\t\t\t\t\t\tif (loader) {\r\n\t\t\t\t\t\t\t\t\tglobalConfig.current = loaderName;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif (!loader) {\r\n\t\t\t\t\t\t\t\tloaderName = localConfig.chooseLoader.call(localConfig, null);\r\n\t\t\t\t\t\t\t\tmainName = localConfig.main.name;\r\n\t\t\t\t\t\t\t\tmainPath = U.getPathWithRelative(location.href, getMainPath(localConfig));\r\n\t\t\t\t\t\t\t\tloader = localConfig.loader[loaderName];\r\n\t\t\t\t\t\t\t\tconf = localConfig;\r\n\t\t\t\t\t\t\t\tif (loader) {\r\n\t\t\t\t\t\t\t\t\tlocalConfig.current = loaderName;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif (!loader) {\r\n\t\t\t\t\t\t\t\tconsole.error(\"unknown loader:\" + loaderName + \"\");\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tinitXsloader(mainName, mainPath, loader, conf, localConfig);\r\n\r\n\t\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcallback(conf);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tfail(err) {\r\n\t\t\t\tconsole.error(\"load \" + tag + \" config err:url=\" + url + \",errinfo=\" + err);\r\n\t\t\t}\r\n\t\t}).done();\r\n\t}\r\n\r\n\tfunction startLoad() {\r\n\t\tloadServiceConfig(\"local\", serviceConfigUrl, function(localConfig) {\r\n\t\t\tG[localConfig.main.localConfigVar] = localConfig;\r\n\r\n\t\t\tlet mainName = localConfig.main.name;\r\n\r\n\t\t\tlet href = location.href;\r\n\t\t\tlet index = href.lastIndexOf(\"?\");\r\n\t\t\tif (index >= 0) {\r\n\t\t\t\thref = href.substring(0, index);\r\n\t\t\t}\r\n\r\n\t\t\tlet mainPath = getMainPath(localConfig);\r\n\r\n\t\t\tmainPath = mainPath.indexOf(\"!\") == -1 ? U.getPathWithRelative(href, mainPath) : mainPath;\r\n\t\t\tlet loaderName = localConfig.chooseLoader.call(localConfig, null);\r\n\r\n\t\t\tlet loader = localConfig.loader[loaderName];\r\n\t\t\tif (!loader) {\r\n\t\t\t\tconsole.error(\"unknown local loader:\" + loaderName);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tlocalConfig.current = loaderName;\r\n\t\t\tinitXsloader(href, mainName, mainPath, loader, localConfig, localConfig);\r\n\t\t}, true);\r\n\t}\r\n\r\n\tfunction initXsloader(pageHref, mainName, mainPath, loader, conf, localConfig) {\r\n\t\tlet resUrls = [];\r\n\t\tconf.service.resUrl && resUrls.push(conf.service.resUrl);\r\n\t\tlocalConfig !== conf && localConfig.service.resUrl && resUrls.push(localConfig.service.resUrl);\r\n\r\n\t\tconf.service.resUrls && Array.pushAll(resUrls, conf.service.resUrls);\r\n\t\tlocalConfig !== conf && localConfig.service.resUrls && Array.pushAll(resUrls, localConfig.service.resUrls);\r\n\r\n\t\tL.resUrlBuilder = function(groupModule) {\r\n\t\t\tlet as = [];\r\n\t\t\tU.each(resUrls, function(url) {\r\n\t\t\t\tas.push(L.appendArgs2Url(url, \"m=\" + encodeURIComponent(groupModule)));\r\n\t\t\t});\r\n\t\t\treturn as;\r\n\t\t};\r\n\t\tloader.ignoreProperties = true;\r\n\t\tloader.defineFunction = loader.defineFunction || {};\r\n\t\tloader.depsPaths = loader.depsPaths || {};\r\n\r\n\t\tif (L.endsWith(location.pathname, \".htmv\")) { //用于支持htmv\r\n\t\t\tif (G.__htmv_init_bridge_) {\r\n\t\t\t\tG.__htmv_init_bridge_();\r\n\t\t\t}\r\n\t\t\tmainName = \"htmv-main\";\r\n\t\t\tloader.depsPaths[mainName] = location.href; //让其依赖*中的所有依赖\r\n\t\t\tL(loader);\r\n\t\t} else if (mainPath.indexOf(\"!\") != -1) { //插件调用\r\n\t\t\tlet theConfig = L(loader);\r\n\r\n\t\t\tmainName = \"_plugin_main_\";\r\n\t\t\tlet deps = [];\r\n\t\t\tif (theConfig.deps) { //手动添加*依赖\r\n\t\t\t\tif (theConfig.deps[\"*\"]) {\r\n\t\t\t\t\tArray.pushAll(deps, theConfig.deps[\"*\"]);\r\n\t\t\t\t}\r\n\t\t\t\tif (theConfig.deps[mainName]) {\r\n\t\t\t\t\tArray.pushAll(deps, theConfig.deps[mainName]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tdeps.push(mainPath);\r\n\t\t\tL.define(mainName, deps, function() {\r\n\r\n\t\t\t}).then({\r\n\t\t\t\tabsUrl: pageHref\r\n\t\t\t});\r\n\t\t} else if (!L.hasDefine(mainName)) {\r\n\t\t\tloader.depsPaths[mainName] = mainPath; //让其依赖*中的所有依赖\r\n\t\t\tL(loader);\r\n\t\t} else {\r\n\t\t\tL(loader);\r\n\t\t}\r\n\r\n\t\tloader.defineFunction[mainName] = function(originCallback, originThis, originArgs) {\r\n\t\t\tif (L.isFunction(conf.main.before)) {\r\n\t\t\t\tconf.main.before.call(conf, mainName);\r\n\t\t\t}\r\n\t\t\tlet rt = originCallback.apply(originThis, originArgs);\r\n\r\n\t\t\tif (L.isFunction(conf.main.after)) {\r\n\t\t\t\tconf.main.after.call(conf, mainName);\r\n\t\t\t}\r\n\t\t\treturn rt;\r\n\t\t};\r\n\t\tL.require([mainName], function(main) {\r\n\t\t\t//console.log(main);\r\n\t\t}).error((err, invoker) => {\r\n\t\t\tif (invoker) {\r\n\t\t\t\tconsole.error(\"error occured:invoker.url=\", invoker.getUrl());\r\n\t\t\t}\r\n\t\t\tconsole.error(\"invoke main err:\");\r\n\t\t\tconsole.error(err);\r\n\t\t});\r\n\r\n\t}\r\n\tL.asyncCall(startLoad, true);\r\n};\r\n\r\nif (dataConf) {\r\n\tserviceConfigUrl = U.getPathWithRelative(location.href, dataConf);\r\n} else if ((dataConf = (L.script().getAttribute(DATA_CONF2) || L.script().getAttribute(DATA_CONF2X)))) {\r\n\tserviceConfigUrl = U.getPathWithRelative(L.scriptSrc(), dataConf);\r\n} else {\r\n\tinitFun = null;\r\n}\r\ninitFun && initFun();\r\n","import \"./core/index.js\";\r\nimport \"./define.js\";\r\nimport \"./core/lib/index.js\";\r\nimport \"./core/plugins/index.js\";\r\nimport \"./service.js\"; //放在��\nimport U from \"./util/index.js\";\r\nU.loaderEnd();"],"names":["G","window","self","global","Error","loaderFun","xsloader","apply","arguments","fun","ABSOLUTE_PROTOCOL_REG","ABSOLUTE_PROTOCOL_REG2","defaultJsExts","L","isJsFile","path","isString","indexOf","pluginIndex","substring","index","theConfig","config","jsExts","i","length","endsWith","ext","dealPathMayAbsolute","currentUrl","rs","exec","finalPath","absolute","protocol","_protocol","location","_host","host","getPathWithRelative","relative","isPathDir","relativeQuery","qIndex","lastIndexOf","isRelativeDir","prefix","absolute2","index2","stack","split","pop","relatives","str","push","result","join","appendArgs2Url","getNodeAbsolutePath","node","src","getAttribute","href","removeQueryHash","url","REPLACE_STRING_PROPERTIES_EXP","ALL_TYPE_PROPERTIES_EXP","propertiesDeal","configObject","properties","replaceStringProperties","string","property","propKey","propValue","getObjectAttr","propertyKey","has","replaceProperties","obj","enableKeyAttr","isFunction","isArray","isObject","replaceKeyMap","x","_x","objx","__dealt__","call","replaceModulePrefix","deps","m","pluginParam","query","is","autoExt","test","autoExtSuffix","startsWith","modulePrefixCount","modulePrefix","replaceStr","replace","len","pluginName","dep","getScriptBySubname","subname","ss","document","getElementsByTagName","script","thePageUrl","COMMENT_REGEXP","REPLACE_REQUIRE_GET_REGEXP","REPLACE_REQUIRE_REGEXP","NOT_REQUIRE_REGEXP","InVar","val","get","set","newVal","old","GraphPath","pathEdges","vertexMap","depMap","addEdge","begin","end","hasDep","name","tryAddEdge","paths","hasLoop","visited","recursionStack","checkLoop","v","edges","edge","strValue2Arr","each","ary","func","isSync","fromEnd","handle","__commentReplace","match","singlePrefix","__appendInnerDeps","callbackString","reg","depIndex","notIndex","indexInArray","appendInnerDeps","callback","innerDepType","props","toString","idCount","getAndIncIdCount","PluginError","err","invoker","extra","unwrapError","n","isXsLoaderEnd","IE_VERSION","userAgent","navigator","isIE","isEdge","isIE11","reIE","fIEVersion","parseInt","isEmptyObject","k","graphPath","loaderEnd","isLoaderEnd","whichTransitionEvent","t","el","createElement","transitions","style","transitionEvent","ToProgress","opt","progress","options","id","color","bgColor","height","duration","key","opacityDuration","progressBar","container","setCSS","appendChild","body","prototype","setColor","backgroundColor","_isAuto","_timer","stopAuto","clearInterval","autoIncrement","time","dt","step","setInterval","setProgress","toError","errColor","transit","width","getProgress","show","increase","toBeIncreasedProgress","decrease","toBeDecreasedProgress","finish","setTimeout","hide","parentNode","removeChild","reset","opacity","display","Base64","encode","input","output","chr1","chr2","chr3","enc1","enc2","enc3","enc4","_utf8_encode","charCodeAt","isNaN","charAt","decode","String","fromCharCode","_utf8_decode","utftext","c","c2","c3","urls","base","loading","base64","U","Function","bind","console","method","thiz","e","log","error","warn","Array","elem","offset","pushAll","arr","starts","ends","_indexInArray","array","ele","compare","indexInArrayFrom","JSON","rx_one","rx_two","rx_three","rx_four","rx_escapable","rx_dangerous","f","this_value","valueOf","Date","toJSON","isFinite","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","Boolean","Number","gap","indent","meta","rep","quote","lastIndex","a","slice","holder","mind","partial","value","Object","hasOwnProperty","stringify","replacer","space","parse","text","reviver","j","walk","eval","SyntaxError","proxyPolyfill","lastRevokeFn","ProxyPolyfill","o","target","handler","TypeError","throwRevoked","trap","unsafeHandler","proxy","isMethod","usingNew","constructor","args","unshift","getter","prop","setter","propertyNames","getOwnPropertyNames","Promise","__proto__","forEach","propertyMap","real","getOwnPropertyDescriptor","desc","enumerable","defineProperty","prototypeOk","setPrototypeOf","getPrototypeOf","seal","revocable","p","polyfillInit","ProxyUtil","Proxy","trim","randId","suffix","getTime","Math","random","xsEval","scriptString","xsParseJson","option","extend","fnStart","fnEnd","rcomment","fnMap","fnOffset","indexStart","indexEnd","fnId","fnStr","fn","RegExp","xsJSON","message","posStr","pos","_str","e2","xsJson2String","_toParamsMap","argsStr","search","ret","seg","s","decodeURIComponent","urlArgs","hashIndex","oldParams","newParams","paramKeys","sort","params","hash","domAttr","dom","attr","queryString2ParamsMap","ostring","it","isDate","isRegExp","isEmpty","queryParam","otherValue","optionUrl","substr","r","getUrl","relativeUrl","appendArgs","optionalAbsUrl","baseUrl","dealUrl","getUrl2","tryCall","defaultReturn","exCallback","dealProperties","extendDeep","_AsyncCall","useTimer","count","ctrlCallbackMap","initCtrlCallback","callbackObj","mineCount","ctrlCallback","asyncCallQueue","shift","lastReturn","nextCallback","nextObj","pushTask","next","resolve","then","queue","theAsyncCall","theAsyncCallOfTimer","asyncCall","attrNames","defaultValue","attrs","setObjectAttr","_obj","clone","isDeep","source","flags","copy","setTime","sortObject","keys","newObj","isDOM","HTMLElement","nodeType","nodeName","onReadyFun","isGlobalReady","bindReadyQueue","BindReady","isReady","removeListener","ready","addEventListener","removeEventListener","attachEvent","readyState","detachEvent","fun2","documentElement","doScroll","frameElement","readyCall","onReady","br","addEventHandle","remove","type","env","version","toGlobal","deprecated","justLoader","funs","browser","ignoreAspect_","theDefinedMap","lastDefinObjectMap","__showModules","ModuleDef","isPreDependOn","defaultModule","modules","_preModule","_preIndex","targetDef","preDependModule","relyQueue","relyIt","module","_isSrc","nameOrUrl","isSrc","setLastDefineObject","defineObject","getLastDefineObject","appendLoadingModuleDeps","moduleDef","mod","state","_deps","pushName","selfname","getModule","ifoneThenGet","preDependOn","def","replaceModuleSrc","oldSrc","clearEmptyModuleBySrc","setModule","lasfDef","giveRelys","newModuleInstance","thatInvoker","relyCallback","instanceModule","_invoker","_module_","initInvoker","ignoreAspect","_object","addTheAttrs","theObj","_invoker_","_modules_","isSingle","instanceType","loopObject","description","_setDepModuleObjectGen","moduleObject","genExports","_dealPluginArgs","pluginArgs","dealPluginArgs","argArr","_getCacheKey","getCacheKey","_willCache","cacheResult","willCache","lastSinglePluginResult","setSinglePluginResult","initInstance","justForSingle","originPluginArgs","dealInstance","hasFinished","onload","__default","onerror","last","concat","pluginMain","waitSeconds","moduleMap","scriptSrc","absUrl","getName","Invoker","_newModule","DefineObject","appendConfigDepsAndEmbedDeps","newModule","instances","parent","parentDefine","relys","absUrlFromModule","absUrlFromDefineObject","getCallback","_dealApplyArgs","_loadCallback","exports","reinitByDefineObject","setInstanceType","_singlePluginResult","currentDefineModuleQueue","setState","isDefault","errinfo","_callback","_state","theCallback","depModule","getDeps","require","defined_module_for_deps","refmodule","toOtherModule","otherModule","theRelys","whenNeed","loadCallback","callbackFun","moduleInstance","opId","setToAll","getModuleId","ins","mobj","_m_","printOnNotDefined","root","nodes","_printOnNotDefined","leafs","findLeaf","item","genErrs","infos","nodePaths","logedPathMap","leaf","reverse","as","errModule","getState","depMod","indexPlguin","randModuleIndex","everyRequired","everyOkCallback","errCallback","isError","dealRelative","hasCallErr","theExports","depCount","depModules","invoker_of_module","checkFinish","dep_name","syncHandle","isFinish","customerResult","ignoreErrState","onGetModule","originDep","relyItFun","dmod","onFinish","i1","i2","i3","groupModule","defaultVersion","_url","resUrlBuilder","isInUrls","getUrls","rurl","loadModule","module2","loadScript","defaultMod","lastModule","m2Name","configDeps","d","orderDep","defContextName","DATA_ATTR_MODULE","DATA_ATTR_CONTEXT","INNER_DEPS_PLUGIN","innerDepsMap","globalDefineQueue","isOpera","opera","safariVersion","ua","toLowerCase","readyRegExp","platform","theLoaderScript","currentScript","theLoaderUrl","theHead","head","peek","lastAppendHeadDom","isSrcFromScriptLoad","lastSrc","lastScriptSrc","theRealDefine","_dealEmbedDeps","modName","moduleScript","isOrderDep","_getPluginParam","Handle","onError","ThisInvoker","_buildInvoker","getId","forArgsUrl","getUrlArgs","h","define","defineAsync","withAbsUrl","absUrlStr","_im","_id","getMineInvoker","getInvoker","nullNew","parentModule","isRequire","_scriptSrc","_src","_directDepLength","directDepLength","names","before","depBefore","absoluteUrl","instance","odeps","replaceDepAlias","hasOrderDep","applyArgs","jsFilePath","moduleLoop","hasCurrentPath","getCurrentScript","_getCurrentScriptOrSrc","b","sourceURL","stacktrace","__src","__currentPath","srcBeforeCurrentPath","setAttribute","__createNode","charset","async","__removeListener","ieName","__browserLoader","moduleName","useAttach","onScriptLoad","errListen","onScriptError","appendHeadDom","__getScriptData","evt","currentTarget","srcElement","nextDom","nextSibling","insertBefore","removed","scriptData","doDefine","predefine","isFirstRequire","prerequire","mineInvoker","oneDep","theMod","timeid","tagString","isOk","customerErrCallback","isErr","plugins","enable","delay","clearTimer","clearTimeout","waitTime","logError","logFun","checkResultFun","forTimeout","ifmodule","setTag","tag","promise","inject","initDefine","theDefine","defines","loaded","onConfigedCallback","theContext","argsObject","putUrlArgs","argsObj","clearUrlArgs","hasDefine","hasDefined","clear_module_","_newContext","context","contextName","defQueue","loader","pathname","ignoreProperties","depsPaths","aliasPaths","defineFunction","autoUrlArgs","dealtDeps","splice","addVersion","urlArg","forPrefixSuffix","encodeURIComponent","dealUrlArgs","image","timeout","xsmsg","sleep","ifmsg","connTimeout","sleepTimeout","isAutoUrlArgs","star","urlArgsArr","urlArgObj","starP","_urlArgs_prefix","_urlArgs_suffix","strfix","urlOrName","strfixObj","pushDeps","dealtDepArray","depsArray","keyName","defineHandle","originCallback","rt","defineFun","onModuleLoaded","lastDefineObject","moduleBeforeCurrentPath","needCallback","depModuleArgs","amd","progIds","httpRequest","varName","defaultVal","putProp","toObj","_method","_params","_headers","_async","_multiPart","_handleType","_timeout","okCallback","ok","failCallback","fail","uploadStartCallback","uploadStart","uploadProgressCallback","uploadProgress","uploadOkCallback","uploadOk","uploadErrorCallback","uploadError","uploadEndCallback","uploadEnd","_beforeOpenHook","_onOkResponseHook","_onFailResponseHook","createXhr","xhr","progId","XMLHttpRequest","ActiveXObject","conn","_conn","toUpperCase","headers","handleType","multiPart","_connAfterOpenHook","_doOnFailResponseHook","extraErr","formData","FormData","append","File","Blob","open","setRequestHeader","header","upload","onloadstart","onprogress","onloadend","timeoutTimer","isTimeout","abort","onreadystatechange","status","responseText","send","urlStr","methodStr","isAsync","paramsObj","headersObj","handleAs","done","_xshttp_request_","http","Request","reject","isDebug","isXsMsgDebug","LinkedList","newNode","element","pre","headNode","lastNode","current","insert","position","pNode","elementAt","getElement","willRemove","currentNode","nextCurrentNode","eachForRemove","removeAt","find","size","api","linkedList","initPostMessageBridge","postMessageBridge","instanceMap","cmd2ListenerMap","instanceBindMap","oinstanceidMap","listen","cmd","conndata","connectingSource","isActive","_onConned","_onMsg","_onResponse","_onElse","listener","osource","active","refused","instanceid","data","msgid","_sendData","sendConn","sendResponse","handleConn","fromSource","originStr","oinstanceid","listeners","Callback","isAccept","origin","handleAccept","minstanceid","handleBinded","checkSource","handleConned","handleMsg","handleResponse","msg","postMessage","event","rdata","runAfter","CommunicationUnit","onfailed","msgQueue","SLEEP","starttime","isFailed","isConnected","isCanceled","handleId","onConnectedListener","onReceiveListener","sendTop","release","couldChat","_source","initListen","initActively","checkPassively","setSource","_connectWindow","winObjOrCallback","notActive","gconfig","connected","mine","errtype","connectedCallback","receiveCallback","unit","winObj","_connectIFrame","iframe","getElementById","contentWindow","handleApi","connectIFrame","connectParent","connectTop","top","connectOpener","opener","listenMessage","debug","hasRegVnodex","__renderJsx","vm","component","$createElement","Vue","children","regVnodex","requiredVue","required","render","$listeners","$attrs","wrapProps","on","Comp","content","innerText","getDefine","getRequire","renderJsx","getVueCompiler","_default","template","group","regResult","res","compile","staticRenderFns","getVtemplate","vtemplate","comp","getImporter","getStyleBuilder","cssContent","styleDom","innerHTML","init","destroy","decodeBase64","base64Content","CONNS_MAP","DEBUG_OPTION","logMessage","Debug","currentTimemillis","clearRunAfter","timer","destroyTimer","startTimer","clients","checkHeart","selfclients","doSendMessage","isserver","__ifmsg","client","MESSAGE_LISTENER","fromid","toid","mdata","server","_createTime","Client","_conntimeout","_connTimeout","_sleeptimeout","_sleepTimeout","onConnect","gotConnectingFail","gotConnect","gotMessage","close","gotHeart","invoke","Base","_cmd","isself","_origin","_fromid","_connect","_connected","_destroyed","_onConnect","_onConnectFail","_isself","_rtimer","_starttime","_failed","_heartTimeout","_heartTime","_lastSendHeartTime","_lastReceiveHeartTime","_onHeartTimeout","_onClosed","_onMessage","_onConnected","destroyed","connect","_onConnectTimeout","checkClientConnected","onConn","errOrConndata","gotConnected","onConnected","sendClosed","closeBase","onHeartTimeout","onClosed","onMessage","Server","singleMode","_start","onConnectTimeout","IfmsgServer","IfmsgClient","onConnectFail","sendMessage","depId","depsObj","newInvoker","TryModule","arg","tryModule","depDeps","vars","moduleNames","existsMods","newName","lastM","info","lastDom","Node","_maxindex","_minindex","doms","anchorDom","engine","useImportLoad","useOnload","cssAPI","cssIndex","rootNodes","domIndex","previousSibling","buildAndGetNode","mthiz","pnode","getChild","addChild","appendCssDom","cssThis","inverse","mthis","getIndex","findAnchor","curStyle","curSheet","createStyle","styleSheet","sheet","ieCnt","ieLoads","ieCurCallback","createIeLoad","addImport","processIeLoad","nextLoad","importLoad","textContent","loadInterval","cssRules","linkLoad","link","rel","styleSheets","cssId","css","loadCss","cssPath","loadCsses","depsStr","json","img","Image","οnerrοr","DATA_CONF","DATA_CONFX","DATA_CONF2","DATA_CONF2X","DATA_MAIN","DATA_MAINX","DATA_CONF_TYPE","serviceConfigUrl","dataConf","dataMain","dataConfType","initFun","getMainPath","mainPath","main","getPath","extendConfig","localConfigVar","globalConfigVar","after","service","hasGlobal","resUrls","chooseLoader","loadServiceConfig","isLocal","confText","conf","beforeDealProperties","confUrl","globalConfig","localConfig","mainName","loaderName","initXsloader","startLoad","pageHref","resUrl","__htmv_init_bridge_","originThis","originArgs"],"mappings":"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"}